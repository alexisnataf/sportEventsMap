{"ast":null,"code":"/**\r\n * DevExtreme (esm/common/core/animation/fx.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport { getWindow } from \"../../../core/utils/window\";\nconst window = getWindow();\nimport eventsEngine from \"../events/core/events_engine\";\nimport errors from \"../../../core/errors\";\nimport { getPublicElement } from \"../../../core/element\";\nimport { extend } from \"../../../core/utils/extend\";\nimport { isFunction, isPlainObject } from \"../../../core/utils/type\";\nimport { each, map } from \"../../../core/utils/iterator\";\nimport { getTranslateCss, parseTranslate, clearCache, locate, getTranslate } from \"./translator\";\nimport { convertTransitionTimingFuncToEasing, getEasing } from \"./easing\";\nimport { requestAnimationFrame, cancelAnimationFrame } from \"./frame\";\nimport supportUtils from \"../../../__internal/core/utils/m_support\";\nimport positionUtils from \"./position\";\nimport { removeEvent } from \"../events/remove\";\nimport { addNamespace } from \"../events/utils/index\";\nimport { when, Deferred } from \"../../../core/utils/deferred\";\nconst removeEventName = addNamespace(removeEvent, \"dxFX\");\nimport { noop } from \"../../../core/utils/common\";\nconst RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\nconst ANIM_DATA_KEY = \"dxAnimData\";\nconst ANIM_QUEUE_KEY = \"dxAnimQueue\";\nconst TRANSFORM_PROP = \"transform\";\nconst TransitionAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"none\"\n    });\n    if (\"string\" === typeof config.from) {\n      $element.addClass(config.from);\n    } else {\n      setProps($element, config.from);\n    }\n    const that = this;\n    const deferred = new Deferred();\n    const cleanupWhen = config.cleanupWhen;\n    config.transitionAnimation = {\n      deferred: deferred,\n      finish: function () {\n        that._finishTransition($element);\n        if (cleanupWhen) {\n          when(deferred, cleanupWhen).always(function () {\n            that._cleanup($element, config);\n          });\n        } else {\n          that._cleanup($element, config);\n        }\n        deferred.resolveWith($element, [config, $element]);\n      }\n    };\n    this._completeAnimationCallback($element, config).done(function () {\n      config.transitionAnimation.finish();\n    }).fail(function () {\n      deferred.rejectWith($element, [config, $element]);\n    });\n    if (!config.duration) {\n      config.transitionAnimation.finish();\n    }\n    $element.css(\"transform\");\n  },\n  animate: function ($element, config) {\n    this._startAnimation($element, config);\n    return config.transitionAnimation.deferred.promise();\n  },\n  _completeAnimationCallback: function ($element, config) {\n    const that = this;\n    const startTime = Date.now() + config.delay;\n    const deferred = new Deferred();\n    const transitionEndFired = new Deferred();\n    const simulatedTransitionEndFired = new Deferred();\n    let simulatedEndEventTimer;\n    const transitionEndEventFullName = supportUtils.transitionEndEventName() + \".dxFX\";\n    config.transitionAnimation.cleanup = function () {\n      clearTimeout(simulatedEndEventTimer);\n      clearTimeout(waitForJSCompleteTimer);\n      eventsEngine.off($element, transitionEndEventFullName);\n      eventsEngine.off($element, removeEventName);\n    };\n    eventsEngine.one($element, transitionEndEventFullName, function () {\n      if (Date.now() - startTime >= config.duration) {\n        transitionEndFired.reject();\n      }\n    });\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      that.stop($element, config);\n      deferred.reject();\n    });\n    const waitForJSCompleteTimer = setTimeout(function () {\n      simulatedEndEventTimer = setTimeout(function () {\n        simulatedTransitionEndFired.reject();\n      }, config.duration + config.delay + fx._simulatedTransitionEndDelay);\n      when(transitionEndFired, simulatedTransitionEndFired).fail(function () {\n        deferred.resolve();\n      }.bind(this));\n    });\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"all\",\n      transitionDelay: config.delay + \"ms\",\n      transitionDuration: config.duration + \"ms\",\n      transitionTimingFunction: config.easing\n    });\n    if (\"string\" === typeof config.to) {\n      $element[0].className += \" \" + config.to;\n    } else if (config.to) {\n      setProps($element, config.to);\n    }\n  },\n  _finishTransition: function ($element) {\n    $element.css(\"transition\", \"none\");\n  },\n  _cleanup: function ($element, config) {\n    config.transitionAnimation.cleanup();\n    if (\"string\" === typeof config.from) {\n      $element.removeClass(config.from);\n      $element.removeClass(config.to);\n    }\n  },\n  stop: function ($element, config, jumpToEnd) {\n    if (!config) {\n      return;\n    }\n    if (jumpToEnd) {\n      config.transitionAnimation.finish();\n    } else {\n      if (isPlainObject(config.to)) {\n        each(config.to, function (key) {\n          $element.css(key, $element.css(key));\n        });\n      }\n      this._finishTransition($element);\n      this._cleanup($element, config);\n    }\n  }\n};\nconst FrameAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    setProps($element, config.from);\n  },\n  animate: function ($element, config) {\n    const deferred = new Deferred();\n    const that = this;\n    if (!config) {\n      return deferred.reject().promise();\n    }\n    each(config.to, function (prop) {\n      if (void 0 === config.from[prop]) {\n        config.from[prop] = that._normalizeValue($element.css(prop));\n      }\n    });\n    if (config.to.transform) {\n      config.from.transform = that._parseTransform(config.from.transform);\n      config.to.transform = that._parseTransform(config.to.transform);\n    }\n    config.frameAnimation = {\n      to: config.to,\n      from: config.from,\n      currentValue: config.from,\n      easing: convertTransitionTimingFuncToEasing(config.easing),\n      duration: config.duration,\n      startTime: new Date().valueOf(),\n      finish: function () {\n        this.currentValue = this.to;\n        this.draw();\n        cancelAnimationFrame(config.frameAnimation.animationFrameId);\n        deferred.resolve();\n      },\n      draw: function () {\n        if (config.draw) {\n          config.draw(this.currentValue);\n          return;\n        }\n        const currentValue = extend({}, this.currentValue);\n        if (currentValue.transform) {\n          currentValue.transform = map(currentValue.transform, function (value, prop) {\n            if (\"translate\" === prop) {\n              return getTranslateCss(value);\n            } else if (\"scale\" === prop) {\n              return \"scale(\" + value + \")\";\n            } else if (\"rotate\" === prop.substr(0, prop.length - 1)) {\n              return prop + \"(\" + value + \"deg)\";\n            }\n          }).join(\" \");\n        }\n        $element.css(currentValue);\n      }\n    };\n    if (config.delay) {\n      config.frameAnimation.startTime += config.delay;\n      config.frameAnimation.delayTimeout = setTimeout(function () {\n        that._startAnimation($element, config);\n      }, config.delay);\n    } else {\n      that._startAnimation($element, config);\n    }\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      if (config.frameAnimation) {\n        cancelAnimationFrame(config.frameAnimation.animationFrameId);\n      }\n    });\n    this._animationStep($element, config);\n  },\n  _parseTransform: function (transformString) {\n    const result = {};\n    each(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), function (i, part) {\n      const translateData = parseTranslate(part);\n      const scaleData = part.match(/scale\\((.+?)\\)/);\n      const rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\n      if (translateData) {\n        result.translate = translateData;\n      }\n      if (scaleData && scaleData[1]) {\n        result.scale = parseFloat(scaleData[1]);\n      }\n      if (rotateData && rotateData[1]) {\n        result[rotateData[1]] = parseFloat(rotateData[2]);\n      }\n    });\n    return result;\n  },\n  stop: function ($element, config, jumpToEnd) {\n    const frameAnimation = config && config.frameAnimation;\n    if (!frameAnimation) {\n      return;\n    }\n    cancelAnimationFrame(frameAnimation.animationFrameId);\n    clearTimeout(frameAnimation.delayTimeout);\n    if (jumpToEnd) {\n      frameAnimation.finish();\n    }\n    delete config.frameAnimation;\n  },\n  _animationStep: function ($element, config) {\n    const frameAnimation = config && config.frameAnimation;\n    if (!frameAnimation) {\n      return;\n    }\n    const now = new Date().valueOf();\n    if (now >= frameAnimation.startTime + frameAnimation.duration) {\n      frameAnimation.finish();\n      return;\n    }\n    frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\n    frameAnimation.draw();\n    const that = this;\n    frameAnimation.animationFrameId = requestAnimationFrame(function () {\n      that._animationStep($element, config);\n    });\n  },\n  _calcStepValue: function (frameAnimation, currentDuration) {\n    const calcValueRecursively = function (from, to) {\n      const result = Array.isArray(to) ? [] : {};\n      each(to, function (propName, endPropValue) {\n        if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue)) {\n          return true;\n        }\n        result[propName] = \"object\" === typeof endPropValue ? calcValueRecursively(from[propName], endPropValue) : function (propName) {\n          const x = currentDuration / frameAnimation.duration;\n          const t = currentDuration;\n          const b = 1 * from[propName];\n          const c = to[propName] - from[propName];\n          const d = frameAnimation.duration;\n          return getEasing(frameAnimation.easing)(x, t, b, c, d);\n        }(propName);\n      });\n      return result;\n    };\n    return calcValueRecursively(frameAnimation.from, frameAnimation.to);\n  },\n  _normalizeValue: function (value) {\n    const numericValue = parseFloat(value);\n    if (false === numericValue) {\n      return value;\n    }\n    return numericValue;\n  }\n};\nconst FallbackToNoAnimationStrategy = {\n  initAnimation: function () {},\n  animate: function () {\n    return new Deferred().resolve().promise();\n  },\n  stop: noop,\n  isSynchronous: true\n};\nconst getAnimationStrategy = function (config) {\n  config = config || {};\n  const animationStrategies = {\n    transition: supportUtils.transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\n    frame: FrameAnimationStrategy,\n    noAnimation: FallbackToNoAnimationStrategy\n  };\n  let strategy = config.strategy || \"transition\";\n  if (\"css\" === config.type && !supportUtils.transition()) {\n    strategy = \"noAnimation\";\n  }\n  return animationStrategies[strategy];\n};\nconst baseConfigValidator = function (config, animationType, validate, typeMessage) {\n  each([\"from\", \"to\"], function () {\n    if (!validate(config[this])) {\n      throw errors.Error(\"E0010\", animationType, this, typeMessage);\n    }\n  });\n};\nconst isObjectConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return isPlainObject(target);\n  }, \"a plain object\");\n};\nconst isStringConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return \"string\" === typeof target;\n  }, \"a string\");\n};\nconst CustomAnimationConfigurator = {\n  setup: function () {}\n};\nconst CssAnimationConfigurator = {\n  validateConfig: function (config) {\n    isStringConfigValidator(config, \"css\");\n  },\n  setup: function () {}\n};\nconst positionAliases = {\n  top: {\n    my: \"bottom center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"top center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"left center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"right center\",\n    at: \"left center\"\n  }\n};\nconst SlideAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"slide\");\n  },\n  setup: function ($element, config) {\n    const location = locate($element);\n    if (\"slide\" !== config.type) {\n      const positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\n      positioningConfig.position = extend({\n        of: window\n      }, positionAliases[config.direction]);\n      setupPosition($element, positioningConfig);\n    }\n    this._setUpConfig(location, config.from);\n    this._setUpConfig(location, config.to);\n    clearCache($element);\n  },\n  _setUpConfig: function (location, config) {\n    config.left = \"left\" in config ? config.left : \"+=0\";\n    config.top = \"top\" in config ? config.top : \"+=0\";\n    this._initNewPosition(location, config);\n  },\n  _initNewPosition: function (location, config) {\n    const position = {\n      left: config.left,\n      top: config.top\n    };\n    delete config.left;\n    delete config.top;\n    let relativeValue = this._getRelativeValue(position.left);\n    if (void 0 !== relativeValue) {\n      position.left = relativeValue + location.left;\n    } else {\n      config.left = 0;\n    }\n    relativeValue = this._getRelativeValue(position.top);\n    if (void 0 !== relativeValue) {\n      position.top = relativeValue + location.top;\n    } else {\n      config.top = 0;\n    }\n    config.transform = getTranslateCss({\n      x: position.left,\n      y: position.top\n    });\n  },\n  _getRelativeValue: function (value) {\n    let relativeValue;\n    if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\n      return parseInt(relativeValue[1] + \"1\") * relativeValue[2];\n    }\n  }\n};\nconst FadeAnimationConfigurator = {\n  setup: function ($element, config) {\n    const from = config.from;\n    const to = config.to;\n    const defaultFromOpacity = \"fadeOut\" === config.type ? 1 : 0;\n    const defaultToOpacity = \"fadeOut\" === config.type ? 0 : 1;\n    let fromOpacity = isPlainObject(from) ? String(from.opacity ?? defaultFromOpacity) : String(from);\n    let toOpacity = isPlainObject(to) ? String(to.opacity ?? defaultToOpacity) : String(to);\n    if (!config.skipElementInitialStyles) {\n      fromOpacity = $element.css(\"opacity\");\n    }\n    switch (config.type) {\n      case \"fadeIn\":\n        toOpacity = 1;\n        break;\n      case \"fadeOut\":\n        toOpacity = 0;\n    }\n    config.from = {\n      visibility: \"visible\",\n      opacity: fromOpacity\n    };\n    config.to = {\n      opacity: toOpacity\n    };\n  }\n};\nconst PopAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"pop\");\n  },\n  setup: function ($element, config) {\n    const from = config.from;\n    const to = config.to;\n    const fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\n    const toOpacity = \"opacity\" in to ? to.opacity : 1;\n    const fromScale = \"scale\" in from ? from.scale : 0;\n    const toScale = \"scale\" in to ? to.scale : 1;\n    config.from = {\n      opacity: fromOpacity\n    };\n    const translate = getTranslate($element);\n    config.from.transform = this._getCssTransform(translate, fromScale);\n    config.to = {\n      opacity: toOpacity\n    };\n    config.to.transform = this._getCssTransform(translate, toScale);\n  },\n  _getCssTransform: function (translate, scale) {\n    return getTranslateCss(translate) + \"scale(\" + scale + \")\";\n  }\n};\nconst animationConfigurators = {\n  custom: CustomAnimationConfigurator,\n  slide: SlideAnimationConfigurator,\n  slideIn: SlideAnimationConfigurator,\n  slideOut: SlideAnimationConfigurator,\n  fade: FadeAnimationConfigurator,\n  fadeIn: FadeAnimationConfigurator,\n  fadeOut: FadeAnimationConfigurator,\n  pop: PopAnimationConfigurator,\n  css: CssAnimationConfigurator\n};\nconst getAnimationConfigurator = function (config) {\n  const result = animationConfigurators[config.type];\n  if (!result) {\n    throw errors.Error(\"E0011\", config.type);\n  }\n  return result;\n};\nconst defaultJSConfig = {\n  type: \"custom\",\n  from: {},\n  to: {},\n  duration: 400,\n  start: noop,\n  complete: noop,\n  easing: \"ease\",\n  delay: 0\n};\nconst defaultCssConfig = {\n  duration: 400,\n  easing: \"ease\",\n  delay: 0\n};\nfunction setupAnimationOnElement() {\n  const $element = this.element;\n  const config = this.config;\n  setupPosition($element, config.from);\n  setupPosition($element, config.to);\n  this.configurator.setup($element, config);\n  $element.data(\"dxAnimData\", this);\n  if (fx.off) {\n    config.duration = 0;\n    config.delay = 0;\n  }\n  this.strategy.initAnimation($element, config);\n  if (config.start) {\n    const element = getPublicElement($element);\n    config.start.apply(this, [element, config]);\n  }\n}\nconst onElementAnimationComplete = function (animation) {\n  const $element = animation.element;\n  const config = animation.config;\n  $element.removeData(\"dxAnimData\");\n  if (config.complete) {\n    const element = getPublicElement($element);\n    config.complete.apply(this, [element, config]);\n  }\n  animation.deferred.resolveWith(this, [$element, config]);\n};\nconst startAnimationOnElement = function () {\n  const animation = this;\n  const $element = animation.element;\n  const config = animation.config;\n  animation.isStarted = true;\n  return animation.strategy.animate($element, config).done(function () {\n    onElementAnimationComplete(animation);\n  }).fail(function () {\n    animation.deferred.rejectWith(this, [$element, config]);\n  });\n};\nconst stopAnimationOnElement = function (jumpToEnd) {\n  const animation = this;\n  const $element = animation.element;\n  const config = animation.config;\n  clearTimeout(animation.startTimeout);\n  if (!animation.isStarted) {\n    animation.start();\n  }\n  animation.strategy.stop($element, config, jumpToEnd);\n};\nconst scopedRemoveEvent = addNamespace(removeEvent, \"dxFXStartAnimation\");\nconst subscribeToRemoveEvent = function (animation) {\n  eventsEngine.off(animation.element, scopedRemoveEvent);\n  eventsEngine.on(animation.element, scopedRemoveEvent, function () {\n    fx.stop(animation.element);\n  });\n  animation.deferred.always(function () {\n    eventsEngine.off(animation.element, scopedRemoveEvent);\n  });\n};\nconst createAnimation = function (element, initialConfig) {\n  const defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\n  const config = extend(true, {}, defaultConfig, initialConfig);\n  const configurator = getAnimationConfigurator(config);\n  const strategy = getAnimationStrategy(config);\n  const animation = {\n    element: $(element),\n    config: config,\n    configurator: configurator,\n    strategy: strategy,\n    isSynchronous: strategy.isSynchronous,\n    setup: setupAnimationOnElement,\n    start: startAnimationOnElement,\n    stop: stopAnimationOnElement,\n    deferred: new Deferred()\n  };\n  if (isFunction(configurator.validateConfig)) {\n    configurator.validateConfig(config);\n  }\n  subscribeToRemoveEvent(animation);\n  return animation;\n};\nconst animate = function (element, config) {\n  const $element = $(element);\n  if (!$element.length) {\n    return new Deferred().resolve().promise();\n  }\n  const animation = createAnimation($element, config);\n  pushInAnimationQueue($element, animation);\n  return animation.deferred.promise();\n};\nfunction pushInAnimationQueue($element, animation) {\n  const queueData = getAnimQueueData($element);\n  writeAnimQueueData($element, queueData);\n  queueData.push(animation);\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n}\nfunction getAnimQueueData($element) {\n  return $element.data(\"dxAnimQueue\") || [];\n}\nfunction writeAnimQueueData($element, queueData) {\n  $element.data(\"dxAnimQueue\", queueData);\n}\nconst destroyAnimQueueData = function ($element) {\n  $element.removeData(\"dxAnimQueue\");\n};\nfunction isAnimating($element) {\n  return !!$element.data(\"dxAnimData\");\n}\nfunction shiftFromAnimationQueue($element, queueData) {\n  queueData = getAnimQueueData($element);\n  if (!queueData.length) {\n    return;\n  }\n  const animation = queueData.shift();\n  if (0 === queueData.length) {\n    destroyAnimQueueData($element);\n  }\n  executeAnimation(animation).done(function () {\n    if (!isAnimating($element)) {\n      shiftFromAnimationQueue($element);\n    }\n  });\n}\nfunction executeAnimation(animation) {\n  animation.setup();\n  if (fx.off || animation.isSynchronous) {\n    animation.start();\n  } else {\n    animation.startTimeout = setTimeout(function () {\n      animation.start();\n    });\n  }\n  return animation.deferred.promise();\n}\nfunction setupPosition($element, config) {\n  if (!config || !config.position) {\n    return;\n  }\n  const win = $(window);\n  let left = 0;\n  let top = 0;\n  const position = positionUtils.calculate($element, config.position);\n  const offset = $element.offset();\n  const currentPosition = $element.position();\n  if (currentPosition.top > offset.top) {\n    top = win.scrollTop();\n  }\n  if (currentPosition.left > offset.left) {\n    left = win.scrollLeft();\n  }\n  extend(config, {\n    left: position.h.location - offset.left + currentPosition.left - left,\n    top: position.v.location - offset.top + currentPosition.top - top\n  });\n  delete config.position;\n}\nfunction setProps($element, props) {\n  each(props, function (key, value) {\n    try {\n      $element.css(key, isFunction(value) ? value() : value);\n    } catch (e) {}\n  });\n}\nconst stop = function (element, jumpToEnd) {\n  const $element = $(element);\n  const queueData = getAnimQueueData($element);\n  each(queueData, function (_, animation) {\n    animation.config.delay = 0;\n    animation.config.duration = 0;\n    animation.isSynchronous = true;\n  });\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n  const animation = $element.data(\"dxAnimData\");\n  if (animation) {\n    animation.stop(jumpToEnd);\n  }\n  $element.removeData(\"dxAnimData\");\n  destroyAnimQueueData($element);\n};\nconst fx = {\n  off: false,\n  animationTypes: animationConfigurators,\n  animate: animate,\n  createAnimation: createAnimation,\n  isAnimating: isAnimating,\n  stop: stop,\n  _simulatedTransitionEndDelay: 100\n};\nexport default fx;","map":{"version":3,"names":["$","getWindow","window","eventsEngine","errors","getPublicElement","extend","isFunction","isPlainObject","each","map","getTranslateCss","parseTranslate","clearCache","locate","getTranslate","convertTransitionTimingFuncToEasing","getEasing","requestAnimationFrame","cancelAnimationFrame","supportUtils","positionUtils","removeEvent","addNamespace","when","Deferred","removeEventName","noop","RELATIVE_VALUE_REGEX","ANIM_DATA_KEY","ANIM_QUEUE_KEY","TRANSFORM_PROP","TransitionAnimationStrategy","initAnimation","$element","config","css","transitionProperty","from","addClass","setProps","that","deferred","cleanupWhen","transitionAnimation","finish","_finishTransition","always","_cleanup","resolveWith","_completeAnimationCallback","done","fail","rejectWith","duration","animate","_startAnimation","promise","startTime","Date","now","delay","transitionEndFired","simulatedTransitionEndFired","simulatedEndEventTimer","transitionEndEventFullName","transitionEndEventName","cleanup","clearTimeout","waitForJSCompleteTimer","off","one","reject","on","stop","setTimeout","fx","_simulatedTransitionEndDelay","resolve","bind","transitionDelay","transitionDuration","transitionTimingFunction","easing","to","className","removeClass","jumpToEnd","key","FrameAnimationStrategy","prop","_normalizeValue","transform","_parseTransform","frameAnimation","currentValue","valueOf","draw","animationFrameId","value","substr","length","join","delayTimeout","_animationStep","transformString","result","match","i","part","translateData","scaleData","rotateData","translate","scale","parseFloat","_calcStepValue","currentDuration","calcValueRecursively","Array","isArray","propName","endPropValue","x","t","b","c","d","numericValue","FallbackToNoAnimationStrategy","isSynchronous","getAnimationStrategy","animationStrategies","transition","frame","noAnimation","strategy","type","baseConfigValidator","animationType","validate","typeMessage","Error","isObjectConfigValidator","target","isStringConfigValidator","CustomAnimationConfigurator","setup","CssAnimationConfigurator","validateConfig","positionAliases","top","my","at","bottom","right","left","SlideAnimationConfigurator","location","positioningConfig","position","of","direction","setupPosition","_setUpConfig","_initNewPosition","relativeValue","_getRelativeValue","y","exec","parseInt","FadeAnimationConfigurator","defaultFromOpacity","defaultToOpacity","fromOpacity","String","opacity","toOpacity","skipElementInitialStyles","visibility","PopAnimationConfigurator","fromScale","toScale","_getCssTransform","animationConfigurators","custom","slide","slideIn","slideOut","fade","fadeIn","fadeOut","pop","getAnimationConfigurator","defaultJSConfig","start","complete","defaultCssConfig","setupAnimationOnElement","element","configurator","data","apply","onElementAnimationComplete","animation","removeData","startAnimationOnElement","isStarted","stopAnimationOnElement","startTimeout","scopedRemoveEvent","subscribeToRemoveEvent","createAnimation","initialConfig","defaultConfig","pushInAnimationQueue","queueData","getAnimQueueData","writeAnimQueueData","push","isAnimating","shiftFromAnimationQueue","destroyAnimQueueData","shift","executeAnimation","win","calculate","offset","currentPosition","scrollTop","scrollLeft","h","v","props","e","_","animationTypes"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme/esm/common/core/animation/fx.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/common/core/animation/fx.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    getWindow\r\n} from \"../../../core/utils/window\";\r\nconst window = getWindow();\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport errors from \"../../../core/errors\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport {\r\n    isFunction,\r\n    isPlainObject\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    each,\r\n    map\r\n} from \"../../../core/utils/iterator\";\r\nimport {\r\n    getTranslateCss,\r\n    parseTranslate,\r\n    clearCache,\r\n    locate,\r\n    getTranslate\r\n} from \"./translator\";\r\nimport {\r\n    convertTransitionTimingFuncToEasing,\r\n    getEasing\r\n} from \"./easing\";\r\nimport {\r\n    requestAnimationFrame,\r\n    cancelAnimationFrame\r\n} from \"./frame\";\r\nimport supportUtils from \"../../../__internal/core/utils/m_support\";\r\nimport positionUtils from \"./position\";\r\nimport {\r\n    removeEvent\r\n} from \"../events/remove\";\r\nimport {\r\n    addNamespace\r\n} from \"../events/utils/index\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../../../core/utils/deferred\";\r\nconst removeEventName = addNamespace(removeEvent, \"dxFX\");\r\nimport {\r\n    noop\r\n} from \"../../../core/utils/common\";\r\nconst RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\r\nconst ANIM_DATA_KEY = \"dxAnimData\";\r\nconst ANIM_QUEUE_KEY = \"dxAnimQueue\";\r\nconst TRANSFORM_PROP = \"transform\";\r\nconst TransitionAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"none\"\r\n        });\r\n        if (\"string\" === typeof config.from) {\r\n            $element.addClass(config.from)\r\n        } else {\r\n            setProps($element, config.from)\r\n        }\r\n        const that = this;\r\n        const deferred = new Deferred;\r\n        const cleanupWhen = config.cleanupWhen;\r\n        config.transitionAnimation = {\r\n            deferred: deferred,\r\n            finish: function() {\r\n                that._finishTransition($element);\r\n                if (cleanupWhen) {\r\n                    when(deferred, cleanupWhen).always((function() {\r\n                        that._cleanup($element, config)\r\n                    }))\r\n                } else {\r\n                    that._cleanup($element, config)\r\n                }\r\n                deferred.resolveWith($element, [config, $element])\r\n            }\r\n        };\r\n        this._completeAnimationCallback($element, config).done((function() {\r\n            config.transitionAnimation.finish()\r\n        })).fail((function() {\r\n            deferred.rejectWith($element, [config, $element])\r\n        }));\r\n        if (!config.duration) {\r\n            config.transitionAnimation.finish()\r\n        }\r\n        $element.css(\"transform\")\r\n    },\r\n    animate: function($element, config) {\r\n        this._startAnimation($element, config);\r\n        return config.transitionAnimation.deferred.promise()\r\n    },\r\n    _completeAnimationCallback: function($element, config) {\r\n        const that = this;\r\n        const startTime = Date.now() + config.delay;\r\n        const deferred = new Deferred;\r\n        const transitionEndFired = new Deferred;\r\n        const simulatedTransitionEndFired = new Deferred;\r\n        let simulatedEndEventTimer;\r\n        const transitionEndEventFullName = supportUtils.transitionEndEventName() + \".dxFX\";\r\n        config.transitionAnimation.cleanup = function() {\r\n            clearTimeout(simulatedEndEventTimer);\r\n            clearTimeout(waitForJSCompleteTimer);\r\n            eventsEngine.off($element, transitionEndEventFullName);\r\n            eventsEngine.off($element, removeEventName)\r\n        };\r\n        eventsEngine.one($element, transitionEndEventFullName, (function() {\r\n            if (Date.now() - startTime >= config.duration) {\r\n                transitionEndFired.reject()\r\n            }\r\n        }));\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, (function() {\r\n            that.stop($element, config);\r\n            deferred.reject()\r\n        }));\r\n        const waitForJSCompleteTimer = setTimeout((function() {\r\n            simulatedEndEventTimer = setTimeout((function() {\r\n                simulatedTransitionEndFired.reject()\r\n            }), config.duration + config.delay + fx._simulatedTransitionEndDelay);\r\n            when(transitionEndFired, simulatedTransitionEndFired).fail(function() {\r\n                deferred.resolve()\r\n            }.bind(this))\r\n        }));\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"all\",\r\n            transitionDelay: config.delay + \"ms\",\r\n            transitionDuration: config.duration + \"ms\",\r\n            transitionTimingFunction: config.easing\r\n        });\r\n        if (\"string\" === typeof config.to) {\r\n            $element[0].className += \" \" + config.to\r\n        } else if (config.to) {\r\n            setProps($element, config.to)\r\n        }\r\n    },\r\n    _finishTransition: function($element) {\r\n        $element.css(\"transition\", \"none\")\r\n    },\r\n    _cleanup: function($element, config) {\r\n        config.transitionAnimation.cleanup();\r\n        if (\"string\" === typeof config.from) {\r\n            $element.removeClass(config.from);\r\n            $element.removeClass(config.to)\r\n        }\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        if (!config) {\r\n            return\r\n        }\r\n        if (jumpToEnd) {\r\n            config.transitionAnimation.finish()\r\n        } else {\r\n            if (isPlainObject(config.to)) {\r\n                each(config.to, (function(key) {\r\n                    $element.css(key, $element.css(key))\r\n                }))\r\n            }\r\n            this._finishTransition($element);\r\n            this._cleanup($element, config)\r\n        }\r\n    }\r\n};\r\nconst FrameAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        setProps($element, config.from)\r\n    },\r\n    animate: function($element, config) {\r\n        const deferred = new Deferred;\r\n        const that = this;\r\n        if (!config) {\r\n            return deferred.reject().promise()\r\n        }\r\n        each(config.to, (function(prop) {\r\n            if (void 0 === config.from[prop]) {\r\n                config.from[prop] = that._normalizeValue($element.css(prop))\r\n            }\r\n        }));\r\n        if (config.to.transform) {\r\n            config.from.transform = that._parseTransform(config.from.transform);\r\n            config.to.transform = that._parseTransform(config.to.transform)\r\n        }\r\n        config.frameAnimation = {\r\n            to: config.to,\r\n            from: config.from,\r\n            currentValue: config.from,\r\n            easing: convertTransitionTimingFuncToEasing(config.easing),\r\n            duration: config.duration,\r\n            startTime: (new Date).valueOf(),\r\n            finish: function() {\r\n                this.currentValue = this.to;\r\n                this.draw();\r\n                cancelAnimationFrame(config.frameAnimation.animationFrameId);\r\n                deferred.resolve()\r\n            },\r\n            draw: function() {\r\n                if (config.draw) {\r\n                    config.draw(this.currentValue);\r\n                    return\r\n                }\r\n                const currentValue = extend({}, this.currentValue);\r\n                if (currentValue.transform) {\r\n                    currentValue.transform = map(currentValue.transform, (function(value, prop) {\r\n                        if (\"translate\" === prop) {\r\n                            return getTranslateCss(value)\r\n                        } else if (\"scale\" === prop) {\r\n                            return \"scale(\" + value + \")\"\r\n                        } else if (\"rotate\" === prop.substr(0, prop.length - 1)) {\r\n                            return prop + \"(\" + value + \"deg)\"\r\n                        }\r\n                    })).join(\" \")\r\n                }\r\n                $element.css(currentValue)\r\n            }\r\n        };\r\n        if (config.delay) {\r\n            config.frameAnimation.startTime += config.delay;\r\n            config.frameAnimation.delayTimeout = setTimeout((function() {\r\n                that._startAnimation($element, config)\r\n            }), config.delay)\r\n        } else {\r\n            that._startAnimation($element, config)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, (function() {\r\n            if (config.frameAnimation) {\r\n                cancelAnimationFrame(config.frameAnimation.animationFrameId)\r\n            }\r\n        }));\r\n        this._animationStep($element, config)\r\n    },\r\n    _parseTransform: function(transformString) {\r\n        const result = {};\r\n        each(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), (function(i, part) {\r\n            const translateData = parseTranslate(part);\r\n            const scaleData = part.match(/scale\\((.+?)\\)/);\r\n            const rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\r\n            if (translateData) {\r\n                result.translate = translateData\r\n            }\r\n            if (scaleData && scaleData[1]) {\r\n                result.scale = parseFloat(scaleData[1])\r\n            }\r\n            if (rotateData && rotateData[1]) {\r\n                result[rotateData[1]] = parseFloat(rotateData[2])\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        const frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        cancelAnimationFrame(frameAnimation.animationFrameId);\r\n        clearTimeout(frameAnimation.delayTimeout);\r\n        if (jumpToEnd) {\r\n            frameAnimation.finish()\r\n        }\r\n        delete config.frameAnimation\r\n    },\r\n    _animationStep: function($element, config) {\r\n        const frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        const now = (new Date).valueOf();\r\n        if (now >= frameAnimation.startTime + frameAnimation.duration) {\r\n            frameAnimation.finish();\r\n            return\r\n        }\r\n        frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\r\n        frameAnimation.draw();\r\n        const that = this;\r\n        frameAnimation.animationFrameId = requestAnimationFrame((function() {\r\n            that._animationStep($element, config)\r\n        }))\r\n    },\r\n    _calcStepValue: function(frameAnimation, currentDuration) {\r\n        const calcValueRecursively = function(from, to) {\r\n            const result = Array.isArray(to) ? [] : {};\r\n            each(to, (function(propName, endPropValue) {\r\n                if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue)) {\r\n                    return true\r\n                }\r\n                result[propName] = \"object\" === typeof endPropValue ? calcValueRecursively(from[propName], endPropValue) : function(propName) {\r\n                    const x = currentDuration / frameAnimation.duration;\r\n                    const t = currentDuration;\r\n                    const b = 1 * from[propName];\r\n                    const c = to[propName] - from[propName];\r\n                    const d = frameAnimation.duration;\r\n                    return getEasing(frameAnimation.easing)(x, t, b, c, d)\r\n                }(propName)\r\n            }));\r\n            return result\r\n        };\r\n        return calcValueRecursively(frameAnimation.from, frameAnimation.to)\r\n    },\r\n    _normalizeValue: function(value) {\r\n        const numericValue = parseFloat(value);\r\n        if (false === numericValue) {\r\n            return value\r\n        }\r\n        return numericValue\r\n    }\r\n};\r\nconst FallbackToNoAnimationStrategy = {\r\n    initAnimation: function() {},\r\n    animate: function() {\r\n        return (new Deferred).resolve().promise()\r\n    },\r\n    stop: noop,\r\n    isSynchronous: true\r\n};\r\nconst getAnimationStrategy = function(config) {\r\n    config = config || {};\r\n    const animationStrategies = {\r\n        transition: supportUtils.transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\r\n        frame: FrameAnimationStrategy,\r\n        noAnimation: FallbackToNoAnimationStrategy\r\n    };\r\n    let strategy = config.strategy || \"transition\";\r\n    if (\"css\" === config.type && !supportUtils.transition()) {\r\n        strategy = \"noAnimation\"\r\n    }\r\n    return animationStrategies[strategy]\r\n};\r\nconst baseConfigValidator = function(config, animationType, validate, typeMessage) {\r\n    each([\"from\", \"to\"], (function() {\r\n        if (!validate(config[this])) {\r\n            throw errors.Error(\"E0010\", animationType, this, typeMessage)\r\n        }\r\n    }))\r\n};\r\nconst isObjectConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, (function(target) {\r\n        return isPlainObject(target)\r\n    }), \"a plain object\")\r\n};\r\nconst isStringConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, (function(target) {\r\n        return \"string\" === typeof target\r\n    }), \"a string\")\r\n};\r\nconst CustomAnimationConfigurator = {\r\n    setup: function() {}\r\n};\r\nconst CssAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isStringConfigValidator(config, \"css\")\r\n    },\r\n    setup: function() {}\r\n};\r\nconst positionAliases = {\r\n    top: {\r\n        my: \"bottom center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"top center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"left center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"right center\",\r\n        at: \"left center\"\r\n    }\r\n};\r\nconst SlideAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"slide\")\r\n    },\r\n    setup: function($element, config) {\r\n        const location = locate($element);\r\n        if (\"slide\" !== config.type) {\r\n            const positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\r\n            positioningConfig.position = extend({\r\n                of: window\r\n            }, positionAliases[config.direction]);\r\n            setupPosition($element, positioningConfig)\r\n        }\r\n        this._setUpConfig(location, config.from);\r\n        this._setUpConfig(location, config.to);\r\n        clearCache($element)\r\n    },\r\n    _setUpConfig: function(location, config) {\r\n        config.left = \"left\" in config ? config.left : \"+=0\";\r\n        config.top = \"top\" in config ? config.top : \"+=0\";\r\n        this._initNewPosition(location, config)\r\n    },\r\n    _initNewPosition: function(location, config) {\r\n        const position = {\r\n            left: config.left,\r\n            top: config.top\r\n        };\r\n        delete config.left;\r\n        delete config.top;\r\n        let relativeValue = this._getRelativeValue(position.left);\r\n        if (void 0 !== relativeValue) {\r\n            position.left = relativeValue + location.left\r\n        } else {\r\n            config.left = 0\r\n        }\r\n        relativeValue = this._getRelativeValue(position.top);\r\n        if (void 0 !== relativeValue) {\r\n            position.top = relativeValue + location.top\r\n        } else {\r\n            config.top = 0\r\n        }\r\n        config.transform = getTranslateCss({\r\n            x: position.left,\r\n            y: position.top\r\n        })\r\n    },\r\n    _getRelativeValue: function(value) {\r\n        let relativeValue;\r\n        if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\r\n            return parseInt(relativeValue[1] + \"1\") * relativeValue[2]\r\n        }\r\n    }\r\n};\r\nconst FadeAnimationConfigurator = {\r\n    setup: function($element, config) {\r\n        const from = config.from;\r\n        const to = config.to;\r\n        const defaultFromOpacity = \"fadeOut\" === config.type ? 1 : 0;\r\n        const defaultToOpacity = \"fadeOut\" === config.type ? 0 : 1;\r\n        let fromOpacity = isPlainObject(from) ? String(from.opacity ?? defaultFromOpacity) : String(from);\r\n        let toOpacity = isPlainObject(to) ? String(to.opacity ?? defaultToOpacity) : String(to);\r\n        if (!config.skipElementInitialStyles) {\r\n            fromOpacity = $element.css(\"opacity\")\r\n        }\r\n        switch (config.type) {\r\n            case \"fadeIn\":\r\n                toOpacity = 1;\r\n                break;\r\n            case \"fadeOut\":\r\n                toOpacity = 0\r\n        }\r\n        config.from = {\r\n            visibility: \"visible\",\r\n            opacity: fromOpacity\r\n        };\r\n        config.to = {\r\n            opacity: toOpacity\r\n        }\r\n    }\r\n};\r\nconst PopAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"pop\")\r\n    },\r\n    setup: function($element, config) {\r\n        const from = config.from;\r\n        const to = config.to;\r\n        const fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\r\n        const toOpacity = \"opacity\" in to ? to.opacity : 1;\r\n        const fromScale = \"scale\" in from ? from.scale : 0;\r\n        const toScale = \"scale\" in to ? to.scale : 1;\r\n        config.from = {\r\n            opacity: fromOpacity\r\n        };\r\n        const translate = getTranslate($element);\r\n        config.from.transform = this._getCssTransform(translate, fromScale);\r\n        config.to = {\r\n            opacity: toOpacity\r\n        };\r\n        config.to.transform = this._getCssTransform(translate, toScale)\r\n    },\r\n    _getCssTransform: function(translate, scale) {\r\n        return getTranslateCss(translate) + \"scale(\" + scale + \")\"\r\n    }\r\n};\r\nconst animationConfigurators = {\r\n    custom: CustomAnimationConfigurator,\r\n    slide: SlideAnimationConfigurator,\r\n    slideIn: SlideAnimationConfigurator,\r\n    slideOut: SlideAnimationConfigurator,\r\n    fade: FadeAnimationConfigurator,\r\n    fadeIn: FadeAnimationConfigurator,\r\n    fadeOut: FadeAnimationConfigurator,\r\n    pop: PopAnimationConfigurator,\r\n    css: CssAnimationConfigurator\r\n};\r\nconst getAnimationConfigurator = function(config) {\r\n    const result = animationConfigurators[config.type];\r\n    if (!result) {\r\n        throw errors.Error(\"E0011\", config.type)\r\n    }\r\n    return result\r\n};\r\nconst defaultJSConfig = {\r\n    type: \"custom\",\r\n    from: {},\r\n    to: {},\r\n    duration: 400,\r\n    start: noop,\r\n    complete: noop,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\nconst defaultCssConfig = {\r\n    duration: 400,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\n\r\nfunction setupAnimationOnElement() {\r\n    const $element = this.element;\r\n    const config = this.config;\r\n    setupPosition($element, config.from);\r\n    setupPosition($element, config.to);\r\n    this.configurator.setup($element, config);\r\n    $element.data(\"dxAnimData\", this);\r\n    if (fx.off) {\r\n        config.duration = 0;\r\n        config.delay = 0\r\n    }\r\n    this.strategy.initAnimation($element, config);\r\n    if (config.start) {\r\n        const element = getPublicElement($element);\r\n        config.start.apply(this, [element, config])\r\n    }\r\n}\r\nconst onElementAnimationComplete = function(animation) {\r\n    const $element = animation.element;\r\n    const config = animation.config;\r\n    $element.removeData(\"dxAnimData\");\r\n    if (config.complete) {\r\n        const element = getPublicElement($element);\r\n        config.complete.apply(this, [element, config])\r\n    }\r\n    animation.deferred.resolveWith(this, [$element, config])\r\n};\r\nconst startAnimationOnElement = function() {\r\n    const animation = this;\r\n    const $element = animation.element;\r\n    const config = animation.config;\r\n    animation.isStarted = true;\r\n    return animation.strategy.animate($element, config).done((function() {\r\n        onElementAnimationComplete(animation)\r\n    })).fail((function() {\r\n        animation.deferred.rejectWith(this, [$element, config])\r\n    }))\r\n};\r\nconst stopAnimationOnElement = function(jumpToEnd) {\r\n    const animation = this;\r\n    const $element = animation.element;\r\n    const config = animation.config;\r\n    clearTimeout(animation.startTimeout);\r\n    if (!animation.isStarted) {\r\n        animation.start()\r\n    }\r\n    animation.strategy.stop($element, config, jumpToEnd)\r\n};\r\nconst scopedRemoveEvent = addNamespace(removeEvent, \"dxFXStartAnimation\");\r\nconst subscribeToRemoveEvent = function(animation) {\r\n    eventsEngine.off(animation.element, scopedRemoveEvent);\r\n    eventsEngine.on(animation.element, scopedRemoveEvent, (function() {\r\n        fx.stop(animation.element)\r\n    }));\r\n    animation.deferred.always((function() {\r\n        eventsEngine.off(animation.element, scopedRemoveEvent)\r\n    }))\r\n};\r\nconst createAnimation = function(element, initialConfig) {\r\n    const defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\r\n    const config = extend(true, {}, defaultConfig, initialConfig);\r\n    const configurator = getAnimationConfigurator(config);\r\n    const strategy = getAnimationStrategy(config);\r\n    const animation = {\r\n        element: $(element),\r\n        config: config,\r\n        configurator: configurator,\r\n        strategy: strategy,\r\n        isSynchronous: strategy.isSynchronous,\r\n        setup: setupAnimationOnElement,\r\n        start: startAnimationOnElement,\r\n        stop: stopAnimationOnElement,\r\n        deferred: new Deferred\r\n    };\r\n    if (isFunction(configurator.validateConfig)) {\r\n        configurator.validateConfig(config)\r\n    }\r\n    subscribeToRemoveEvent(animation);\r\n    return animation\r\n};\r\nconst animate = function(element, config) {\r\n    const $element = $(element);\r\n    if (!$element.length) {\r\n        return (new Deferred).resolve().promise()\r\n    }\r\n    const animation = createAnimation($element, config);\r\n    pushInAnimationQueue($element, animation);\r\n    return animation.deferred.promise()\r\n};\r\n\r\nfunction pushInAnimationQueue($element, animation) {\r\n    const queueData = getAnimQueueData($element);\r\n    writeAnimQueueData($element, queueData);\r\n    queueData.push(animation);\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n}\r\n\r\nfunction getAnimQueueData($element) {\r\n    return $element.data(\"dxAnimQueue\") || []\r\n}\r\n\r\nfunction writeAnimQueueData($element, queueData) {\r\n    $element.data(\"dxAnimQueue\", queueData)\r\n}\r\nconst destroyAnimQueueData = function($element) {\r\n    $element.removeData(\"dxAnimQueue\")\r\n};\r\n\r\nfunction isAnimating($element) {\r\n    return !!$element.data(\"dxAnimData\")\r\n}\r\n\r\nfunction shiftFromAnimationQueue($element, queueData) {\r\n    queueData = getAnimQueueData($element);\r\n    if (!queueData.length) {\r\n        return\r\n    }\r\n    const animation = queueData.shift();\r\n    if (0 === queueData.length) {\r\n        destroyAnimQueueData($element)\r\n    }\r\n    executeAnimation(animation).done((function() {\r\n        if (!isAnimating($element)) {\r\n            shiftFromAnimationQueue($element)\r\n        }\r\n    }))\r\n}\r\n\r\nfunction executeAnimation(animation) {\r\n    animation.setup();\r\n    if (fx.off || animation.isSynchronous) {\r\n        animation.start()\r\n    } else {\r\n        animation.startTimeout = setTimeout((function() {\r\n            animation.start()\r\n        }))\r\n    }\r\n    return animation.deferred.promise()\r\n}\r\n\r\nfunction setupPosition($element, config) {\r\n    if (!config || !config.position) {\r\n        return\r\n    }\r\n    const win = $(window);\r\n    let left = 0;\r\n    let top = 0;\r\n    const position = positionUtils.calculate($element, config.position);\r\n    const offset = $element.offset();\r\n    const currentPosition = $element.position();\r\n    if (currentPosition.top > offset.top) {\r\n        top = win.scrollTop()\r\n    }\r\n    if (currentPosition.left > offset.left) {\r\n        left = win.scrollLeft()\r\n    }\r\n    extend(config, {\r\n        left: position.h.location - offset.left + currentPosition.left - left,\r\n        top: position.v.location - offset.top + currentPosition.top - top\r\n    });\r\n    delete config.position\r\n}\r\n\r\nfunction setProps($element, props) {\r\n    each(props, (function(key, value) {\r\n        try {\r\n            $element.css(key, isFunction(value) ? value() : value)\r\n        } catch (e) {}\r\n    }))\r\n}\r\nconst stop = function(element, jumpToEnd) {\r\n    const $element = $(element);\r\n    const queueData = getAnimQueueData($element);\r\n    each(queueData, (function(_, animation) {\r\n        animation.config.delay = 0;\r\n        animation.config.duration = 0;\r\n        animation.isSynchronous = true\r\n    }));\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n    const animation = $element.data(\"dxAnimData\");\r\n    if (animation) {\r\n        animation.stop(jumpToEnd)\r\n    }\r\n    $element.removeData(\"dxAnimData\");\r\n    destroyAnimQueueData($element)\r\n};\r\nconst fx = {\r\n    off: false,\r\n    animationTypes: animationConfigurators,\r\n    animate: animate,\r\n    createAnimation: createAnimation,\r\n    isAnimating: isAnimating,\r\n    stop: stop,\r\n    _simulatedTransitionEndDelay: 100\r\n};\r\nexport default fx;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}