{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/ui/collection/collection_widget.base.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { name as clickEventName } from \"../../../common/core/events/click\";\nimport { name as contextMenuEventName } from \"../../../common/core/events/contextmenu\";\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\nimport holdEvent from \"../../../common/core/events/hold\";\nimport pointerEvents from \"../../../common/core/events/pointer\";\nimport { addNamespace, isCommandKeyPressed } from \"../../../common/core/events/utils/index\";\nimport messageLocalization from \"../../../common/core/localization/message\";\nimport Action from \"../../../core/action\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport Guid from \"../../../core/guid\";\nimport $ from \"../../../core/renderer\";\nimport { BindableTemplate } from \"../../../core/templates/bindable_template\";\nimport { deferRenderer, ensureDefined } from \"../../../core/utils/common\";\nimport { compileGetter } from \"../../../core/utils/data\";\nimport { when } from \"../../../core/utils/deferred\";\nimport { extend } from \"../../../core/utils/extend\";\nimport { each } from \"../../../core/utils/iterator\";\nimport { getOuterHeight, getOuterWidth } from \"../../../core/utils/size\";\nimport { findTemplates } from \"../../../core/utils/template_manager\";\nimport { isDefined, isFunction, isPlainObject } from \"../../../core/utils/type\";\nimport DataHelperMixin from \"../../../data_helper\";\nimport { focusable } from \"../../../ui/widget/selectors\";\nimport { getPublicElement } from \"../../core/m_element\";\nimport Widget from \"../../core/widget/widget\";\nimport CollectionWidgetItem from \"../../ui/collection/item\";\nconst COLLECTION_CLASS = \"dx-collection\";\nconst ITEM_CLASS = \"dx-item\";\nconst CONTENT_CLASS_POSTFIX = \"-content\";\nconst ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\nconst ITEM_DATA_KEY = \"dxItemData\";\nconst ITEM_INDEX_KEY = \"dxItemIndex\";\nconst ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\nconst ITEMS_OPTIONS_NAME = \"dxItem\";\nconst ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\nconst EMPTY_COLLECTION = \"dx-empty-collection\";\nconst TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nconst ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\nconst ANONYMOUS_TEMPLATE_NAME = \"item\";\nconst FOCUS_UP = \"up\";\nconst FOCUS_DOWN = \"down\";\nconst FOCUS_LEFT = \"left\";\nconst FOCUS_RIGHT = \"right\";\nconst FOCUS_PAGE_UP = \"pageup\";\nconst FOCUS_PAGE_DOWN = \"pagedown\";\nconst FOCUS_LAST = \"last\";\nconst FOCUS_FIRST = \"first\";\nclass CollectionWidget extends Widget {\n  _supportedKeys() {\n    const move = (location, e) => {\n      if (!isCommandKeyPressed(e)) {\n        e.preventDefault();\n        e.stopPropagation();\n        this._moveFocus(location, e);\n      }\n    };\n    return _extends({}, super._supportedKeys(), {\n      space: e => {\n        e.preventDefault();\n        this._enterKeyHandler(e);\n      },\n      enter: this._enterKeyHandler,\n      leftArrow: move.bind(this, \"left\"),\n      rightArrow: move.bind(this, \"right\"),\n      upArrow: move.bind(this, \"up\"),\n      downArrow: move.bind(this, \"down\"),\n      pageUp: move.bind(this, \"up\"),\n      pageDown: move.bind(this, \"down\"),\n      home: move.bind(this, \"first\"),\n      end: move.bind(this, \"last\")\n    });\n  }\n  _getHandlerExtendedParams(e, $target) {\n    const params = extend({}, e, {\n      target: $target.get(0),\n      currentTarget: $target.get(0)\n    });\n    return params;\n  }\n  _enterKeyHandler(e) {\n    const {\n      focusedElement: focusedElement\n    } = this.option();\n    const $itemElement = $(focusedElement);\n    if (!$itemElement.length) {\n      return;\n    }\n    const itemData = this._getItemData($itemElement);\n    if (null !== itemData && void 0 !== itemData && itemData.onClick) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }\n    this._itemClickHandler(this._getHandlerExtendedParams(e, $itemElement));\n  }\n  _getDefaultOptions() {\n    return _extends({}, super._getDefaultOptions(), {\n      selectOnFocus: false,\n      loopItemFocus: true,\n      items: [],\n      itemTemplate: \"item\",\n      onItemRendered: null,\n      onItemClick: null,\n      onItemHold: null,\n      itemHoldTimeout: 750,\n      onItemContextMenu: null,\n      onFocusedItemChanged: null,\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      encodeNoDataText: false,\n      dataSource: null,\n      _dataController: null,\n      _itemAttributes: {},\n      itemTemplateProperty: \"template\",\n      focusedElement: null,\n      displayExpr: void 0,\n      disabledExpr: data => data ? data.disabled : void 0,\n      visibleExpr: data => data ? data.visible : void 0\n    });\n  }\n  _init() {\n    this._compileDisplayGetter();\n    this._initDataController();\n    super._init();\n    this._activeStateUnit = `.${ITEM_CLASS}`;\n    this._cleanRenderedItems();\n    this._refreshDataSource();\n  }\n  _compileDisplayGetter() {\n    const {\n      displayExpr: displayExpr\n    } = this.option();\n    this._displayGetter = displayExpr ? compileGetter(displayExpr) : void 0;\n  }\n  _initTemplates() {\n    this._initItemsFromMarkup();\n    this._initDefaultItemTemplate();\n    super._initTemplates();\n  }\n  _getAnonymousTemplateName() {\n    return \"item\";\n  }\n  _initDefaultItemTemplate() {\n    const fieldsMap = this._getFieldsMap();\n    this._templateManager.addDefaultTemplates({\n      item: new BindableTemplate(($container, data) => {\n        if (isPlainObject(data)) {\n          this._prepareDefaultItemTemplate(data, $container);\n        } else {\n          if (fieldsMap && isFunction(fieldsMap.text)) {\n            data = fieldsMap.text(data);\n          }\n          $container.text(String(ensureDefined(data, \"\")));\n        }\n      }, this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\n    });\n  }\n  _getBindableFields() {\n    return [\"text\", \"html\"];\n  }\n  _getFieldsMap() {\n    if (this._displayGetter) {\n      return {\n        text: this._displayGetter\n      };\n    }\n    return;\n  }\n  _prepareDefaultItemTemplate(data, $container) {\n    const {\n      text: text,\n      html: html\n    } = data;\n    if (isDefined(text)) {\n      $container.text(text);\n    }\n    if (isDefined(html)) {\n      $container.html(html);\n    }\n  }\n  _initItemsFromMarkup() {\n    const rawItems = findTemplates(this.$element(), \"dxItem\");\n    if (!rawItems.length || this.option(\"items\").length) {\n      return;\n    }\n    const items = rawItems.map(_ref => {\n      let {\n        element: element,\n        options: options\n      } = _ref;\n      const isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\n      if (isTemplateRequired) {\n        options.template = this._prepareItemTemplate(element);\n      } else {\n        $(element).remove();\n      }\n      return options;\n    });\n    this.option(\"items\", items);\n  }\n  _prepareItemTemplate(item) {\n    const templateId = `tmpl-${new Guid()}`;\n    const $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(\"dx-template-wrapper\");\n    this._saveTemplate(templateId, $template);\n    return templateId;\n  }\n  _dataSourceOptions() {\n    return {\n      paginate: false\n    };\n  }\n  _cleanRenderedItems() {\n    this._renderedItemsCount = 0;\n  }\n  _focusTarget() {\n    return this.$element();\n  }\n  _focusInHandler(e) {\n    super._focusInHandler(e);\n    if (!this._isFocusTarget(e.target)) {\n      return;\n    }\n    const $focusedElement = $(this.option(\"focusedElement\"));\n    if ($focusedElement.length) {\n      this._shouldSkipSelectOnFocus = true;\n      this._setFocusedItem($focusedElement);\n      this._shouldSkipSelectOnFocus = false;\n    } else {\n      const $activeItem = this._getActiveItem();\n      if ($activeItem.length) {\n        this.option(\"focusedElement\", getPublicElement($activeItem));\n      }\n    }\n  }\n  _focusOutHandler(e) {\n    super._focusOutHandler(e);\n    const {\n      focusedElement: focusedElement\n    } = this.option();\n    const $target = $(focusedElement);\n    this._updateFocusedItemState($target, false);\n  }\n  _findActiveTarget($element) {\n    return $element.find(this._activeStateUnit);\n  }\n  _getActiveItem(last) {\n    const {\n      focusedElement: focusedElement\n    } = this.option();\n    const $focusedElement = $(focusedElement);\n    if ($focusedElement.length) {\n      return $focusedElement;\n    }\n    return this._determineFocusedElement(last);\n  }\n  _determineFocusedElement(last) {\n    let index = this._getFocusedElementIndex();\n    const activeElements = this._getActiveElement();\n    const lastIndex = activeElements.length - 1;\n    if (index < 0) {\n      index = last ? lastIndex : 0;\n    }\n    return activeElements.eq(index);\n  }\n  _getFocusedElementIndex() {\n    return 0;\n  }\n  _moveFocus(location, e) {\n    const $items = this._getAvailableItems();\n    let $newTarget = $();\n    switch (location) {\n      case \"pageup\":\n      case \"up\":\n        $newTarget = this._prevItem($items);\n        break;\n      case \"pagedown\":\n      case \"down\":\n        $newTarget = this._nextItem($items);\n        break;\n      case \"right\":\n        $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\n        break;\n      case \"left\":\n        $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\n        break;\n      case \"first\":\n        $newTarget = $items.first();\n        break;\n      case \"last\":\n        $newTarget = $items.last();\n        break;\n      default:\n        return false;\n    }\n    if (0 !== $newTarget.length) {\n      this.option(\"focusedElement\", getPublicElement($newTarget));\n    }\n  }\n  _getVisibleItems($itemElements) {\n    const $items = $itemElements ?? this._itemElements();\n    return $items.filter(\":visible\");\n  }\n  _getAvailableItems($itemElements) {\n    return this._getVisibleItems($itemElements);\n  }\n  _prevItem($items) {\n    const $target = this._getActiveItem();\n    const targetIndex = $items.index($target);\n    const $last = $items.last();\n    let $item = $($items[targetIndex - 1]);\n    const loop = this.option(\"loopItemFocus\");\n    if (0 === $item.length && loop) {\n      $item = $last;\n    }\n    return $item;\n  }\n  _nextItem($items) {\n    const $target = this._getActiveItem(true);\n    const targetIndex = $items.index($target);\n    const $first = $items.first();\n    let $item = $($items[targetIndex + 1]);\n    const loop = this.option(\"loopItemFocus\");\n    if (0 === $item.length && loop) {\n      $item = $first;\n    }\n    return $item;\n  }\n  _selectFocusedItem($target) {\n    this.selectItem($target);\n  }\n  _updateFocusedItemState(target, isFocused, needCleanItemId) {\n    const $target = $(target);\n    if ($target.length) {\n      this._refreshActiveDescendant();\n      this._refreshItemId($target, needCleanItemId);\n      this._toggleFocusClass(isFocused, $target);\n    }\n    this._updateParentActiveDescendant();\n  }\n  _getElementClassToSkipRefreshId() {\n    return \"\";\n  }\n  _shouldSkipRefreshId(target) {\n    const elementClass = this._getElementClassToSkipRefreshId();\n    const shouldSkipRefreshId = $(target).hasClass(elementClass);\n    return shouldSkipRefreshId;\n  }\n  _refreshActiveDescendant($target) {\n    const {\n      focusedElement: focusedElement\n    } = this.option();\n    if (isDefined(focusedElement)) {\n      const shouldSetExistingId = this._shouldSkipRefreshId(focusedElement);\n      const id = shouldSetExistingId ? $(focusedElement).attr(\"id\") : this.getFocusedItemId();\n      this.setAria(\"activedescendant\", id, $target);\n      return;\n    }\n    this.setAria(\"activedescendant\", null, $target);\n  }\n  _refreshItemId($target, needCleanItemId) {\n    const {\n      focusedElement: focusedElement\n    } = this.option();\n    const shouldSkipRefreshId = this._shouldSkipRefreshId($target);\n    if (shouldSkipRefreshId) {\n      return;\n    }\n    if (!needCleanItemId && focusedElement) {\n      this.setAria(\"id\", this.getFocusedItemId(), $target);\n    } else {\n      this.setAria(\"id\", null, $target);\n    }\n  }\n  _isDisabled($element) {\n    return $element && \"true\" === $($element).attr(\"aria-disabled\");\n  }\n  _setFocusedItem($target) {\n    if (!$target || !$target.length) {\n      return;\n    }\n    this._updateFocusedItemState($target, true);\n    this.onFocusedItemChanged(this.getFocusedItemId());\n    const {\n      selectOnFocus: selectOnFocus\n    } = this.option();\n    const isTargetDisabled = this._isDisabled($target);\n    if (selectOnFocus && !isTargetDisabled && !this._shouldSkipSelectOnFocus) {\n      this._selectFocusedItem($target);\n    }\n  }\n  _findItemElementByItem(item) {\n    let result = $();\n    const itemDataKey = this._itemDataKey();\n    this.itemElements().each((index, itemElement) => {\n      const $item = $(itemElement);\n      if ($item.data(itemDataKey) === item) {\n        result = $item;\n        return false;\n      }\n      return true;\n    });\n    return result;\n  }\n  _getIndexByItem(item) {\n    const {\n      items: items\n    } = this.option();\n    return items.indexOf(item);\n  }\n  _itemOptionChanged(item, property, value, prevValue) {\n    const $item = this._findItemElementByItem(item);\n    if (!$item.length) {\n      return;\n    }\n    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\n      this._refreshItem($item, item);\n    }\n    const isDisabling = \"disabled\" === property && value;\n    if (isDisabling) {\n      this._resetItemFocus($item);\n    }\n  }\n  _resetItemFocus($item) {\n    if ($item.is(this.option(\"focusedElement\"))) {\n      this._resetFocusedElement();\n    }\n  }\n  _resetFocusedElement() {\n    this.option(\"focusedElement\", null);\n  }\n  _refreshItem($item, item) {\n    const itemData = this._getItemData($item);\n    const index = $item.data(this._itemIndexKey());\n    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);\n  }\n  _updateParentActiveDescendant() {}\n  _optionChanged(args) {\n    const {\n      name: name,\n      value: value,\n      previousValue: previousValue,\n      fullName: fullName\n    } = args;\n    if (\"items\" === name) {\n      const matches = fullName.match(ITEM_PATH_REGEX);\n      if (null !== matches && void 0 !== matches && matches.length) {\n        const property = matches[matches.length - 1];\n        const itemPath = fullName.replace(`.${property}`, \"\");\n        const item = this.option(itemPath);\n        this._itemOptionChanged(item, property, value, previousValue);\n        return;\n      }\n    }\n    switch (name) {\n      case \"items\":\n      case \"_itemAttributes\":\n      case \"itemTemplateProperty\":\n      case \"useItemTextAsTitle\":\n        this._cleanRenderedItems();\n        this._invalidate();\n        break;\n      case \"dataSource\":\n        this._refreshDataSource();\n        this._renderEmptyMessage();\n        break;\n      case \"noDataText\":\n      case \"encodeNoDataText\":\n        this._renderEmptyMessage();\n        break;\n      case \"itemTemplate\":\n      case \"visibleExpr\":\n      case \"disabledExpr\":\n        this._invalidate();\n        break;\n      case \"onItemRendered\":\n        this._createItemRenderAction();\n        break;\n      case \"onItemClick\":\n      case \"selectOnFocus\":\n      case \"loopItemFocus\":\n        break;\n      case \"onItemHold\":\n      case \"itemHoldTimeout\":\n        this._attachHoldEvent();\n        break;\n      case \"onItemContextMenu\":\n        this._attachContextMenuEvent();\n        break;\n      case \"onFocusedItemChanged\":\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n        break;\n      case \"focusedElement\":\n        this._updateFocusedItemState(previousValue, false, true);\n        this._setFocusedItem($(value));\n        break;\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n        this._initDefaultItemTemplate();\n        this._invalidate();\n        break;\n      default:\n        super._optionChanged(args);\n    }\n  }\n  _invalidate() {\n    this._resetFocusedElement();\n    super._invalidate();\n  }\n  _loadNextPage() {\n    this._expectNextPageLoading();\n    return this._dataController.loadNextPage();\n  }\n  _expectNextPageLoading() {\n    this._startIndexForAppendedItems = 0;\n  }\n  _expectLastItemLoading() {\n    this._startIndexForAppendedItems = -1;\n  }\n  _forgetNextPageLoading() {\n    this._startIndexForAppendedItems = null;\n  }\n  _dataSourceChangedHandler(newItems, e) {\n    const items = this.option(\"items\");\n    if (this._initialized && items && this._shouldAppendItems()) {\n      this._renderedItemsCount = items.length;\n      if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\n        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));\n      }\n      this._forgetNextPageLoading();\n      this._refreshContent();\n    } else {\n      this.option(\"items\", newItems.slice());\n    }\n  }\n  _refreshContent() {\n    this._prepareContent();\n    this._renderContent();\n  }\n  _dataSourceLoadErrorHandler() {\n    this._forgetNextPageLoading();\n    this.option(\"items\", this.option(\"items\"));\n  }\n  _shouldAppendItems() {\n    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();\n  }\n  _allowDynamicItemsAppend() {\n    return false;\n  }\n  _clean() {\n    this._cleanFocusState();\n    this._cleanItemContainer();\n    if (this._inkRipple) {\n      delete this._inkRipple;\n    }\n    this._resetActiveState();\n  }\n  _cleanItemContainer() {\n    $(this._itemContainer()).empty();\n  }\n  _dispose() {\n    super._dispose();\n    clearTimeout(this._itemFocusTimeout);\n  }\n  _refresh() {\n    this._cleanRenderedItems();\n    super._refresh();\n  }\n  _itemContainer(searchEnabled, previousSelectAllEnabled) {\n    return this.$element();\n  }\n  _itemClass() {\n    return ITEM_CLASS;\n  }\n  _itemContentClass() {\n    return `${this._itemClass()}-content`;\n  }\n  _itemResponseWaitClass() {\n    return \"dx-item-response-wait\";\n  }\n  _itemSelector() {\n    return `.${this._itemClass()}`;\n  }\n  _itemDataKey() {\n    return \"dxItemData\";\n  }\n  _itemIndexKey() {\n    return \"dxItemIndex\";\n  }\n  _itemElements() {\n    return this._itemContainer().find(this._itemSelector());\n  }\n  _initMarkup() {\n    super._initMarkup();\n    this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n    this.$element().addClass(\"dx-collection\");\n    this._prepareContent();\n  }\n  _prepareContent() {\n    deferRenderer(() => {\n      this._renderContentImpl();\n    })();\n  }\n  _renderContent() {\n    this._fireContentReadyAction();\n  }\n  _render() {\n    super._render();\n    this._attachClickEvent();\n    this._attachHoldEvent();\n    this._attachContextMenuEvent();\n  }\n  _getPointerEvent() {\n    return pointerEvents.down;\n  }\n  _attachClickEvent() {\n    const itemSelector = this._itemSelector();\n    const pointerEvent = this._getPointerEvent();\n    const clickEventNamespace = addNamespace(clickEventName, this.NAME);\n    const pointerEventNamespace = addNamespace(pointerEvent, this.NAME);\n    const pointerAction = new Action(args => {\n      const {\n        event: event\n      } = args;\n      this._itemPointerDownHandler(event);\n    });\n    eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\n    eventsEngine.off(this._itemContainer(), pointerEventNamespace, itemSelector);\n    eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, e => this._itemClickHandler(e));\n    eventsEngine.on(this._itemContainer(), pointerEventNamespace, itemSelector, e => {\n      pointerAction.execute({\n        element: $(e.target),\n        event: e\n      });\n    });\n  }\n  _itemClickHandler(e, args, config) {\n    this._itemDXEventHandler(e, \"onItemClick\", args, config);\n  }\n  _itemPointerDownHandler(e) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n    this._itemFocusHandler = () => {\n      clearTimeout(this._itemFocusTimeout);\n      this._itemFocusHandler = void 0;\n      if (e.isDefaultPrevented()) {\n        return;\n      }\n      const $target = $(e.target);\n      const $closestItem = $target.closest(this._itemElements());\n      const $closestFocusable = this._closestFocusable($target);\n      if ($closestItem.length && this._isFocusTarget(null === $closestFocusable || void 0 === $closestFocusable ? void 0 : $closestFocusable.get(0))) {\n        this._shouldSkipSelectOnFocus = true;\n        this.option(\"focusedElement\", getPublicElement($closestItem));\n        this._shouldSkipSelectOnFocus = false;\n      }\n    };\n    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));\n  }\n  _closestFocusable($target) {\n    if ($target.is(focusable)) {\n      return $target;\n    }\n    let $nextTarget = $target.parent();\n    while ($nextTarget.length && !domAdapter.isDocument($nextTarget.get(0)) && !domAdapter.isDocumentFragment($nextTarget.get(0))) {\n      if ($nextTarget.is(focusable)) {\n        return $nextTarget;\n      }\n      $nextTarget = $nextTarget.parent();\n    }\n    return;\n  }\n  _forcePointerDownFocus() {\n    if (this._itemFocusHandler) {\n      this._itemFocusHandler();\n    }\n  }\n  _updateFocusState(e, isFocused) {\n    super._updateFocusState(e, isFocused);\n    this._forcePointerDownFocus();\n  }\n  _attachHoldEvent() {\n    const $itemContainer = this._itemContainer();\n    const itemSelector = this._itemSelector();\n    const eventName = addNamespace(holdEvent.name, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, {\n      timeout: this._getHoldTimeout()\n    }, this._itemHoldHandler.bind(this));\n  }\n  _getHoldTimeout() {\n    const {\n      itemHoldTimeout: itemHoldTimeout\n    } = this.option();\n    return itemHoldTimeout;\n  }\n  _shouldFireHoldEvent() {\n    return this.hasActionSubscription(\"onItemHold\");\n  }\n  _itemHoldHandler(e) {\n    if (this._shouldFireHoldEvent()) {\n      this._itemDXEventHandler(e, \"onItemHold\");\n    } else {\n      e.cancel = true;\n    }\n  }\n  _attachContextMenuEvent() {\n    const $itemContainer = this._itemContainer();\n    const itemSelector = this._itemSelector();\n    const eventName = addNamespace(contextMenuEventName, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));\n  }\n  _shouldFireContextMenuEvent() {\n    return this.hasActionSubscription(\"onItemContextMenu\");\n  }\n  _itemContextMenuHandler(e) {\n    if (this._shouldFireContextMenuEvent()) {\n      this._itemDXEventHandler(e, \"onItemContextMenu\");\n    } else {\n      e.cancel = true;\n    }\n  }\n  _renderContentImpl() {\n    const {\n      items: items\n    } = this.option();\n    const itemsToRender = items ?? [];\n    if (this._renderedItemsCount) {\n      this._renderItems(itemsToRender.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(itemsToRender);\n    }\n  }\n  _renderItems(items) {\n    if (items.length) {\n      each(items, (index, itemData) => {\n        this._renderItem(this._renderedItemsCount + index, itemData);\n      });\n    }\n    this._renderEmptyMessage();\n  }\n  _getItemsContainer() {\n    return this._itemContainer();\n  }\n  _setAttributes($element) {\n    const attributes = _extends({}, this.option(\"_itemAttributes\"));\n    const {\n      class: customClassValue\n    } = attributes;\n    if (customClassValue) {\n      const currentClassValue = $element.get(0).className;\n      attributes.class = [currentClassValue, customClassValue].join(\" \");\n    }\n    $element.attr(attributes);\n  }\n  _renderItem(index, itemData, $container, $itemToReplace) {\n    const itemIndex = (null === index || void 0 === index ? void 0 : index.item) ?? index;\n    const $containerToRender = $container ?? this._getItemsContainer();\n    const $itemFrame = this._renderItemFrame(itemIndex, itemData, $containerToRender, $itemToReplace);\n    this._setElementData($itemFrame, itemData, itemIndex);\n    this._setAttributes($itemFrame);\n    this._attachItemClickEvent(itemData, $itemFrame);\n    const $itemContent = this._getItemContent($itemFrame);\n    const {\n      itemTemplate: itemTemplate\n    } = this.option();\n    const renderContentPromise = this._renderItemContent({\n      index: itemIndex,\n      itemData: itemData,\n      container: getPublicElement($itemContent),\n      contentClass: this._itemContentClass(),\n      defaultTemplateName: itemTemplate\n    });\n    when(renderContentPromise).done($content => {\n      this._postprocessRenderItem({\n        itemElement: $itemFrame,\n        itemContent: $content,\n        itemData: itemData,\n        itemIndex: itemIndex\n      });\n      this._executeItemRenderAction(index, itemData, getPublicElement($itemFrame));\n    });\n    return $itemFrame;\n  }\n  _getItemContent($itemFrame) {\n    const $itemContent = $itemFrame.find(\".dx-item-content-placeholder\");\n    $itemContent.removeClass(\"dx-item-content-placeholder\");\n    return $itemContent;\n  }\n  _attachItemClickEvent(itemData, $itemElement) {\n    if (!itemData || !itemData.onClick) {\n      return;\n    }\n    eventsEngine.on($itemElement, clickEventName, e => {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    });\n  }\n  _renderItemContent(args) {\n    const itemTemplateName = this._getItemTemplateName(args);\n    const itemTemplate = this._getTemplate(itemTemplateName);\n    this._addItemContentClasses(args);\n    const $templateResult = $(this._createItemByTemplate(itemTemplate, args));\n    if (!$templateResult.hasClass(\"dx-template-wrapper\")) {\n      return args.container;\n    }\n    return this._renderItemContentByNode(args, $templateResult);\n  }\n  _renderItemContentByNode(args, $node) {\n    $(args.container).replaceWith($node);\n    args.container = getPublicElement($node);\n    this._addItemContentClasses(args);\n    return $node;\n  }\n  _addItemContentClasses(args) {\n    const classes = [ITEM_CLASS + \"-content\", args.contentClass];\n    $(args.container).addClass(classes.join(\" \"));\n  }\n  _appendItemToContainer($container, $itemFrame, index) {\n    $itemFrame.appendTo($container);\n  }\n  _renderItemFrame(index, itemData, $container, $itemToReplace) {\n    const $itemFrame = $(\"<div>\");\n    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\n    if (null !== $itemToReplace && void 0 !== $itemToReplace && $itemToReplace.length) {\n      $itemToReplace.replaceWith($itemFrame);\n    } else {\n      this._appendItemToContainer.call(this, $container, $itemFrame, index);\n    }\n    if (this.option(\"useItemTextAsTitle\")) {\n      const displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\n      $itemFrame.attr(\"title\", displayValue);\n    }\n    return $itemFrame;\n  }\n  _itemOptions() {\n    return {\n      watchMethod: () => this.option(\"integrationOptions.watchMethod\"),\n      owner: this,\n      fieldGetter: field => {\n        const expr = this.option(`${field}Expr`);\n        const getter = compileGetter(expr);\n        return getter;\n      }\n    };\n  }\n  _postprocessRenderItem(args) {}\n  _executeItemRenderAction(index, itemData, itemElement) {\n    this._getItemRenderAction()({\n      itemElement: itemElement,\n      itemIndex: index,\n      itemData: itemData\n    });\n  }\n  _setElementData(element, data, index) {\n    element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index);\n  }\n  _createItemRenderAction() {\n    this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\n      element: this.element(),\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n    return this._itemRenderAction;\n  }\n  _getItemRenderAction() {\n    return this._itemRenderAction ?? this._createItemRenderAction();\n  }\n  _getItemTemplateName(args) {\n    const data = args.itemData;\n    const templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\n    const template = data && data[templateProperty];\n    return template || args.defaultTemplateName;\n  }\n  _createItemByTemplate(itemTemplate, renderArgs) {\n    const {\n      itemData: itemData,\n      container: container,\n      index: index\n    } = renderArgs;\n    return itemTemplate.render({\n      model: itemData,\n      container: container,\n      index: index,\n      onRendered: this._onItemTemplateRendered(itemTemplate, renderArgs)\n    });\n  }\n  _onItemTemplateRendered(itemTemplate, renderArgs) {\n    return () => {};\n  }\n  _emptyMessageContainer() {\n    return this._itemContainer();\n  }\n  _renderEmptyMessage(rootNodes) {\n    const items = rootNodes ?? this.option(\"items\");\n    const noDataText = this.option(\"noDataText\");\n    const hideNoData = !noDataText || items && items.length || this._dataController.isLoading();\n    if (hideNoData && this._$noData) {\n      this._$noData.remove();\n      this._$noData = null;\n      this.setAria(\"label\", void 0);\n    }\n    if (!hideNoData) {\n      this._$noData = this._$noData ?? $(\"<div>\").addClass(\"dx-empty-message\");\n      this._$noData.appendTo(this._emptyMessageContainer());\n      if (this.option(\"encodeNoDataText\")) {\n        this._$noData.text(noDataText);\n      } else {\n        this._$noData.html(noDataText);\n      }\n    }\n    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);\n  }\n  _itemDXEventHandler(dxEvent, handlerOptionName, actionArgs, actionConfig) {\n    this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\n      event: dxEvent\n    }), actionConfig);\n  }\n  _itemEventHandler(initiator, handlerOptionName, actionArgs, actionConfig) {\n    const action = this._createActionByOption(handlerOptionName, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  }\n  _itemEventHandlerByHandler(initiator, handler, actionArgs, actionConfig) {\n    const action = this._createAction(handler, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  }\n  _itemEventHandlerImpl(initiator, action, actionArgs) {\n    const $itemElement = this._closestItemElement($(initiator));\n    const args = extend({}, actionArgs);\n    return action(extend(actionArgs, this._extendActionArgs($itemElement), args));\n  }\n  _extendActionArgs($itemElement) {\n    return {\n      itemElement: getPublicElement($itemElement),\n      itemIndex: this._itemElements().index($itemElement),\n      itemData: this._getItemData($itemElement)\n    };\n  }\n  _closestItemElement($element) {\n    return $($element).closest(this._itemSelector());\n  }\n  _getItemData(itemElement) {\n    return $(itemElement).data(this._itemDataKey());\n  }\n  _getSummaryItemsSize(dimension, items, includeMargin) {\n    let result = 0;\n    if (items) {\n      each(items, (_, item) => {\n        if (\"width\" === dimension) {\n          result += getOuterWidth(item, includeMargin ?? false);\n        } else if (\"height\" === dimension) {\n          result += getOuterHeight(item, includeMargin ?? false);\n        }\n      });\n    }\n    return result;\n  }\n  getFocusedItemId() {\n    if (!this._focusedItemId) {\n      this._focusedItemId = `dx-${new Guid()}`;\n    }\n    return this._focusedItemId;\n  }\n  itemElements() {\n    return this._itemElements();\n  }\n  itemsContainer() {\n    return this._itemContainer();\n  }\n}\nCollectionWidget.include(DataHelperMixin);\nCollectionWidget.ItemClass = CollectionWidgetItem;\nexport default CollectionWidget;","map":{"version":3,"names":["_extends","name","clickEventName","contextMenuEventName","eventsEngine","holdEvent","pointerEvents","addNamespace","isCommandKeyPressed","messageLocalization","Action","domAdapter","Guid","$","BindableTemplate","deferRenderer","ensureDefined","compileGetter","when","extend","each","getOuterHeight","getOuterWidth","findTemplates","isDefined","isFunction","isPlainObject","DataHelperMixin","focusable","getPublicElement","Widget","CollectionWidgetItem","COLLECTION_CLASS","ITEM_CLASS","CONTENT_CLASS_POSTFIX","ITEM_CONTENT_PLACEHOLDER_CLASS","ITEM_DATA_KEY","ITEM_INDEX_KEY","ITEM_TEMPLATE_ID_PREFIX","ITEMS_OPTIONS_NAME","ITEM_RESPONSE_WAIT_CLASS","EMPTY_COLLECTION","TEMPLATE_WRAPPER_CLASS","ITEM_PATH_REGEX","ANONYMOUS_TEMPLATE_NAME","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","FOCUS_LAST","FOCUS_FIRST","CollectionWidget","_supportedKeys","move","location","e","preventDefault","stopPropagation","_moveFocus","space","_enterKeyHandler","enter","leftArrow","bind","rightArrow","upArrow","downArrow","pageUp","pageDown","home","end","_getHandlerExtendedParams","$target","params","target","get","currentTarget","focusedElement","option","$itemElement","length","itemData","_getItemData","onClick","_itemEventHandlerByHandler","event","_itemClickHandler","_getDefaultOptions","selectOnFocus","loopItemFocus","items","itemTemplate","onItemRendered","onItemClick","onItemHold","itemHoldTimeout","onItemContextMenu","onFocusedItemChanged","noDataText","format","encodeNoDataText","dataSource","_dataController","_itemAttributes","itemTemplateProperty","displayExpr","disabledExpr","data","disabled","visibleExpr","visible","_init","_compileDisplayGetter","_initDataController","_activeStateUnit","_cleanRenderedItems","_refreshDataSource","_displayGetter","_initTemplates","_initItemsFromMarkup","_initDefaultItemTemplate","_getAnonymousTemplateName","fieldsMap","_getFieldsMap","_templateManager","addDefaultTemplates","item","$container","_prepareDefaultItemTemplate","text","String","_getBindableFields","html","rawItems","$element","map","_ref","element","options","isTemplateRequired","test","innerHTML","template","_prepareItemTemplate","remove","templateId","$template","detach","clone","removeAttr","addClass","_saveTemplate","_dataSourceOptions","paginate","_renderedItemsCount","_focusTarget","_focusInHandler","_isFocusTarget","$focusedElement","_shouldSkipSelectOnFocus","_setFocusedItem","$activeItem","_getActiveItem","_focusOutHandler","_updateFocusedItemState","_findActiveTarget","find","last","_determineFocusedElement","index","_getFocusedElementIndex","activeElements","_getActiveElement","lastIndex","eq","$items","_getAvailableItems","$newTarget","_prevItem","_nextItem","first","_getVisibleItems","$itemElements","_itemElements","filter","targetIndex","$last","$item","loop","$first","_selectFocusedItem","selectItem","isFocused","needCleanItemId","_refreshActiveDescendant","_refreshItemId","_toggleFocusClass","_updateParentActiveDescendant","_getElementClassToSkipRefreshId","_shouldSkipRefreshId","elementClass","shouldSkipRefreshId","hasClass","shouldSetExistingId","id","attr","getFocusedItemId","setAria","_isDisabled","isTargetDisabled","_findItemElementByItem","result","itemDataKey","_itemDataKey","itemElements","itemElement","_getIndexByItem","indexOf","_itemOptionChanged","property","value","prevValue","constructor","ItemClass","getInstance","setDataField","_refreshItem","isDisabling","_resetItemFocus","is","_resetFocusedElement","_itemIndexKey","_renderItem","_optionChanged","args","previousValue","fullName","matches","match","itemPath","replace","_invalidate","_renderEmptyMessage","_createItemRenderAction","_attachHoldEvent","_attachContextMenuEvent","_createActionByOption","_loadNextPage","_expectNextPageLoading","loadNextPage","_startIndexForAppendedItems","_expectLastItemLoading","_forgetNextPageLoading","_dataSourceChangedHandler","newItems","_initialized","_shouldAppendItems","_isLastPage","concat","slice","_refreshContent","_prepareContent","_renderContent","_dataSourceLoadErrorHandler","_allowDynamicItemsAppend","_clean","_cleanFocusState","_cleanItemContainer","_inkRipple","_resetActiveState","_itemContainer","empty","_dispose","clearTimeout","_itemFocusTimeout","_refresh","searchEnabled","previousSelectAllEnabled","_itemClass","_itemContentClass","_itemResponseWaitClass","_itemSelector","_initMarkup","_renderContentImpl","_fireContentReadyAction","_render","_attachClickEvent","_getPointerEvent","down","itemSelector","pointerEvent","clickEventNamespace","NAME","pointerEventNamespace","pointerAction","_itemPointerDownHandler","off","on","execute","config","_itemDXEventHandler","_itemFocusHandler","isDefaultPrevented","$closestItem","closest","$closestFocusable","_closestFocusable","setTimeout","_forcePointerDownFocus","$nextTarget","parent","isDocument","isDocumentFragment","_updateFocusState","$itemContainer","eventName","timeout","_getHoldTimeout","_itemHoldHandler","_shouldFireHoldEvent","hasActionSubscription","cancel","_itemContextMenuHandler","_shouldFireContextMenuEvent","itemsToRender","_renderItems","_getItemsContainer","_setAttributes","attributes","class","customClassValue","currentClassValue","className","join","$itemToReplace","itemIndex","$containerToRender","$itemFrame","_renderItemFrame","_setElementData","_attachItemClickEvent","$itemContent","_getItemContent","renderContentPromise","_renderItemContent","container","contentClass","defaultTemplateName","done","$content","_postprocessRenderItem","itemContent","_executeItemRenderAction","removeClass","itemTemplateName","_getItemTemplateName","_getTemplate","_addItemContentClasses","$templateResult","_createItemByTemplate","_renderItemContentByNode","$node","replaceWith","classes","_appendItemToContainer","appendTo","_itemOptions","call","displayValue","watchMethod","owner","fieldGetter","field","expr","getter","_getItemRenderAction","_itemRenderAction","excludeValidators","category","templateProperty","renderArgs","render","model","onRendered","_onItemTemplateRendered","_emptyMessageContainer","rootNodes","hideNoData","isLoading","_$noData","toggleClass","dxEvent","handlerOptionName","actionArgs","actionConfig","_itemEventHandler","initiator","action","validatingTargetName","_itemEventHandlerImpl","handler","_createAction","_closestItemElement","_extendActionArgs","_getSummaryItemsSize","dimension","includeMargin","_","_focusedItemId","itemsContainer","include"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme/esm/__internal/ui/collection/collection_widget.base.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/ui/collection/collection_widget.base.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../../common/core/events/click\";\r\nimport {\r\n    name as contextMenuEventName\r\n} from \"../../../common/core/events/contextmenu\";\r\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\r\nimport holdEvent from \"../../../common/core/events/hold\";\r\nimport pointerEvents from \"../../../common/core/events/pointer\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed\r\n} from \"../../../common/core/events/utils/index\";\r\nimport messageLocalization from \"../../../common/core/localization/message\";\r\nimport Action from \"../../../core/action\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport Guid from \"../../../core/guid\";\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    BindableTemplate\r\n} from \"../../../core/templates/bindable_template\";\r\nimport {\r\n    deferRenderer,\r\n    ensureDefined\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    compileGetter\r\n} from \"../../../core/utils/data\";\r\nimport {\r\n    when\r\n} from \"../../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../../core/utils/iterator\";\r\nimport {\r\n    getOuterHeight,\r\n    getOuterWidth\r\n} from \"../../../core/utils/size\";\r\nimport {\r\n    findTemplates\r\n} from \"../../../core/utils/template_manager\";\r\nimport {\r\n    isDefined,\r\n    isFunction,\r\n    isPlainObject\r\n} from \"../../../core/utils/type\";\r\nimport DataHelperMixin from \"../../../data_helper\";\r\nimport {\r\n    focusable\r\n} from \"../../../ui/widget/selectors\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/m_element\";\r\nimport Widget from \"../../core/widget/widget\";\r\nimport CollectionWidgetItem from \"../../ui/collection/item\";\r\nconst COLLECTION_CLASS = \"dx-collection\";\r\nconst ITEM_CLASS = \"dx-item\";\r\nconst CONTENT_CLASS_POSTFIX = \"-content\";\r\nconst ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\r\nconst ITEM_DATA_KEY = \"dxItemData\";\r\nconst ITEM_INDEX_KEY = \"dxItemIndex\";\r\nconst ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\r\nconst ITEMS_OPTIONS_NAME = \"dxItem\";\r\nconst ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\r\nconst EMPTY_COLLECTION = \"dx-empty-collection\";\r\nconst TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nconst ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\r\nconst ANONYMOUS_TEMPLATE_NAME = \"item\";\r\nconst FOCUS_UP = \"up\";\r\nconst FOCUS_DOWN = \"down\";\r\nconst FOCUS_LEFT = \"left\";\r\nconst FOCUS_RIGHT = \"right\";\r\nconst FOCUS_PAGE_UP = \"pageup\";\r\nconst FOCUS_PAGE_DOWN = \"pagedown\";\r\nconst FOCUS_LAST = \"last\";\r\nconst FOCUS_FIRST = \"first\";\r\nclass CollectionWidget extends Widget {\r\n    _supportedKeys() {\r\n        const move = (location, e) => {\r\n            if (!isCommandKeyPressed(e)) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._moveFocus(location, e)\r\n            }\r\n        };\r\n        return _extends({}, super._supportedKeys(), {\r\n            space: e => {\r\n                e.preventDefault();\r\n                this._enterKeyHandler(e)\r\n            },\r\n            enter: this._enterKeyHandler,\r\n            leftArrow: move.bind(this, \"left\"),\r\n            rightArrow: move.bind(this, \"right\"),\r\n            upArrow: move.bind(this, \"up\"),\r\n            downArrow: move.bind(this, \"down\"),\r\n            pageUp: move.bind(this, \"up\"),\r\n            pageDown: move.bind(this, \"down\"),\r\n            home: move.bind(this, \"first\"),\r\n            end: move.bind(this, \"last\")\r\n        })\r\n    }\r\n    _getHandlerExtendedParams(e, $target) {\r\n        const params = extend({}, e, {\r\n            target: $target.get(0),\r\n            currentTarget: $target.get(0)\r\n        });\r\n        return params\r\n    }\r\n    _enterKeyHandler(e) {\r\n        const {\r\n            focusedElement: focusedElement\r\n        } = this.option();\r\n        const $itemElement = $(focusedElement);\r\n        if (!$itemElement.length) {\r\n            return\r\n        }\r\n        const itemData = this._getItemData($itemElement);\r\n        if (null !== itemData && void 0 !== itemData && itemData.onClick) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }\r\n        this._itemClickHandler(this._getHandlerExtendedParams(e, $itemElement))\r\n    }\r\n    _getDefaultOptions() {\r\n        return _extends({}, super._getDefaultOptions(), {\r\n            selectOnFocus: false,\r\n            loopItemFocus: true,\r\n            items: [],\r\n            itemTemplate: \"item\",\r\n            onItemRendered: null,\r\n            onItemClick: null,\r\n            onItemHold: null,\r\n            itemHoldTimeout: 750,\r\n            onItemContextMenu: null,\r\n            onFocusedItemChanged: null,\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            encodeNoDataText: false,\r\n            dataSource: null,\r\n            _dataController: null,\r\n            _itemAttributes: {},\r\n            itemTemplateProperty: \"template\",\r\n            focusedElement: null,\r\n            displayExpr: void 0,\r\n            disabledExpr: data => data ? data.disabled : void 0,\r\n            visibleExpr: data => data ? data.visible : void 0\r\n        })\r\n    }\r\n    _init() {\r\n        this._compileDisplayGetter();\r\n        this._initDataController();\r\n        super._init();\r\n        this._activeStateUnit = `.${ITEM_CLASS}`;\r\n        this._cleanRenderedItems();\r\n        this._refreshDataSource()\r\n    }\r\n    _compileDisplayGetter() {\r\n        const {\r\n            displayExpr: displayExpr\r\n        } = this.option();\r\n        this._displayGetter = displayExpr ? compileGetter(displayExpr) : void 0\r\n    }\r\n    _initTemplates() {\r\n        this._initItemsFromMarkup();\r\n        this._initDefaultItemTemplate();\r\n        super._initTemplates()\r\n    }\r\n    _getAnonymousTemplateName() {\r\n        return \"item\"\r\n    }\r\n    _initDefaultItemTemplate() {\r\n        const fieldsMap = this._getFieldsMap();\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new BindableTemplate((($container, data) => {\r\n                if (isPlainObject(data)) {\r\n                    this._prepareDefaultItemTemplate(data, $container)\r\n                } else {\r\n                    if (fieldsMap && isFunction(fieldsMap.text)) {\r\n                        data = fieldsMap.text(data)\r\n                    }\r\n                    $container.text(String(ensureDefined(data, \"\")))\r\n                }\r\n            }), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\r\n        })\r\n    }\r\n    _getBindableFields() {\r\n        return [\"text\", \"html\"]\r\n    }\r\n    _getFieldsMap() {\r\n        if (this._displayGetter) {\r\n            return {\r\n                text: this._displayGetter\r\n            }\r\n        }\r\n        return\r\n    }\r\n    _prepareDefaultItemTemplate(data, $container) {\r\n        const {\r\n            text: text,\r\n            html: html\r\n        } = data;\r\n        if (isDefined(text)) {\r\n            $container.text(text)\r\n        }\r\n        if (isDefined(html)) {\r\n            $container.html(html)\r\n        }\r\n    }\r\n    _initItemsFromMarkup() {\r\n        const rawItems = findTemplates(this.$element(), \"dxItem\");\r\n        if (!rawItems.length || this.option(\"items\").length) {\r\n            return\r\n        }\r\n        const items = rawItems.map((_ref => {\r\n            let {\r\n                element: element,\r\n                options: options\r\n            } = _ref;\r\n            const isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\r\n            if (isTemplateRequired) {\r\n                options.template = this._prepareItemTemplate(element)\r\n            } else {\r\n                $(element).remove()\r\n            }\r\n            return options\r\n        }));\r\n        this.option(\"items\", items)\r\n    }\r\n    _prepareItemTemplate(item) {\r\n        const templateId = `tmpl-${new Guid}`;\r\n        const $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(\"dx-template-wrapper\");\r\n        this._saveTemplate(templateId, $template);\r\n        return templateId\r\n    }\r\n    _dataSourceOptions() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    }\r\n    _cleanRenderedItems() {\r\n        this._renderedItemsCount = 0\r\n    }\r\n    _focusTarget() {\r\n        return this.$element()\r\n    }\r\n    _focusInHandler(e) {\r\n        super._focusInHandler(e);\r\n        if (!this._isFocusTarget(e.target)) {\r\n            return\r\n        }\r\n        const $focusedElement = $(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            this._shouldSkipSelectOnFocus = true;\r\n            this._setFocusedItem($focusedElement);\r\n            this._shouldSkipSelectOnFocus = false\r\n        } else {\r\n            const $activeItem = this._getActiveItem();\r\n            if ($activeItem.length) {\r\n                this.option(\"focusedElement\", getPublicElement($activeItem))\r\n            }\r\n        }\r\n    }\r\n    _focusOutHandler(e) {\r\n        super._focusOutHandler(e);\r\n        const {\r\n            focusedElement: focusedElement\r\n        } = this.option();\r\n        const $target = $(focusedElement);\r\n        this._updateFocusedItemState($target, false)\r\n    }\r\n    _findActiveTarget($element) {\r\n        return $element.find(this._activeStateUnit)\r\n    }\r\n    _getActiveItem(last) {\r\n        const {\r\n            focusedElement: focusedElement\r\n        } = this.option();\r\n        const $focusedElement = $(focusedElement);\r\n        if ($focusedElement.length) {\r\n            return $focusedElement\r\n        }\r\n        return this._determineFocusedElement(last)\r\n    }\r\n    _determineFocusedElement(last) {\r\n        let index = this._getFocusedElementIndex();\r\n        const activeElements = this._getActiveElement();\r\n        const lastIndex = activeElements.length - 1;\r\n        if (index < 0) {\r\n            index = last ? lastIndex : 0\r\n        }\r\n        return activeElements.eq(index)\r\n    }\r\n    _getFocusedElementIndex() {\r\n        return 0\r\n    }\r\n    _moveFocus(location, e) {\r\n        const $items = this._getAvailableItems();\r\n        let $newTarget = $();\r\n        switch (location) {\r\n            case \"pageup\":\r\n            case \"up\":\r\n                $newTarget = this._prevItem($items);\r\n                break;\r\n            case \"pagedown\":\r\n            case \"down\":\r\n                $newTarget = this._nextItem($items);\r\n                break;\r\n            case \"right\":\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\r\n                break;\r\n            case \"left\":\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\r\n                break;\r\n            case \"first\":\r\n                $newTarget = $items.first();\r\n                break;\r\n            case \"last\":\r\n                $newTarget = $items.last();\r\n                break;\r\n            default:\r\n                return false\r\n        }\r\n        if (0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", getPublicElement($newTarget))\r\n        }\r\n    }\r\n    _getVisibleItems($itemElements) {\r\n        const $items = $itemElements ?? this._itemElements();\r\n        return $items.filter(\":visible\")\r\n    }\r\n    _getAvailableItems($itemElements) {\r\n        return this._getVisibleItems($itemElements)\r\n    }\r\n    _prevItem($items) {\r\n        const $target = this._getActiveItem();\r\n        const targetIndex = $items.index($target);\r\n        const $last = $items.last();\r\n        let $item = $($items[targetIndex - 1]);\r\n        const loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $last\r\n        }\r\n        return $item\r\n    }\r\n    _nextItem($items) {\r\n        const $target = this._getActiveItem(true);\r\n        const targetIndex = $items.index($target);\r\n        const $first = $items.first();\r\n        let $item = $($items[targetIndex + 1]);\r\n        const loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $first\r\n        }\r\n        return $item\r\n    }\r\n    _selectFocusedItem($target) {\r\n        this.selectItem($target)\r\n    }\r\n    _updateFocusedItemState(target, isFocused, needCleanItemId) {\r\n        const $target = $(target);\r\n        if ($target.length) {\r\n            this._refreshActiveDescendant();\r\n            this._refreshItemId($target, needCleanItemId);\r\n            this._toggleFocusClass(isFocused, $target)\r\n        }\r\n        this._updateParentActiveDescendant()\r\n    }\r\n    _getElementClassToSkipRefreshId() {\r\n        return \"\"\r\n    }\r\n    _shouldSkipRefreshId(target) {\r\n        const elementClass = this._getElementClassToSkipRefreshId();\r\n        const shouldSkipRefreshId = $(target).hasClass(elementClass);\r\n        return shouldSkipRefreshId\r\n    }\r\n    _refreshActiveDescendant($target) {\r\n        const {\r\n            focusedElement: focusedElement\r\n        } = this.option();\r\n        if (isDefined(focusedElement)) {\r\n            const shouldSetExistingId = this._shouldSkipRefreshId(focusedElement);\r\n            const id = shouldSetExistingId ? $(focusedElement).attr(\"id\") : this.getFocusedItemId();\r\n            this.setAria(\"activedescendant\", id, $target);\r\n            return\r\n        }\r\n        this.setAria(\"activedescendant\", null, $target)\r\n    }\r\n    _refreshItemId($target, needCleanItemId) {\r\n        const {\r\n            focusedElement: focusedElement\r\n        } = this.option();\r\n        const shouldSkipRefreshId = this._shouldSkipRefreshId($target);\r\n        if (shouldSkipRefreshId) {\r\n            return\r\n        }\r\n        if (!needCleanItemId && focusedElement) {\r\n            this.setAria(\"id\", this.getFocusedItemId(), $target)\r\n        } else {\r\n            this.setAria(\"id\", null, $target)\r\n        }\r\n    }\r\n    _isDisabled($element) {\r\n        return $element && \"true\" === $($element).attr(\"aria-disabled\")\r\n    }\r\n    _setFocusedItem($target) {\r\n        if (!$target || !$target.length) {\r\n            return\r\n        }\r\n        this._updateFocusedItemState($target, true);\r\n        this.onFocusedItemChanged(this.getFocusedItemId());\r\n        const {\r\n            selectOnFocus: selectOnFocus\r\n        } = this.option();\r\n        const isTargetDisabled = this._isDisabled($target);\r\n        if (selectOnFocus && !isTargetDisabled && !this._shouldSkipSelectOnFocus) {\r\n            this._selectFocusedItem($target)\r\n        }\r\n    }\r\n    _findItemElementByItem(item) {\r\n        let result = $();\r\n        const itemDataKey = this._itemDataKey();\r\n        this.itemElements().each(((index, itemElement) => {\r\n            const $item = $(itemElement);\r\n            if ($item.data(itemDataKey) === item) {\r\n                result = $item;\r\n                return false\r\n            }\r\n            return true\r\n        }));\r\n        return result\r\n    }\r\n    _getIndexByItem(item) {\r\n        const {\r\n            items: items\r\n        } = this.option();\r\n        return items.indexOf(item)\r\n    }\r\n    _itemOptionChanged(item, property, value, prevValue) {\r\n        const $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\r\n            this._refreshItem($item, item)\r\n        }\r\n        const isDisabling = \"disabled\" === property && value;\r\n        if (isDisabling) {\r\n            this._resetItemFocus($item)\r\n        }\r\n    }\r\n    _resetItemFocus($item) {\r\n        if ($item.is(this.option(\"focusedElement\"))) {\r\n            this._resetFocusedElement()\r\n        }\r\n    }\r\n    _resetFocusedElement() {\r\n        this.option(\"focusedElement\", null)\r\n    }\r\n    _refreshItem($item, item) {\r\n        const itemData = this._getItemData($item);\r\n        const index = $item.data(this._itemIndexKey());\r\n        this._renderItem(this._renderedItemsCount + index, itemData, null, $item)\r\n    }\r\n    _updateParentActiveDescendant() {}\r\n    _optionChanged(args) {\r\n        const {\r\n            name: name,\r\n            value: value,\r\n            previousValue: previousValue,\r\n            fullName: fullName\r\n        } = args;\r\n        if (\"items\" === name) {\r\n            const matches = fullName.match(ITEM_PATH_REGEX);\r\n            if (null !== matches && void 0 !== matches && matches.length) {\r\n                const property = matches[matches.length - 1];\r\n                const itemPath = fullName.replace(`.${property}`, \"\");\r\n                const item = this.option(itemPath);\r\n                this._itemOptionChanged(item, property, value, previousValue);\r\n                return\r\n            }\r\n        }\r\n        switch (name) {\r\n            case \"items\":\r\n            case \"_itemAttributes\":\r\n            case \"itemTemplateProperty\":\r\n            case \"useItemTextAsTitle\":\r\n                this._cleanRenderedItems();\r\n                this._invalidate();\r\n                break;\r\n            case \"dataSource\":\r\n                this._refreshDataSource();\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"noDataText\":\r\n            case \"encodeNoDataText\":\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"itemTemplate\":\r\n            case \"visibleExpr\":\r\n            case \"disabledExpr\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onItemRendered\":\r\n                this._createItemRenderAction();\r\n                break;\r\n            case \"onItemClick\":\r\n            case \"selectOnFocus\":\r\n            case \"loopItemFocus\":\r\n                break;\r\n            case \"onItemHold\":\r\n            case \"itemHoldTimeout\":\r\n                this._attachHoldEvent();\r\n                break;\r\n            case \"onItemContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"onFocusedItemChanged\":\r\n                this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n                break;\r\n            case \"focusedElement\":\r\n                this._updateFocusedItemState(previousValue, false, true);\r\n                this._setFocusedItem($(value));\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._initDefaultItemTemplate();\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _invalidate() {\r\n        this._resetFocusedElement();\r\n        super._invalidate()\r\n    }\r\n    _loadNextPage() {\r\n        this._expectNextPageLoading();\r\n        return this._dataController.loadNextPage()\r\n    }\r\n    _expectNextPageLoading() {\r\n        this._startIndexForAppendedItems = 0\r\n    }\r\n    _expectLastItemLoading() {\r\n        this._startIndexForAppendedItems = -1\r\n    }\r\n    _forgetNextPageLoading() {\r\n        this._startIndexForAppendedItems = null\r\n    }\r\n    _dataSourceChangedHandler(newItems, e) {\r\n        const items = this.option(\"items\");\r\n        if (this._initialized && items && this._shouldAppendItems()) {\r\n            this._renderedItemsCount = items.length;\r\n            if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\r\n                this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems))\r\n            }\r\n            this._forgetNextPageLoading();\r\n            this._refreshContent()\r\n        } else {\r\n            this.option(\"items\", newItems.slice())\r\n        }\r\n    }\r\n    _refreshContent() {\r\n        this._prepareContent();\r\n        this._renderContent()\r\n    }\r\n    _dataSourceLoadErrorHandler() {\r\n        this._forgetNextPageLoading();\r\n        this.option(\"items\", this.option(\"items\"))\r\n    }\r\n    _shouldAppendItems() {\r\n        return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend()\r\n    }\r\n    _allowDynamicItemsAppend() {\r\n        return false\r\n    }\r\n    _clean() {\r\n        this._cleanFocusState();\r\n        this._cleanItemContainer();\r\n        if (this._inkRipple) {\r\n            delete this._inkRipple\r\n        }\r\n        this._resetActiveState()\r\n    }\r\n    _cleanItemContainer() {\r\n        $(this._itemContainer()).empty()\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        clearTimeout(this._itemFocusTimeout)\r\n    }\r\n    _refresh() {\r\n        this._cleanRenderedItems();\r\n        super._refresh()\r\n    }\r\n    _itemContainer(searchEnabled, previousSelectAllEnabled) {\r\n        return this.$element()\r\n    }\r\n    _itemClass() {\r\n        return ITEM_CLASS\r\n    }\r\n    _itemContentClass() {\r\n        return `${this._itemClass()}-content`\r\n    }\r\n    _itemResponseWaitClass() {\r\n        return \"dx-item-response-wait\"\r\n    }\r\n    _itemSelector() {\r\n        return `.${this._itemClass()}`\r\n    }\r\n    _itemDataKey() {\r\n        return \"dxItemData\"\r\n    }\r\n    _itemIndexKey() {\r\n        return \"dxItemIndex\"\r\n    }\r\n    _itemElements() {\r\n        return this._itemContainer().find(this._itemSelector())\r\n    }\r\n    _initMarkup() {\r\n        super._initMarkup();\r\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n        this.$element().addClass(\"dx-collection\");\r\n        this._prepareContent()\r\n    }\r\n    _prepareContent() {\r\n        deferRenderer((() => {\r\n            this._renderContentImpl()\r\n        }))()\r\n    }\r\n    _renderContent() {\r\n        this._fireContentReadyAction()\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._attachClickEvent();\r\n        this._attachHoldEvent();\r\n        this._attachContextMenuEvent()\r\n    }\r\n    _getPointerEvent() {\r\n        return pointerEvents.down\r\n    }\r\n    _attachClickEvent() {\r\n        const itemSelector = this._itemSelector();\r\n        const pointerEvent = this._getPointerEvent();\r\n        const clickEventNamespace = addNamespace(clickEventName, this.NAME);\r\n        const pointerEventNamespace = addNamespace(pointerEvent, this.NAME);\r\n        const pointerAction = new Action((args => {\r\n            const {\r\n                event: event\r\n            } = args;\r\n            this._itemPointerDownHandler(event)\r\n        }));\r\n        eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\r\n        eventsEngine.off(this._itemContainer(), pointerEventNamespace, itemSelector);\r\n        eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, (e => this._itemClickHandler(e)));\r\n        eventsEngine.on(this._itemContainer(), pointerEventNamespace, itemSelector, (e => {\r\n            pointerAction.execute({\r\n                element: $(e.target),\r\n                event: e\r\n            })\r\n        }))\r\n    }\r\n    _itemClickHandler(e, args, config) {\r\n        this._itemDXEventHandler(e, \"onItemClick\", args, config)\r\n    }\r\n    _itemPointerDownHandler(e) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._itemFocusHandler = () => {\r\n            clearTimeout(this._itemFocusTimeout);\r\n            this._itemFocusHandler = void 0;\r\n            if (e.isDefaultPrevented()) {\r\n                return\r\n            }\r\n            const $target = $(e.target);\r\n            const $closestItem = $target.closest(this._itemElements());\r\n            const $closestFocusable = this._closestFocusable($target);\r\n            if ($closestItem.length && this._isFocusTarget(null === $closestFocusable || void 0 === $closestFocusable ? void 0 : $closestFocusable.get(0))) {\r\n                this._shouldSkipSelectOnFocus = true;\r\n                this.option(\"focusedElement\", getPublicElement($closestItem));\r\n                this._shouldSkipSelectOnFocus = false\r\n            }\r\n        };\r\n        this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this))\r\n    }\r\n    _closestFocusable($target) {\r\n        if ($target.is(focusable)) {\r\n            return $target\r\n        }\r\n        let $nextTarget = $target.parent();\r\n        while ($nextTarget.length && !domAdapter.isDocument($nextTarget.get(0)) && !domAdapter.isDocumentFragment($nextTarget.get(0))) {\r\n            if ($nextTarget.is(focusable)) {\r\n                return $nextTarget\r\n            }\r\n            $nextTarget = $nextTarget.parent()\r\n        }\r\n        return\r\n    }\r\n    _forcePointerDownFocus() {\r\n        if (this._itemFocusHandler) {\r\n            this._itemFocusHandler()\r\n        }\r\n    }\r\n    _updateFocusState(e, isFocused) {\r\n        super._updateFocusState(e, isFocused);\r\n        this._forcePointerDownFocus()\r\n    }\r\n    _attachHoldEvent() {\r\n        const $itemContainer = this._itemContainer();\r\n        const itemSelector = this._itemSelector();\r\n        const eventName = addNamespace(holdEvent.name, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, {\r\n            timeout: this._getHoldTimeout()\r\n        }, this._itemHoldHandler.bind(this))\r\n    }\r\n    _getHoldTimeout() {\r\n        const {\r\n            itemHoldTimeout: itemHoldTimeout\r\n        } = this.option();\r\n        return itemHoldTimeout\r\n    }\r\n    _shouldFireHoldEvent() {\r\n        return this.hasActionSubscription(\"onItemHold\")\r\n    }\r\n    _itemHoldHandler(e) {\r\n        if (this._shouldFireHoldEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemHold\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    }\r\n    _attachContextMenuEvent() {\r\n        const $itemContainer = this._itemContainer();\r\n        const itemSelector = this._itemSelector();\r\n        const eventName = addNamespace(contextMenuEventName, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this))\r\n    }\r\n    _shouldFireContextMenuEvent() {\r\n        return this.hasActionSubscription(\"onItemContextMenu\")\r\n    }\r\n    _itemContextMenuHandler(e) {\r\n        if (this._shouldFireContextMenuEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemContextMenu\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    }\r\n    _renderContentImpl() {\r\n        const {\r\n            items: items\r\n        } = this.option();\r\n        const itemsToRender = items ?? [];\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(itemsToRender.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(itemsToRender)\r\n        }\r\n    }\r\n    _renderItems(items) {\r\n        if (items.length) {\r\n            each(items, ((index, itemData) => {\r\n                this._renderItem(this._renderedItemsCount + index, itemData)\r\n            }))\r\n        }\r\n        this._renderEmptyMessage()\r\n    }\r\n    _getItemsContainer() {\r\n        return this._itemContainer()\r\n    }\r\n    _setAttributes($element) {\r\n        const attributes = _extends({}, this.option(\"_itemAttributes\"));\r\n        const {\r\n            class: customClassValue\r\n        } = attributes;\r\n        if (customClassValue) {\r\n            const currentClassValue = $element.get(0).className;\r\n            attributes.class = [currentClassValue, customClassValue].join(\" \")\r\n        }\r\n        $element.attr(attributes)\r\n    }\r\n    _renderItem(index, itemData, $container, $itemToReplace) {\r\n        const itemIndex = (null === index || void 0 === index ? void 0 : index.item) ?? index;\r\n        const $containerToRender = $container ?? this._getItemsContainer();\r\n        const $itemFrame = this._renderItemFrame(itemIndex, itemData, $containerToRender, $itemToReplace);\r\n        this._setElementData($itemFrame, itemData, itemIndex);\r\n        this._setAttributes($itemFrame);\r\n        this._attachItemClickEvent(itemData, $itemFrame);\r\n        const $itemContent = this._getItemContent($itemFrame);\r\n        const {\r\n            itemTemplate: itemTemplate\r\n        } = this.option();\r\n        const renderContentPromise = this._renderItemContent({\r\n            index: itemIndex,\r\n            itemData: itemData,\r\n            container: getPublicElement($itemContent),\r\n            contentClass: this._itemContentClass(),\r\n            defaultTemplateName: itemTemplate\r\n        });\r\n        when(renderContentPromise).done(($content => {\r\n            this._postprocessRenderItem({\r\n                itemElement: $itemFrame,\r\n                itemContent: $content,\r\n                itemData: itemData,\r\n                itemIndex: itemIndex\r\n            });\r\n            this._executeItemRenderAction(index, itemData, getPublicElement($itemFrame))\r\n        }));\r\n        return $itemFrame\r\n    }\r\n    _getItemContent($itemFrame) {\r\n        const $itemContent = $itemFrame.find(\".dx-item-content-placeholder\");\r\n        $itemContent.removeClass(\"dx-item-content-placeholder\");\r\n        return $itemContent\r\n    }\r\n    _attachItemClickEvent(itemData, $itemElement) {\r\n        if (!itemData || !itemData.onClick) {\r\n            return\r\n        }\r\n        eventsEngine.on($itemElement, clickEventName, (e => {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }))\r\n    }\r\n    _renderItemContent(args) {\r\n        const itemTemplateName = this._getItemTemplateName(args);\r\n        const itemTemplate = this._getTemplate(itemTemplateName);\r\n        this._addItemContentClasses(args);\r\n        const $templateResult = $(this._createItemByTemplate(itemTemplate, args));\r\n        if (!$templateResult.hasClass(\"dx-template-wrapper\")) {\r\n            return args.container\r\n        }\r\n        return this._renderItemContentByNode(args, $templateResult)\r\n    }\r\n    _renderItemContentByNode(args, $node) {\r\n        $(args.container).replaceWith($node);\r\n        args.container = getPublicElement($node);\r\n        this._addItemContentClasses(args);\r\n        return $node\r\n    }\r\n    _addItemContentClasses(args) {\r\n        const classes = [ITEM_CLASS + \"-content\", args.contentClass];\r\n        $(args.container).addClass(classes.join(\" \"))\r\n    }\r\n    _appendItemToContainer($container, $itemFrame, index) {\r\n        $itemFrame.appendTo($container)\r\n    }\r\n    _renderItemFrame(index, itemData, $container, $itemToReplace) {\r\n        const $itemFrame = $(\"<div>\");\r\n        new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\r\n        if (null !== $itemToReplace && void 0 !== $itemToReplace && $itemToReplace.length) {\r\n            $itemToReplace.replaceWith($itemFrame)\r\n        } else {\r\n            this._appendItemToContainer.call(this, $container, $itemFrame, index)\r\n        }\r\n        if (this.option(\"useItemTextAsTitle\")) {\r\n            const displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\r\n            $itemFrame.attr(\"title\", displayValue)\r\n        }\r\n        return $itemFrame\r\n    }\r\n    _itemOptions() {\r\n        return {\r\n            watchMethod: () => this.option(\"integrationOptions.watchMethod\"),\r\n            owner: this,\r\n            fieldGetter: field => {\r\n                const expr = this.option(`${field}Expr`);\r\n                const getter = compileGetter(expr);\r\n                return getter\r\n            }\r\n        }\r\n    }\r\n    _postprocessRenderItem(args) {}\r\n    _executeItemRenderAction(index, itemData, itemElement) {\r\n        this._getItemRenderAction()({\r\n            itemElement: itemElement,\r\n            itemIndex: index,\r\n            itemData: itemData\r\n        })\r\n    }\r\n    _setElementData(element, data, index) {\r\n        element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index)\r\n    }\r\n    _createItemRenderAction() {\r\n        this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\r\n            element: this.element(),\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        });\r\n        return this._itemRenderAction\r\n    }\r\n    _getItemRenderAction() {\r\n        return this._itemRenderAction ?? this._createItemRenderAction()\r\n    }\r\n    _getItemTemplateName(args) {\r\n        const data = args.itemData;\r\n        const templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\r\n        const template = data && data[templateProperty];\r\n        return template || args.defaultTemplateName\r\n    }\r\n    _createItemByTemplate(itemTemplate, renderArgs) {\r\n        const {\r\n            itemData: itemData,\r\n            container: container,\r\n            index: index\r\n        } = renderArgs;\r\n        return itemTemplate.render({\r\n            model: itemData,\r\n            container: container,\r\n            index: index,\r\n            onRendered: this._onItemTemplateRendered(itemTemplate, renderArgs)\r\n        })\r\n    }\r\n    _onItemTemplateRendered(itemTemplate, renderArgs) {\r\n        return () => {}\r\n    }\r\n    _emptyMessageContainer() {\r\n        return this._itemContainer()\r\n    }\r\n    _renderEmptyMessage(rootNodes) {\r\n        const items = rootNodes ?? this.option(\"items\");\r\n        const noDataText = this.option(\"noDataText\");\r\n        const hideNoData = !noDataText || items && items.length || this._dataController.isLoading();\r\n        if (hideNoData && this._$noData) {\r\n            this._$noData.remove();\r\n            this._$noData = null;\r\n            this.setAria(\"label\", void 0)\r\n        }\r\n        if (!hideNoData) {\r\n            this._$noData = this._$noData ?? $(\"<div>\").addClass(\"dx-empty-message\");\r\n            this._$noData.appendTo(this._emptyMessageContainer());\r\n            if (this.option(\"encodeNoDataText\")) {\r\n                this._$noData.text(noDataText)\r\n            } else {\r\n                this._$noData.html(noDataText)\r\n            }\r\n        }\r\n        this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData)\r\n    }\r\n    _itemDXEventHandler(dxEvent, handlerOptionName, actionArgs, actionConfig) {\r\n        this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\r\n            event: dxEvent\r\n        }), actionConfig)\r\n    }\r\n    _itemEventHandler(initiator, handlerOptionName, actionArgs, actionConfig) {\r\n        const action = this._createActionByOption(handlerOptionName, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    }\r\n    _itemEventHandlerByHandler(initiator, handler, actionArgs, actionConfig) {\r\n        const action = this._createAction(handler, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    }\r\n    _itemEventHandlerImpl(initiator, action, actionArgs) {\r\n        const $itemElement = this._closestItemElement($(initiator));\r\n        const args = extend({}, actionArgs);\r\n        return action(extend(actionArgs, this._extendActionArgs($itemElement), args))\r\n    }\r\n    _extendActionArgs($itemElement) {\r\n        return {\r\n            itemElement: getPublicElement($itemElement),\r\n            itemIndex: this._itemElements().index($itemElement),\r\n            itemData: this._getItemData($itemElement)\r\n        }\r\n    }\r\n    _closestItemElement($element) {\r\n        return $($element).closest(this._itemSelector())\r\n    }\r\n    _getItemData(itemElement) {\r\n        return $(itemElement).data(this._itemDataKey())\r\n    }\r\n    _getSummaryItemsSize(dimension, items, includeMargin) {\r\n        let result = 0;\r\n        if (items) {\r\n            each(items, ((_, item) => {\r\n                if (\"width\" === dimension) {\r\n                    result += getOuterWidth(item, includeMargin ?? false)\r\n                } else if (\"height\" === dimension) {\r\n                    result += getOuterHeight(item, includeMargin ?? false)\r\n                }\r\n            }))\r\n        }\r\n        return result\r\n    }\r\n    getFocusedItemId() {\r\n        if (!this._focusedItemId) {\r\n            this._focusedItemId = `dx-${new Guid}`\r\n        }\r\n        return this._focusedItemId\r\n    }\r\n    itemElements() {\r\n        return this._itemElements()\r\n    }\r\n    itemsContainer() {\r\n        return this._itemContainer()\r\n    }\r\n}\r\nCollectionWidget.include(DataHelperMixin);\r\nCollectionWidget.ItemClass = CollectionWidgetItem;\r\nexport default CollectionWidget;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,QAAQ,MAAM,oCAAoC;AACzD,SACIC,IAAI,IAAIC,cAAc,QACnB,mCAAmC;AAC1C,SACID,IAAI,IAAIE,oBAAoB,QACzB,yCAAyC;AAChD,OAAOC,YAAY,MAAM,gDAAgD;AACzE,OAAOC,SAAS,MAAM,kCAAkC;AACxD,OAAOC,aAAa,MAAM,qCAAqC;AAC/D,SACIC,YAAY,EACZC,mBAAmB,QAChB,yCAAyC;AAChD,OAAOC,mBAAmB,MAAM,2CAA2C;AAC3E,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,UAAU,MAAM,2BAA2B;AAClD,OAAOC,IAAI,MAAM,oBAAoB;AACrC,OAAOC,CAAC,MAAM,wBAAwB;AACtC,SACIC,gBAAgB,QACb,2CAA2C;AAClD,SACIC,aAAa,EACbC,aAAa,QACV,4BAA4B;AACnC,SACIC,aAAa,QACV,0BAA0B;AACjC,SACIC,IAAI,QACD,8BAA8B;AACrC,SACIC,MAAM,QACH,4BAA4B;AACnC,SACIC,IAAI,QACD,8BAA8B;AACrC,SACIC,cAAc,EACdC,aAAa,QACV,0BAA0B;AACjC,SACIC,aAAa,QACV,sCAAsC;AAC7C,SACIC,SAAS,EACTC,UAAU,EACVC,aAAa,QACV,0BAA0B;AACjC,OAAOC,eAAe,MAAM,sBAAsB;AAClD,SACIC,SAAS,QACN,8BAA8B;AACrC,SACIC,gBAAgB,QACb,sBAAsB;AAC7B,OAAOC,MAAM,MAAM,0BAA0B;AAC7C,OAAOC,oBAAoB,MAAM,0BAA0B;AAC3D,MAAMC,gBAAgB,GAAG,eAAe;AACxC,MAAMC,UAAU,GAAG,SAAS;AAC5B,MAAMC,qBAAqB,GAAG,UAAU;AACxC,MAAMC,8BAA8B,GAAG,6BAA6B;AACpE,MAAMC,aAAa,GAAG,YAAY;AAClC,MAAMC,cAAc,GAAG,aAAa;AACpC,MAAMC,uBAAuB,GAAG,OAAO;AACvC,MAAMC,kBAAkB,GAAG,QAAQ;AACnC,MAAMC,wBAAwB,GAAG,uBAAuB;AACxD,MAAMC,gBAAgB,GAAG,qBAAqB;AAC9C,MAAMC,sBAAsB,GAAG,qBAAqB;AACpD,MAAMC,eAAe,GAAG,6BAA6B;AACrD,MAAMC,uBAAuB,GAAG,MAAM;AACtC,MAAMC,QAAQ,GAAG,IAAI;AACrB,MAAMC,UAAU,GAAG,MAAM;AACzB,MAAMC,UAAU,GAAG,MAAM;AACzB,MAAMC,WAAW,GAAG,OAAO;AAC3B,MAAMC,aAAa,GAAG,QAAQ;AAC9B,MAAMC,eAAe,GAAG,UAAU;AAClC,MAAMC,UAAU,GAAG,MAAM;AACzB,MAAMC,WAAW,GAAG,OAAO;AAC3B,MAAMC,gBAAgB,SAASvB,MAAM,CAAC;EAClCwB,cAAcA,CAAA,EAAG;IACb,MAAMC,IAAI,GAAGA,CAACC,QAAQ,EAAEC,CAAC,KAAK;MAC1B,IAAI,CAACjD,mBAAmB,CAACiD,CAAC,CAAC,EAAE;QACzBA,CAAC,CAACC,cAAc,CAAC,CAAC;QAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;QACnB,IAAI,CAACC,UAAU,CAACJ,QAAQ,EAAEC,CAAC,CAAC;MAChC;IACJ,CAAC;IACD,OAAOzD,QAAQ,CAAC,CAAC,CAAC,EAAE,KAAK,CAACsD,cAAc,CAAC,CAAC,EAAE;MACxCO,KAAK,EAAEJ,CAAC,IAAI;QACRA,CAAC,CAACC,cAAc,CAAC,CAAC;QAClB,IAAI,CAACI,gBAAgB,CAACL,CAAC,CAAC;MAC5B,CAAC;MACDM,KAAK,EAAE,IAAI,CAACD,gBAAgB;MAC5BE,SAAS,EAAET,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC;MAClCC,UAAU,EAAEX,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC;MACpCE,OAAO,EAAEZ,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;MAC9BG,SAAS,EAAEb,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC;MAClCI,MAAM,EAAEd,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;MAC7BK,QAAQ,EAAEf,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC;MACjCM,IAAI,EAAEhB,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC;MAC9BO,GAAG,EAAEjB,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,MAAM;IAC/B,CAAC,CAAC;EACN;EACAQ,yBAAyBA,CAAChB,CAAC,EAAEiB,OAAO,EAAE;IAClC,MAAMC,MAAM,GAAGxD,MAAM,CAAC,CAAC,CAAC,EAAEsC,CAAC,EAAE;MACzBmB,MAAM,EAAEF,OAAO,CAACG,GAAG,CAAC,CAAC,CAAC;MACtBC,aAAa,EAAEJ,OAAO,CAACG,GAAG,CAAC,CAAC;IAChC,CAAC,CAAC;IACF,OAAOF,MAAM;EACjB;EACAb,gBAAgBA,CAACL,CAAC,EAAE;IAChB,MAAM;MACFsB,cAAc,EAAEA;IACpB,CAAC,GAAG,IAAI,CAACC,MAAM,CAAC,CAAC;IACjB,MAAMC,YAAY,GAAGpE,CAAC,CAACkE,cAAc,CAAC;IACtC,IAAI,CAACE,YAAY,CAACC,MAAM,EAAE;MACtB;IACJ;IACA,MAAMC,QAAQ,GAAG,IAAI,CAACC,YAAY,CAACH,YAAY,CAAC;IAChD,IAAI,IAAI,KAAKE,QAAQ,IAAI,KAAK,CAAC,KAAKA,QAAQ,IAAIA,QAAQ,CAACE,OAAO,EAAE;MAC9D,IAAI,CAACC,0BAA0B,CAACL,YAAY,EAAEE,QAAQ,CAACE,OAAO,EAAE;QAC5DE,KAAK,EAAE9B;MACX,CAAC,CAAC;IACN;IACA,IAAI,CAAC+B,iBAAiB,CAAC,IAAI,CAACf,yBAAyB,CAAChB,CAAC,EAAEwB,YAAY,CAAC,CAAC;EAC3E;EACAQ,kBAAkBA,CAAA,EAAG;IACjB,OAAOzF,QAAQ,CAAC,CAAC,CAAC,EAAE,KAAK,CAACyF,kBAAkB,CAAC,CAAC,EAAE;MAC5CC,aAAa,EAAE,KAAK;MACpBC,aAAa,EAAE,IAAI;MACnBC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,MAAM;MACpBC,cAAc,EAAE,IAAI;MACpBC,WAAW,EAAE,IAAI;MACjBC,UAAU,EAAE,IAAI;MAChBC,eAAe,EAAE,GAAG;MACpBC,iBAAiB,EAAE,IAAI;MACvBC,oBAAoB,EAAE,IAAI;MAC1BC,UAAU,EAAE3F,mBAAmB,CAAC4F,MAAM,CAAC,+BAA+B,CAAC;MACvEC,gBAAgB,EAAE,KAAK;MACvBC,UAAU,EAAE,IAAI;MAChBC,eAAe,EAAE,IAAI;MACrBC,eAAe,EAAE,CAAC,CAAC;MACnBC,oBAAoB,EAAE,UAAU;MAChC3B,cAAc,EAAE,IAAI;MACpB4B,WAAW,EAAE,KAAK,CAAC;MACnBC,YAAY,EAAEC,IAAI,IAAIA,IAAI,GAAGA,IAAI,CAACC,QAAQ,GAAG,KAAK,CAAC;MACnDC,WAAW,EAAEF,IAAI,IAAIA,IAAI,GAAGA,IAAI,CAACG,OAAO,GAAG,KAAK;IACpD,CAAC,CAAC;EACN;EACAC,KAAKA,CAAA,EAAG;IACJ,IAAI,CAACC,qBAAqB,CAAC,CAAC;IAC5B,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC1B,KAAK,CAACF,KAAK,CAAC,CAAC;IACb,IAAI,CAACG,gBAAgB,GAAG,IAAInF,UAAU,EAAE;IACxC,IAAI,CAACoF,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAACC,kBAAkB,CAAC,CAAC;EAC7B;EACAJ,qBAAqBA,CAAA,EAAG;IACpB,MAAM;MACFP,WAAW,EAAEA;IACjB,CAAC,GAAG,IAAI,CAAC3B,MAAM,CAAC,CAAC;IACjB,IAAI,CAACuC,cAAc,GAAGZ,WAAW,GAAG1F,aAAa,CAAC0F,WAAW,CAAC,GAAG,KAAK,CAAC;EAC3E;EACAa,cAAcA,CAAA,EAAG;IACb,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACC,wBAAwB,CAAC,CAAC;IAC/B,KAAK,CAACF,cAAc,CAAC,CAAC;EAC1B;EACAG,yBAAyBA,CAAA,EAAG;IACxB,OAAO,MAAM;EACjB;EACAD,wBAAwBA,CAAA,EAAG;IACvB,MAAME,SAAS,GAAG,IAAI,CAACC,aAAa,CAAC,CAAC;IACtC,IAAI,CAACC,gBAAgB,CAACC,mBAAmB,CAAC;MACtCC,IAAI,EAAE,IAAIlH,gBAAgB,CAAE,CAACmH,UAAU,EAAEpB,IAAI,KAAK;QAC9C,IAAInF,aAAa,CAACmF,IAAI,CAAC,EAAE;UACrB,IAAI,CAACqB,2BAA2B,CAACrB,IAAI,EAAEoB,UAAU,CAAC;QACtD,CAAC,MAAM;UACH,IAAIL,SAAS,IAAInG,UAAU,CAACmG,SAAS,CAACO,IAAI,CAAC,EAAE;YACzCtB,IAAI,GAAGe,SAAS,CAACO,IAAI,CAACtB,IAAI,CAAC;UAC/B;UACAoB,UAAU,CAACE,IAAI,CAACC,MAAM,CAACpH,aAAa,CAAC6F,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;QACpD;MACJ,CAAC,EAAG,IAAI,CAACwB,kBAAkB,CAAC,CAAC,EAAE,IAAI,CAACrD,MAAM,CAAC,gCAAgC,CAAC,EAAE4C,SAAS;IAC3F,CAAC,CAAC;EACN;EACAS,kBAAkBA,CAAA,EAAG;IACjB,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC;EAC3B;EACAR,aAAaA,CAAA,EAAG;IACZ,IAAI,IAAI,CAACN,cAAc,EAAE;MACrB,OAAO;QACHY,IAAI,EAAE,IAAI,CAACZ;MACf,CAAC;IACL;IACA;EACJ;EACAW,2BAA2BA,CAACrB,IAAI,EAAEoB,UAAU,EAAE;IAC1C,MAAM;MACFE,IAAI,EAAEA,IAAI;MACVG,IAAI,EAAEA;IACV,CAAC,GAAGzB,IAAI;IACR,IAAIrF,SAAS,CAAC2G,IAAI,CAAC,EAAE;MACjBF,UAAU,CAACE,IAAI,CAACA,IAAI,CAAC;IACzB;IACA,IAAI3G,SAAS,CAAC8G,IAAI,CAAC,EAAE;MACjBL,UAAU,CAACK,IAAI,CAACA,IAAI,CAAC;IACzB;EACJ;EACAb,oBAAoBA,CAAA,EAAG;IACnB,MAAMc,QAAQ,GAAGhH,aAAa,CAAC,IAAI,CAACiH,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC;IACzD,IAAI,CAACD,QAAQ,CAACrD,MAAM,IAAI,IAAI,CAACF,MAAM,CAAC,OAAO,CAAC,CAACE,MAAM,EAAE;MACjD;IACJ;IACA,MAAMU,KAAK,GAAG2C,QAAQ,CAACE,GAAG,CAAEC,IAAI,IAAI;MAChC,IAAI;QACAC,OAAO,EAAEA,OAAO;QAChBC,OAAO,EAAEA;MACb,CAAC,GAAGF,IAAI;MACR,MAAMG,kBAAkB,GAAG,IAAI,CAACC,IAAI,CAACH,OAAO,CAACI,SAAS,CAAC,IAAI,CAACH,OAAO,CAACI,QAAQ;MAC5E,IAAIH,kBAAkB,EAAE;QACpBD,OAAO,CAACI,QAAQ,GAAG,IAAI,CAACC,oBAAoB,CAACN,OAAO,CAAC;MACzD,CAAC,MAAM;QACH9H,CAAC,CAAC8H,OAAO,CAAC,CAACO,MAAM,CAAC,CAAC;MACvB;MACA,OAAON,OAAO;IAClB,CAAE,CAAC;IACH,IAAI,CAAC5D,MAAM,CAAC,OAAO,EAAEY,KAAK,CAAC;EAC/B;EACAqD,oBAAoBA,CAACjB,IAAI,EAAE;IACvB,MAAMmB,UAAU,GAAG,QAAQ,IAAIvI,IAAI,CAAD,CAAC,EAAE;IACrC,MAAMwI,SAAS,GAAGvI,CAAC,CAACmH,IAAI,CAAC,CAACqB,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAACC,UAAU,CAAC,cAAc,CAAC,CAACC,QAAQ,CAAC,qBAAqB,CAAC;IACrG,IAAI,CAACC,aAAa,CAACN,UAAU,EAAEC,SAAS,CAAC;IACzC,OAAOD,UAAU;EACrB;EACAO,kBAAkBA,CAAA,EAAG;IACjB,OAAO;MACHC,QAAQ,EAAE;IACd,CAAC;EACL;EACAtC,mBAAmBA,CAAA,EAAG;IAClB,IAAI,CAACuC,mBAAmB,GAAG,CAAC;EAChC;EACAC,YAAYA,CAAA,EAAG;IACX,OAAO,IAAI,CAACrB,QAAQ,CAAC,CAAC;EAC1B;EACAsB,eAAeA,CAACrG,CAAC,EAAE;IACf,KAAK,CAACqG,eAAe,CAACrG,CAAC,CAAC;IACxB,IAAI,CAAC,IAAI,CAACsG,cAAc,CAACtG,CAAC,CAACmB,MAAM,CAAC,EAAE;MAChC;IACJ;IACA,MAAMoF,eAAe,GAAGnJ,CAAC,CAAC,IAAI,CAACmE,MAAM,CAAC,gBAAgB,CAAC,CAAC;IACxD,IAAIgF,eAAe,CAAC9E,MAAM,EAAE;MACxB,IAAI,CAAC+E,wBAAwB,GAAG,IAAI;MACpC,IAAI,CAACC,eAAe,CAACF,eAAe,CAAC;MACrC,IAAI,CAACC,wBAAwB,GAAG,KAAK;IACzC,CAAC,MAAM;MACH,MAAME,WAAW,GAAG,IAAI,CAACC,cAAc,CAAC,CAAC;MACzC,IAAID,WAAW,CAACjF,MAAM,EAAE;QACpB,IAAI,CAACF,MAAM,CAAC,gBAAgB,EAAEnD,gBAAgB,CAACsI,WAAW,CAAC,CAAC;MAChE;IACJ;EACJ;EACAE,gBAAgBA,CAAC5G,CAAC,EAAE;IAChB,KAAK,CAAC4G,gBAAgB,CAAC5G,CAAC,CAAC;IACzB,MAAM;MACFsB,cAAc,EAAEA;IACpB,CAAC,GAAG,IAAI,CAACC,MAAM,CAAC,CAAC;IACjB,MAAMN,OAAO,GAAG7D,CAAC,CAACkE,cAAc,CAAC;IACjC,IAAI,CAACuF,uBAAuB,CAAC5F,OAAO,EAAE,KAAK,CAAC;EAChD;EACA6F,iBAAiBA,CAAC/B,QAAQ,EAAE;IACxB,OAAOA,QAAQ,CAACgC,IAAI,CAAC,IAAI,CAACpD,gBAAgB,CAAC;EAC/C;EACAgD,cAAcA,CAACK,IAAI,EAAE;IACjB,MAAM;MACF1F,cAAc,EAAEA;IACpB,CAAC,GAAG,IAAI,CAACC,MAAM,CAAC,CAAC;IACjB,MAAMgF,eAAe,GAAGnJ,CAAC,CAACkE,cAAc,CAAC;IACzC,IAAIiF,eAAe,CAAC9E,MAAM,EAAE;MACxB,OAAO8E,eAAe;IAC1B;IACA,OAAO,IAAI,CAACU,wBAAwB,CAACD,IAAI,CAAC;EAC9C;EACAC,wBAAwBA,CAACD,IAAI,EAAE;IAC3B,IAAIE,KAAK,GAAG,IAAI,CAACC,uBAAuB,CAAC,CAAC;IAC1C,MAAMC,cAAc,GAAG,IAAI,CAACC,iBAAiB,CAAC,CAAC;IAC/C,MAAMC,SAAS,GAAGF,cAAc,CAAC3F,MAAM,GAAG,CAAC;IAC3C,IAAIyF,KAAK,GAAG,CAAC,EAAE;MACXA,KAAK,GAAGF,IAAI,GAAGM,SAAS,GAAG,CAAC;IAChC;IACA,OAAOF,cAAc,CAACG,EAAE,CAACL,KAAK,CAAC;EACnC;EACAC,uBAAuBA,CAAA,EAAG;IACtB,OAAO,CAAC;EACZ;EACAhH,UAAUA,CAACJ,QAAQ,EAAEC,CAAC,EAAE;IACpB,MAAMwH,MAAM,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACxC,IAAIC,UAAU,GAAGtK,CAAC,CAAC,CAAC;IACpB,QAAQ2C,QAAQ;MACZ,KAAK,QAAQ;MACb,KAAK,IAAI;QACL2H,UAAU,GAAG,IAAI,CAACC,SAAS,CAACH,MAAM,CAAC;QACnC;MACJ,KAAK,UAAU;MACf,KAAK,MAAM;QACPE,UAAU,GAAG,IAAI,CAACE,SAAS,CAACJ,MAAM,CAAC;QACnC;MACJ,KAAK,OAAO;QACRE,UAAU,GAAG,IAAI,CAACnG,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,CAACoG,SAAS,CAACH,MAAM,CAAC,GAAG,IAAI,CAACI,SAAS,CAACJ,MAAM,CAAC;QACxF;MACJ,KAAK,MAAM;QACPE,UAAU,GAAG,IAAI,CAACnG,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,CAACqG,SAAS,CAACJ,MAAM,CAAC,GAAG,IAAI,CAACG,SAAS,CAACH,MAAM,CAAC;QACxF;MACJ,KAAK,OAAO;QACRE,UAAU,GAAGF,MAAM,CAACK,KAAK,CAAC,CAAC;QAC3B;MACJ,KAAK,MAAM;QACPH,UAAU,GAAGF,MAAM,CAACR,IAAI,CAAC,CAAC;QAC1B;MACJ;QACI,OAAO,KAAK;IACpB;IACA,IAAI,CAAC,KAAKU,UAAU,CAACjG,MAAM,EAAE;MACzB,IAAI,CAACF,MAAM,CAAC,gBAAgB,EAAEnD,gBAAgB,CAACsJ,UAAU,CAAC,CAAC;IAC/D;EACJ;EACAI,gBAAgBA,CAACC,aAAa,EAAE;IAC5B,MAAMP,MAAM,GAAGO,aAAa,IAAI,IAAI,CAACC,aAAa,CAAC,CAAC;IACpD,OAAOR,MAAM,CAACS,MAAM,CAAC,UAAU,CAAC;EACpC;EACAR,kBAAkBA,CAACM,aAAa,EAAE;IAC9B,OAAO,IAAI,CAACD,gBAAgB,CAACC,aAAa,CAAC;EAC/C;EACAJ,SAASA,CAACH,MAAM,EAAE;IACd,MAAMvG,OAAO,GAAG,IAAI,CAAC0F,cAAc,CAAC,CAAC;IACrC,MAAMuB,WAAW,GAAGV,MAAM,CAACN,KAAK,CAACjG,OAAO,CAAC;IACzC,MAAMkH,KAAK,GAAGX,MAAM,CAACR,IAAI,CAAC,CAAC;IAC3B,IAAIoB,KAAK,GAAGhL,CAAC,CAACoK,MAAM,CAACU,WAAW,GAAG,CAAC,CAAC,CAAC;IACtC,MAAMG,IAAI,GAAG,IAAI,CAAC9G,MAAM,CAAC,eAAe,CAAC;IACzC,IAAI,CAAC,KAAK6G,KAAK,CAAC3G,MAAM,IAAI4G,IAAI,EAAE;MAC5BD,KAAK,GAAGD,KAAK;IACjB;IACA,OAAOC,KAAK;EAChB;EACAR,SAASA,CAACJ,MAAM,EAAE;IACd,MAAMvG,OAAO,GAAG,IAAI,CAAC0F,cAAc,CAAC,IAAI,CAAC;IACzC,MAAMuB,WAAW,GAAGV,MAAM,CAACN,KAAK,CAACjG,OAAO,CAAC;IACzC,MAAMqH,MAAM,GAAGd,MAAM,CAACK,KAAK,CAAC,CAAC;IAC7B,IAAIO,KAAK,GAAGhL,CAAC,CAACoK,MAAM,CAACU,WAAW,GAAG,CAAC,CAAC,CAAC;IACtC,MAAMG,IAAI,GAAG,IAAI,CAAC9G,MAAM,CAAC,eAAe,CAAC;IACzC,IAAI,CAAC,KAAK6G,KAAK,CAAC3G,MAAM,IAAI4G,IAAI,EAAE;MAC5BD,KAAK,GAAGE,MAAM;IAClB;IACA,OAAOF,KAAK;EAChB;EACAG,kBAAkBA,CAACtH,OAAO,EAAE;IACxB,IAAI,CAACuH,UAAU,CAACvH,OAAO,CAAC;EAC5B;EACA4F,uBAAuBA,CAAC1F,MAAM,EAAEsH,SAAS,EAAEC,eAAe,EAAE;IACxD,MAAMzH,OAAO,GAAG7D,CAAC,CAAC+D,MAAM,CAAC;IACzB,IAAIF,OAAO,CAACQ,MAAM,EAAE;MAChB,IAAI,CAACkH,wBAAwB,CAAC,CAAC;MAC/B,IAAI,CAACC,cAAc,CAAC3H,OAAO,EAAEyH,eAAe,CAAC;MAC7C,IAAI,CAACG,iBAAiB,CAACJ,SAAS,EAAExH,OAAO,CAAC;IAC9C;IACA,IAAI,CAAC6H,6BAA6B,CAAC,CAAC;EACxC;EACAC,+BAA+BA,CAAA,EAAG;IAC9B,OAAO,EAAE;EACb;EACAC,oBAAoBA,CAAC7H,MAAM,EAAE;IACzB,MAAM8H,YAAY,GAAG,IAAI,CAACF,+BAA+B,CAAC,CAAC;IAC3D,MAAMG,mBAAmB,GAAG9L,CAAC,CAAC+D,MAAM,CAAC,CAACgI,QAAQ,CAACF,YAAY,CAAC;IAC5D,OAAOC,mBAAmB;EAC9B;EACAP,wBAAwBA,CAAC1H,OAAO,EAAE;IAC9B,MAAM;MACFK,cAAc,EAAEA;IACpB,CAAC,GAAG,IAAI,CAACC,MAAM,CAAC,CAAC;IACjB,IAAIxD,SAAS,CAACuD,cAAc,CAAC,EAAE;MAC3B,MAAM8H,mBAAmB,GAAG,IAAI,CAACJ,oBAAoB,CAAC1H,cAAc,CAAC;MACrE,MAAM+H,EAAE,GAAGD,mBAAmB,GAAGhM,CAAC,CAACkE,cAAc,CAAC,CAACgI,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAACC,gBAAgB,CAAC,CAAC;MACvF,IAAI,CAACC,OAAO,CAAC,kBAAkB,EAAEH,EAAE,EAAEpI,OAAO,CAAC;MAC7C;IACJ;IACA,IAAI,CAACuI,OAAO,CAAC,kBAAkB,EAAE,IAAI,EAAEvI,OAAO,CAAC;EACnD;EACA2H,cAAcA,CAAC3H,OAAO,EAAEyH,eAAe,EAAE;IACrC,MAAM;MACFpH,cAAc,EAAEA;IACpB,CAAC,GAAG,IAAI,CAACC,MAAM,CAAC,CAAC;IACjB,MAAM2H,mBAAmB,GAAG,IAAI,CAACF,oBAAoB,CAAC/H,OAAO,CAAC;IAC9D,IAAIiI,mBAAmB,EAAE;MACrB;IACJ;IACA,IAAI,CAACR,eAAe,IAAIpH,cAAc,EAAE;MACpC,IAAI,CAACkI,OAAO,CAAC,IAAI,EAAE,IAAI,CAACD,gBAAgB,CAAC,CAAC,EAAEtI,OAAO,CAAC;IACxD,CAAC,MAAM;MACH,IAAI,CAACuI,OAAO,CAAC,IAAI,EAAE,IAAI,EAAEvI,OAAO,CAAC;IACrC;EACJ;EACAwI,WAAWA,CAAC1E,QAAQ,EAAE;IAClB,OAAOA,QAAQ,IAAI,MAAM,KAAK3H,CAAC,CAAC2H,QAAQ,CAAC,CAACuE,IAAI,CAAC,eAAe,CAAC;EACnE;EACA7C,eAAeA,CAACxF,OAAO,EAAE;IACrB,IAAI,CAACA,OAAO,IAAI,CAACA,OAAO,CAACQ,MAAM,EAAE;MAC7B;IACJ;IACA,IAAI,CAACoF,uBAAuB,CAAC5F,OAAO,EAAE,IAAI,CAAC;IAC3C,IAAI,CAACyB,oBAAoB,CAAC,IAAI,CAAC6G,gBAAgB,CAAC,CAAC,CAAC;IAClD,MAAM;MACFtH,aAAa,EAAEA;IACnB,CAAC,GAAG,IAAI,CAACV,MAAM,CAAC,CAAC;IACjB,MAAMmI,gBAAgB,GAAG,IAAI,CAACD,WAAW,CAACxI,OAAO,CAAC;IAClD,IAAIgB,aAAa,IAAI,CAACyH,gBAAgB,IAAI,CAAC,IAAI,CAAClD,wBAAwB,EAAE;MACtE,IAAI,CAAC+B,kBAAkB,CAACtH,OAAO,CAAC;IACpC;EACJ;EACA0I,sBAAsBA,CAACpF,IAAI,EAAE;IACzB,IAAIqF,MAAM,GAAGxM,CAAC,CAAC,CAAC;IAChB,MAAMyM,WAAW,GAAG,IAAI,CAACC,YAAY,CAAC,CAAC;IACvC,IAAI,CAACC,YAAY,CAAC,CAAC,CAACpM,IAAI,CAAE,CAACuJ,KAAK,EAAE8C,WAAW,KAAK;MAC9C,MAAM5B,KAAK,GAAGhL,CAAC,CAAC4M,WAAW,CAAC;MAC5B,IAAI5B,KAAK,CAAChF,IAAI,CAACyG,WAAW,CAAC,KAAKtF,IAAI,EAAE;QAClCqF,MAAM,GAAGxB,KAAK;QACd,OAAO,KAAK;MAChB;MACA,OAAO,IAAI;IACf,CAAE,CAAC;IACH,OAAOwB,MAAM;EACjB;EACAK,eAAeA,CAAC1F,IAAI,EAAE;IAClB,MAAM;MACFpC,KAAK,EAAEA;IACX,CAAC,GAAG,IAAI,CAACZ,MAAM,CAAC,CAAC;IACjB,OAAOY,KAAK,CAAC+H,OAAO,CAAC3F,IAAI,CAAC;EAC9B;EACA4F,kBAAkBA,CAAC5F,IAAI,EAAE6F,QAAQ,EAAEC,KAAK,EAAEC,SAAS,EAAE;IACjD,MAAMlC,KAAK,GAAG,IAAI,CAACuB,sBAAsB,CAACpF,IAAI,CAAC;IAC/C,IAAI,CAAC6D,KAAK,CAAC3G,MAAM,EAAE;MACf;IACJ;IACA,IAAI,CAAC,IAAI,CAAC8I,WAAW,CAACC,SAAS,CAACC,WAAW,CAACrC,KAAK,CAAC,CAACsC,YAAY,CAACN,QAAQ,EAAEC,KAAK,CAAC,EAAE;MAC9E,IAAI,CAACM,YAAY,CAACvC,KAAK,EAAE7D,IAAI,CAAC;IAClC;IACA,MAAMqG,WAAW,GAAG,UAAU,KAAKR,QAAQ,IAAIC,KAAK;IACpD,IAAIO,WAAW,EAAE;MACb,IAAI,CAACC,eAAe,CAACzC,KAAK,CAAC;IAC/B;EACJ;EACAyC,eAAeA,CAACzC,KAAK,EAAE;IACnB,IAAIA,KAAK,CAAC0C,EAAE,CAAC,IAAI,CAACvJ,MAAM,CAAC,gBAAgB,CAAC,CAAC,EAAE;MACzC,IAAI,CAACwJ,oBAAoB,CAAC,CAAC;IAC/B;EACJ;EACAA,oBAAoBA,CAAA,EAAG;IACnB,IAAI,CAACxJ,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC;EACvC;EACAoJ,YAAYA,CAACvC,KAAK,EAAE7D,IAAI,EAAE;IACtB,MAAM7C,QAAQ,GAAG,IAAI,CAACC,YAAY,CAACyG,KAAK,CAAC;IACzC,MAAMlB,KAAK,GAAGkB,KAAK,CAAChF,IAAI,CAAC,IAAI,CAAC4H,aAAa,CAAC,CAAC,CAAC;IAC9C,IAAI,CAACC,WAAW,CAAC,IAAI,CAAC9E,mBAAmB,GAAGe,KAAK,EAAExF,QAAQ,EAAE,IAAI,EAAE0G,KAAK,CAAC;EAC7E;EACAU,6BAA6BA,CAAA,EAAG,CAAC;EACjCoC,cAAcA,CAACC,IAAI,EAAE;IACjB,MAAM;MACF3O,IAAI,EAAEA,IAAI;MACV6N,KAAK,EAAEA,KAAK;MACZe,aAAa,EAAEA,aAAa;MAC5BC,QAAQ,EAAEA;IACd,CAAC,GAAGF,IAAI;IACR,IAAI,OAAO,KAAK3O,IAAI,EAAE;MAClB,MAAM8O,OAAO,GAAGD,QAAQ,CAACE,KAAK,CAACrM,eAAe,CAAC;MAC/C,IAAI,IAAI,KAAKoM,OAAO,IAAI,KAAK,CAAC,KAAKA,OAAO,IAAIA,OAAO,CAAC7J,MAAM,EAAE;QAC1D,MAAM2I,QAAQ,GAAGkB,OAAO,CAACA,OAAO,CAAC7J,MAAM,GAAG,CAAC,CAAC;QAC5C,MAAM+J,QAAQ,GAAGH,QAAQ,CAACI,OAAO,CAAC,IAAIrB,QAAQ,EAAE,EAAE,EAAE,CAAC;QACrD,MAAM7F,IAAI,GAAG,IAAI,CAAChD,MAAM,CAACiK,QAAQ,CAAC;QAClC,IAAI,CAACrB,kBAAkB,CAAC5F,IAAI,EAAE6F,QAAQ,EAAEC,KAAK,EAAEe,aAAa,CAAC;QAC7D;MACJ;IACJ;IACA,QAAQ5O,IAAI;MACR,KAAK,OAAO;MACZ,KAAK,iBAAiB;MACtB,KAAK,sBAAsB;MAC3B,KAAK,oBAAoB;QACrB,IAAI,CAACoH,mBAAmB,CAAC,CAAC;QAC1B,IAAI,CAAC8H,WAAW,CAAC,CAAC;QAClB;MACJ,KAAK,YAAY;QACb,IAAI,CAAC7H,kBAAkB,CAAC,CAAC;QACzB,IAAI,CAAC8H,mBAAmB,CAAC,CAAC;QAC1B;MACJ,KAAK,YAAY;MACjB,KAAK,kBAAkB;QACnB,IAAI,CAACA,mBAAmB,CAAC,CAAC;QAC1B;MACJ,KAAK,cAAc;MACnB,KAAK,aAAa;MAClB,KAAK,cAAc;QACf,IAAI,CAACD,WAAW,CAAC,CAAC;QAClB;MACJ,KAAK,gBAAgB;QACjB,IAAI,CAACE,uBAAuB,CAAC,CAAC;QAC9B;MACJ,KAAK,aAAa;MAClB,KAAK,eAAe;MACpB,KAAK,eAAe;QAChB;MACJ,KAAK,YAAY;MACjB,KAAK,iBAAiB;QAClB,IAAI,CAACC,gBAAgB,CAAC,CAAC;QACvB;MACJ,KAAK,mBAAmB;QACpB,IAAI,CAACC,uBAAuB,CAAC,CAAC;QAC9B;MACJ,KAAK,sBAAsB;QACvB,IAAI,CAACpJ,oBAAoB,GAAG,IAAI,CAACqJ,qBAAqB,CAAC,sBAAsB,CAAC;QAC9E;MACJ,KAAK,gBAAgB;QACjB,IAAI,CAAClF,uBAAuB,CAACuE,aAAa,EAAE,KAAK,EAAE,IAAI,CAAC;QACxD,IAAI,CAAC3E,eAAe,CAACrJ,CAAC,CAACiN,KAAK,CAAC,CAAC;QAC9B;MACJ,KAAK,aAAa;QACd,IAAI,CAAC5G,qBAAqB,CAAC,CAAC;QAC5B,IAAI,CAACQ,wBAAwB,CAAC,CAAC;QAC/B,IAAI,CAACyH,WAAW,CAAC,CAAC;QAClB;MACJ;QACI,KAAK,CAACR,cAAc,CAACC,IAAI,CAAC;IAClC;EACJ;EACAO,WAAWA,CAAA,EAAG;IACV,IAAI,CAACX,oBAAoB,CAAC,CAAC;IAC3B,KAAK,CAACW,WAAW,CAAC,CAAC;EACvB;EACAM,aAAaA,CAAA,EAAG;IACZ,IAAI,CAACC,sBAAsB,CAAC,CAAC;IAC7B,OAAO,IAAI,CAAClJ,eAAe,CAACmJ,YAAY,CAAC,CAAC;EAC9C;EACAD,sBAAsBA,CAAA,EAAG;IACrB,IAAI,CAACE,2BAA2B,GAAG,CAAC;EACxC;EACAC,sBAAsBA,CAAA,EAAG;IACrB,IAAI,CAACD,2BAA2B,GAAG,CAAC,CAAC;EACzC;EACAE,sBAAsBA,CAAA,EAAG;IACrB,IAAI,CAACF,2BAA2B,GAAG,IAAI;EAC3C;EACAG,yBAAyBA,CAACC,QAAQ,EAAEvM,CAAC,EAAE;IACnC,MAAMmC,KAAK,GAAG,IAAI,CAACZ,MAAM,CAAC,OAAO,CAAC;IAClC,IAAI,IAAI,CAACiL,YAAY,IAAIrK,KAAK,IAAI,IAAI,CAACsK,kBAAkB,CAAC,CAAC,EAAE;MACzD,IAAI,CAACtG,mBAAmB,GAAGhE,KAAK,CAACV,MAAM;MACvC,IAAI,CAAC,IAAI,CAACiL,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,CAACP,2BAA2B,EAAE;QAChE,IAAI,CAAC5K,MAAM,CAAC,CAAC,CAACY,KAAK,GAAGA,KAAK,CAACwK,MAAM,CAACJ,QAAQ,CAACK,KAAK,CAAC,IAAI,CAACT,2BAA2B,CAAC,CAAC;MACxF;MACA,IAAI,CAACE,sBAAsB,CAAC,CAAC;MAC7B,IAAI,CAACQ,eAAe,CAAC,CAAC;IAC1B,CAAC,MAAM;MACH,IAAI,CAACtL,MAAM,CAAC,OAAO,EAAEgL,QAAQ,CAACK,KAAK,CAAC,CAAC,CAAC;IAC1C;EACJ;EACAC,eAAeA,CAAA,EAAG;IACd,IAAI,CAACC,eAAe,CAAC,CAAC;IACtB,IAAI,CAACC,cAAc,CAAC,CAAC;EACzB;EACAC,2BAA2BA,CAAA,EAAG;IAC1B,IAAI,CAACX,sBAAsB,CAAC,CAAC;IAC7B,IAAI,CAAC9K,MAAM,CAAC,OAAO,EAAE,IAAI,CAACA,MAAM,CAAC,OAAO,CAAC,CAAC;EAC9C;EACAkL,kBAAkBA,CAAA,EAAG;IACjB,OAAO,IAAI,IAAI,IAAI,CAACN,2BAA2B,IAAI,IAAI,CAACc,wBAAwB,CAAC,CAAC;EACtF;EACAA,wBAAwBA,CAAA,EAAG;IACvB,OAAO,KAAK;EAChB;EACAC,MAAMA,CAAA,EAAG;IACL,IAAI,CAACC,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC1B,IAAI,IAAI,CAACC,UAAU,EAAE;MACjB,OAAO,IAAI,CAACA,UAAU;IAC1B;IACA,IAAI,CAACC,iBAAiB,CAAC,CAAC;EAC5B;EACAF,mBAAmBA,CAAA,EAAG;IAClBhQ,CAAC,CAAC,IAAI,CAACmQ,cAAc,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;EACpC;EACAC,QAAQA,CAAA,EAAG;IACP,KAAK,CAACA,QAAQ,CAAC,CAAC;IAChBC,YAAY,CAAC,IAAI,CAACC,iBAAiB,CAAC;EACxC;EACAC,QAAQA,CAAA,EAAG;IACP,IAAI,CAAChK,mBAAmB,CAAC,CAAC;IAC1B,KAAK,CAACgK,QAAQ,CAAC,CAAC;EACpB;EACAL,cAAcA,CAACM,aAAa,EAAEC,wBAAwB,EAAE;IACpD,OAAO,IAAI,CAAC/I,QAAQ,CAAC,CAAC;EAC1B;EACAgJ,UAAUA,CAAA,EAAG;IACT,OAAOvP,UAAU;EACrB;EACAwP,iBAAiBA,CAAA,EAAG;IAChB,OAAO,GAAG,IAAI,CAACD,UAAU,CAAC,CAAC,UAAU;EACzC;EACAE,sBAAsBA,CAAA,EAAG;IACrB,OAAO,uBAAuB;EAClC;EACAC,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,IAAI,CAACH,UAAU,CAAC,CAAC,EAAE;EAClC;EACAjE,YAAYA,CAAA,EAAG;IACX,OAAO,YAAY;EACvB;EACAkB,aAAaA,CAAA,EAAG;IACZ,OAAO,aAAa;EACxB;EACAhD,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACuF,cAAc,CAAC,CAAC,CAACxG,IAAI,CAAC,IAAI,CAACmH,aAAa,CAAC,CAAC,CAAC;EAC3D;EACAC,WAAWA,CAAA,EAAG;IACV,KAAK,CAACA,WAAW,CAAC,CAAC;IACnB,IAAI,CAACzL,oBAAoB,GAAG,IAAI,CAACqJ,qBAAqB,CAAC,sBAAsB,CAAC;IAC9E,IAAI,CAAChH,QAAQ,CAAC,CAAC,CAACgB,QAAQ,CAAC,eAAe,CAAC;IACzC,IAAI,CAAC+G,eAAe,CAAC,CAAC;EAC1B;EACAA,eAAeA,CAAA,EAAG;IACdxP,aAAa,CAAE,MAAM;MACjB,IAAI,CAAC8Q,kBAAkB,CAAC,CAAC;IAC7B,CAAE,CAAC,CAAC,CAAC;EACT;EACArB,cAAcA,CAAA,EAAG;IACb,IAAI,CAACsB,uBAAuB,CAAC,CAAC;EAClC;EACAC,OAAOA,CAAA,EAAG;IACN,KAAK,CAACA,OAAO,CAAC,CAAC;IACf,IAAI,CAACC,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAAC1C,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,uBAAuB,CAAC,CAAC;EAClC;EACA0C,gBAAgBA,CAAA,EAAG;IACf,OAAO3R,aAAa,CAAC4R,IAAI;EAC7B;EACAF,iBAAiBA,CAAA,EAAG;IAChB,MAAMG,YAAY,GAAG,IAAI,CAACR,aAAa,CAAC,CAAC;IACzC,MAAMS,YAAY,GAAG,IAAI,CAACH,gBAAgB,CAAC,CAAC;IAC5C,MAAMI,mBAAmB,GAAG9R,YAAY,CAACL,cAAc,EAAE,IAAI,CAACoS,IAAI,CAAC;IACnE,MAAMC,qBAAqB,GAAGhS,YAAY,CAAC6R,YAAY,EAAE,IAAI,CAACE,IAAI,CAAC;IACnE,MAAME,aAAa,GAAG,IAAI9R,MAAM,CAAEkO,IAAI,IAAI;MACtC,MAAM;QACFrJ,KAAK,EAAEA;MACX,CAAC,GAAGqJ,IAAI;MACR,IAAI,CAAC6D,uBAAuB,CAAClN,KAAK,CAAC;IACvC,CAAE,CAAC;IACHnF,YAAY,CAACsS,GAAG,CAAC,IAAI,CAAC1B,cAAc,CAAC,CAAC,EAAEqB,mBAAmB,EAAEF,YAAY,CAAC;IAC1E/R,YAAY,CAACsS,GAAG,CAAC,IAAI,CAAC1B,cAAc,CAAC,CAAC,EAAEuB,qBAAqB,EAAEJ,YAAY,CAAC;IAC5E/R,YAAY,CAACuS,EAAE,CAAC,IAAI,CAAC3B,cAAc,CAAC,CAAC,EAAEqB,mBAAmB,EAAEF,YAAY,EAAG1O,CAAC,IAAI,IAAI,CAAC+B,iBAAiB,CAAC/B,CAAC,CAAE,CAAC;IAC3GrD,YAAY,CAACuS,EAAE,CAAC,IAAI,CAAC3B,cAAc,CAAC,CAAC,EAAEuB,qBAAqB,EAAEJ,YAAY,EAAG1O,CAAC,IAAI;MAC9E+O,aAAa,CAACI,OAAO,CAAC;QAClBjK,OAAO,EAAE9H,CAAC,CAAC4C,CAAC,CAACmB,MAAM,CAAC;QACpBW,KAAK,EAAE9B;MACX,CAAC,CAAC;IACN,CAAE,CAAC;EACP;EACA+B,iBAAiBA,CAAC/B,CAAC,EAAEmL,IAAI,EAAEiE,MAAM,EAAE;IAC/B,IAAI,CAACC,mBAAmB,CAACrP,CAAC,EAAE,aAAa,EAAEmL,IAAI,EAAEiE,MAAM,CAAC;EAC5D;EACAJ,uBAAuBA,CAAChP,CAAC,EAAE;IACvB,IAAI,CAAC,IAAI,CAACuB,MAAM,CAAC,mBAAmB,CAAC,EAAE;MACnC;IACJ;IACA,IAAI,CAAC+N,iBAAiB,GAAG,MAAM;MAC3B5B,YAAY,CAAC,IAAI,CAACC,iBAAiB,CAAC;MACpC,IAAI,CAAC2B,iBAAiB,GAAG,KAAK,CAAC;MAC/B,IAAItP,CAAC,CAACuP,kBAAkB,CAAC,CAAC,EAAE;QACxB;MACJ;MACA,MAAMtO,OAAO,GAAG7D,CAAC,CAAC4C,CAAC,CAACmB,MAAM,CAAC;MAC3B,MAAMqO,YAAY,GAAGvO,OAAO,CAACwO,OAAO,CAAC,IAAI,CAACzH,aAAa,CAAC,CAAC,CAAC;MAC1D,MAAM0H,iBAAiB,GAAG,IAAI,CAACC,iBAAiB,CAAC1O,OAAO,CAAC;MACzD,IAAIuO,YAAY,CAAC/N,MAAM,IAAI,IAAI,CAAC6E,cAAc,CAAC,IAAI,KAAKoJ,iBAAiB,IAAI,KAAK,CAAC,KAAKA,iBAAiB,GAAG,KAAK,CAAC,GAAGA,iBAAiB,CAACtO,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;QAC5I,IAAI,CAACoF,wBAAwB,GAAG,IAAI;QACpC,IAAI,CAACjF,MAAM,CAAC,gBAAgB,EAAEnD,gBAAgB,CAACoR,YAAY,CAAC,CAAC;QAC7D,IAAI,CAAChJ,wBAAwB,GAAG,KAAK;MACzC;IACJ,CAAC;IACD,IAAI,CAACmH,iBAAiB,GAAGiC,UAAU,CAAC,IAAI,CAACC,sBAAsB,CAACrP,IAAI,CAAC,IAAI,CAAC,CAAC;EAC/E;EACAmP,iBAAiBA,CAAC1O,OAAO,EAAE;IACvB,IAAIA,OAAO,CAAC6J,EAAE,CAAC3M,SAAS,CAAC,EAAE;MACvB,OAAO8C,OAAO;IAClB;IACA,IAAI6O,WAAW,GAAG7O,OAAO,CAAC8O,MAAM,CAAC,CAAC;IAClC,OAAOD,WAAW,CAACrO,MAAM,IAAI,CAACvE,UAAU,CAAC8S,UAAU,CAACF,WAAW,CAAC1O,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAClE,UAAU,CAAC+S,kBAAkB,CAACH,WAAW,CAAC1O,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;MAC3H,IAAI0O,WAAW,CAAChF,EAAE,CAAC3M,SAAS,CAAC,EAAE;QAC3B,OAAO2R,WAAW;MACtB;MACAA,WAAW,GAAGA,WAAW,CAACC,MAAM,CAAC,CAAC;IACtC;IACA;EACJ;EACAF,sBAAsBA,CAAA,EAAG;IACrB,IAAI,IAAI,CAACP,iBAAiB,EAAE;MACxB,IAAI,CAACA,iBAAiB,CAAC,CAAC;IAC5B;EACJ;EACAY,iBAAiBA,CAAClQ,CAAC,EAAEyI,SAAS,EAAE;IAC5B,KAAK,CAACyH,iBAAiB,CAAClQ,CAAC,EAAEyI,SAAS,CAAC;IACrC,IAAI,CAACoH,sBAAsB,CAAC,CAAC;EACjC;EACAhE,gBAAgBA,CAAA,EAAG;IACf,MAAMsE,cAAc,GAAG,IAAI,CAAC5C,cAAc,CAAC,CAAC;IAC5C,MAAMmB,YAAY,GAAG,IAAI,CAACR,aAAa,CAAC,CAAC;IACzC,MAAMkC,SAAS,GAAGtT,YAAY,CAACF,SAAS,CAACJ,IAAI,EAAE,IAAI,CAACqS,IAAI,CAAC;IACzDlS,YAAY,CAACsS,GAAG,CAACkB,cAAc,EAAEC,SAAS,EAAE1B,YAAY,CAAC;IACzD/R,YAAY,CAACuS,EAAE,CAACiB,cAAc,EAAEC,SAAS,EAAE1B,YAAY,EAAE;MACrD2B,OAAO,EAAE,IAAI,CAACC,eAAe,CAAC;IAClC,CAAC,EAAE,IAAI,CAACC,gBAAgB,CAAC/P,IAAI,CAAC,IAAI,CAAC,CAAC;EACxC;EACA8P,eAAeA,CAAA,EAAG;IACd,MAAM;MACF9N,eAAe,EAAEA;IACrB,CAAC,GAAG,IAAI,CAACjB,MAAM,CAAC,CAAC;IACjB,OAAOiB,eAAe;EAC1B;EACAgO,oBAAoBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAACC,qBAAqB,CAAC,YAAY,CAAC;EACnD;EACAF,gBAAgBA,CAACvQ,CAAC,EAAE;IAChB,IAAI,IAAI,CAACwQ,oBAAoB,CAAC,CAAC,EAAE;MAC7B,IAAI,CAACnB,mBAAmB,CAACrP,CAAC,EAAE,YAAY,CAAC;IAC7C,CAAC,MAAM;MACHA,CAAC,CAAC0Q,MAAM,GAAG,IAAI;IACnB;EACJ;EACA5E,uBAAuBA,CAAA,EAAG;IACtB,MAAMqE,cAAc,GAAG,IAAI,CAAC5C,cAAc,CAAC,CAAC;IAC5C,MAAMmB,YAAY,GAAG,IAAI,CAACR,aAAa,CAAC,CAAC;IACzC,MAAMkC,SAAS,GAAGtT,YAAY,CAACJ,oBAAoB,EAAE,IAAI,CAACmS,IAAI,CAAC;IAC/DlS,YAAY,CAACsS,GAAG,CAACkB,cAAc,EAAEC,SAAS,EAAE1B,YAAY,CAAC;IACzD/R,YAAY,CAACuS,EAAE,CAACiB,cAAc,EAAEC,SAAS,EAAE1B,YAAY,EAAE,IAAI,CAACiC,uBAAuB,CAACnQ,IAAI,CAAC,IAAI,CAAC,CAAC;EACrG;EACAoQ,2BAA2BA,CAAA,EAAG;IAC1B,OAAO,IAAI,CAACH,qBAAqB,CAAC,mBAAmB,CAAC;EAC1D;EACAE,uBAAuBA,CAAC3Q,CAAC,EAAE;IACvB,IAAI,IAAI,CAAC4Q,2BAA2B,CAAC,CAAC,EAAE;MACpC,IAAI,CAACvB,mBAAmB,CAACrP,CAAC,EAAE,mBAAmB,CAAC;IACpD,CAAC,MAAM;MACHA,CAAC,CAAC0Q,MAAM,GAAG,IAAI;IACnB;EACJ;EACAtC,kBAAkBA,CAAA,EAAG;IACjB,MAAM;MACFjM,KAAK,EAAEA;IACX,CAAC,GAAG,IAAI,CAACZ,MAAM,CAAC,CAAC;IACjB,MAAMsP,aAAa,GAAG1O,KAAK,IAAI,EAAE;IACjC,IAAI,IAAI,CAACgE,mBAAmB,EAAE;MAC1B,IAAI,CAAC2K,YAAY,CAACD,aAAa,CAACjE,KAAK,CAAC,IAAI,CAACzG,mBAAmB,CAAC,CAAC;IACpE,CAAC,MAAM;MACH,IAAI,CAAC2K,YAAY,CAACD,aAAa,CAAC;IACpC;EACJ;EACAC,YAAYA,CAAC3O,KAAK,EAAE;IAChB,IAAIA,KAAK,CAACV,MAAM,EAAE;MACd9D,IAAI,CAACwE,KAAK,EAAG,CAAC+E,KAAK,EAAExF,QAAQ,KAAK;QAC9B,IAAI,CAACuJ,WAAW,CAAC,IAAI,CAAC9E,mBAAmB,GAAGe,KAAK,EAAExF,QAAQ,CAAC;MAChE,CAAE,CAAC;IACP;IACA,IAAI,CAACiK,mBAAmB,CAAC,CAAC;EAC9B;EACAoF,kBAAkBA,CAAA,EAAG;IACjB,OAAO,IAAI,CAACxD,cAAc,CAAC,CAAC;EAChC;EACAyD,cAAcA,CAACjM,QAAQ,EAAE;IACrB,MAAMkM,UAAU,GAAG1U,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAACgF,MAAM,CAAC,iBAAiB,CAAC,CAAC;IAC/D,MAAM;MACF2P,KAAK,EAAEC;IACX,CAAC,GAAGF,UAAU;IACd,IAAIE,gBAAgB,EAAE;MAClB,MAAMC,iBAAiB,GAAGrM,QAAQ,CAAC3D,GAAG,CAAC,CAAC,CAAC,CAACiQ,SAAS;MACnDJ,UAAU,CAACC,KAAK,GAAG,CAACE,iBAAiB,EAAED,gBAAgB,CAAC,CAACG,IAAI,CAAC,GAAG,CAAC;IACtE;IACAvM,QAAQ,CAACuE,IAAI,CAAC2H,UAAU,CAAC;EAC7B;EACAhG,WAAWA,CAAC/D,KAAK,EAAExF,QAAQ,EAAE8C,UAAU,EAAE+M,cAAc,EAAE;IACrD,MAAMC,SAAS,GAAG,CAAC,IAAI,KAAKtK,KAAK,IAAI,KAAK,CAAC,KAAKA,KAAK,GAAG,KAAK,CAAC,GAAGA,KAAK,CAAC3C,IAAI,KAAK2C,KAAK;IACrF,MAAMuK,kBAAkB,GAAGjN,UAAU,IAAI,IAAI,CAACuM,kBAAkB,CAAC,CAAC;IAClE,MAAMW,UAAU,GAAG,IAAI,CAACC,gBAAgB,CAACH,SAAS,EAAE9P,QAAQ,EAAE+P,kBAAkB,EAAEF,cAAc,CAAC;IACjG,IAAI,CAACK,eAAe,CAACF,UAAU,EAAEhQ,QAAQ,EAAE8P,SAAS,CAAC;IACrD,IAAI,CAACR,cAAc,CAACU,UAAU,CAAC;IAC/B,IAAI,CAACG,qBAAqB,CAACnQ,QAAQ,EAAEgQ,UAAU,CAAC;IAChD,MAAMI,YAAY,GAAG,IAAI,CAACC,eAAe,CAACL,UAAU,CAAC;IACrD,MAAM;MACFtP,YAAY,EAAEA;IAClB,CAAC,GAAG,IAAI,CAACb,MAAM,CAAC,CAAC;IACjB,MAAMyQ,oBAAoB,GAAG,IAAI,CAACC,kBAAkB,CAAC;MACjD/K,KAAK,EAAEsK,SAAS;MAChB9P,QAAQ,EAAEA,QAAQ;MAClBwQ,SAAS,EAAE9T,gBAAgB,CAAC0T,YAAY,CAAC;MACzCK,YAAY,EAAE,IAAI,CAACnE,iBAAiB,CAAC,CAAC;MACtCoE,mBAAmB,EAAEhQ;IACzB,CAAC,CAAC;IACF3E,IAAI,CAACuU,oBAAoB,CAAC,CAACK,IAAI,CAAEC,QAAQ,IAAI;MACzC,IAAI,CAACC,sBAAsB,CAAC;QACxBvI,WAAW,EAAE0H,UAAU;QACvBc,WAAW,EAAEF,QAAQ;QACrB5Q,QAAQ,EAAEA,QAAQ;QAClB8P,SAAS,EAAEA;MACf,CAAC,CAAC;MACF,IAAI,CAACiB,wBAAwB,CAACvL,KAAK,EAAExF,QAAQ,EAAEtD,gBAAgB,CAACsT,UAAU,CAAC,CAAC;IAChF,CAAE,CAAC;IACH,OAAOA,UAAU;EACrB;EACAK,eAAeA,CAACL,UAAU,EAAE;IACxB,MAAMI,YAAY,GAAGJ,UAAU,CAAC3K,IAAI,CAAC,8BAA8B,CAAC;IACpE+K,YAAY,CAACY,WAAW,CAAC,6BAA6B,CAAC;IACvD,OAAOZ,YAAY;EACvB;EACAD,qBAAqBA,CAACnQ,QAAQ,EAAEF,YAAY,EAAE;IAC1C,IAAI,CAACE,QAAQ,IAAI,CAACA,QAAQ,CAACE,OAAO,EAAE;MAChC;IACJ;IACAjF,YAAY,CAACuS,EAAE,CAAC1N,YAAY,EAAE/E,cAAc,EAAGuD,CAAC,IAAI;MAChD,IAAI,CAAC6B,0BAA0B,CAACL,YAAY,EAAEE,QAAQ,CAACE,OAAO,EAAE;QAC5DE,KAAK,EAAE9B;MACX,CAAC,CAAC;IACN,CAAE,CAAC;EACP;EACAiS,kBAAkBA,CAAC9G,IAAI,EAAE;IACrB,MAAMwH,gBAAgB,GAAG,IAAI,CAACC,oBAAoB,CAACzH,IAAI,CAAC;IACxD,MAAM/I,YAAY,GAAG,IAAI,CAACyQ,YAAY,CAACF,gBAAgB,CAAC;IACxD,IAAI,CAACG,sBAAsB,CAAC3H,IAAI,CAAC;IACjC,MAAM4H,eAAe,GAAG3V,CAAC,CAAC,IAAI,CAAC4V,qBAAqB,CAAC5Q,YAAY,EAAE+I,IAAI,CAAC,CAAC;IACzE,IAAI,CAAC4H,eAAe,CAAC5J,QAAQ,CAAC,qBAAqB,CAAC,EAAE;MAClD,OAAOgC,IAAI,CAAC+G,SAAS;IACzB;IACA,OAAO,IAAI,CAACe,wBAAwB,CAAC9H,IAAI,EAAE4H,eAAe,CAAC;EAC/D;EACAE,wBAAwBA,CAAC9H,IAAI,EAAE+H,KAAK,EAAE;IAClC9V,CAAC,CAAC+N,IAAI,CAAC+G,SAAS,CAAC,CAACiB,WAAW,CAACD,KAAK,CAAC;IACpC/H,IAAI,CAAC+G,SAAS,GAAG9T,gBAAgB,CAAC8U,KAAK,CAAC;IACxC,IAAI,CAACJ,sBAAsB,CAAC3H,IAAI,CAAC;IACjC,OAAO+H,KAAK;EAChB;EACAJ,sBAAsBA,CAAC3H,IAAI,EAAE;IACzB,MAAMiI,OAAO,GAAG,CAAC5U,UAAU,GAAG,UAAU,EAAE2M,IAAI,CAACgH,YAAY,CAAC;IAC5D/U,CAAC,CAAC+N,IAAI,CAAC+G,SAAS,CAAC,CAACnM,QAAQ,CAACqN,OAAO,CAAC9B,IAAI,CAAC,GAAG,CAAC,CAAC;EACjD;EACA+B,sBAAsBA,CAAC7O,UAAU,EAAEkN,UAAU,EAAExK,KAAK,EAAE;IAClDwK,UAAU,CAAC4B,QAAQ,CAAC9O,UAAU,CAAC;EACnC;EACAmN,gBAAgBA,CAACzK,KAAK,EAAExF,QAAQ,EAAE8C,UAAU,EAAE+M,cAAc,EAAE;IAC1D,MAAMG,UAAU,GAAGtU,CAAC,CAAC,OAAO,CAAC;IAC7B,IAAI,IAAI,CAACmN,WAAW,CAACC,SAAS,CAACkH,UAAU,EAAE,IAAI,CAAC6B,YAAY,CAAC,CAAC,EAAE7R,QAAQ,IAAI,CAAC,CAAC,CAAC;IAC/E,IAAI,IAAI,KAAK6P,cAAc,IAAI,KAAK,CAAC,KAAKA,cAAc,IAAIA,cAAc,CAAC9P,MAAM,EAAE;MAC/E8P,cAAc,CAAC4B,WAAW,CAACzB,UAAU,CAAC;IAC1C,CAAC,MAAM;MACH,IAAI,CAAC2B,sBAAsB,CAACG,IAAI,CAAC,IAAI,EAAEhP,UAAU,EAAEkN,UAAU,EAAExK,KAAK,CAAC;IACzE;IACA,IAAI,IAAI,CAAC3F,MAAM,CAAC,oBAAoB,CAAC,EAAE;MACnC,MAAMkS,YAAY,GAAG,IAAI,CAAC3P,cAAc,GAAG,IAAI,CAACA,cAAc,CAACpC,QAAQ,CAAC,GAAGA,QAAQ;MACnFgQ,UAAU,CAACpI,IAAI,CAAC,OAAO,EAAEmK,YAAY,CAAC;IAC1C;IACA,OAAO/B,UAAU;EACrB;EACA6B,YAAYA,CAAA,EAAG;IACX,OAAO;MACHG,WAAW,EAAEA,CAAA,KAAM,IAAI,CAACnS,MAAM,CAAC,gCAAgC,CAAC;MAChEoS,KAAK,EAAE,IAAI;MACXC,WAAW,EAAEC,KAAK,IAAI;QAClB,MAAMC,IAAI,GAAG,IAAI,CAACvS,MAAM,CAAC,GAAGsS,KAAK,MAAM,CAAC;QACxC,MAAME,MAAM,GAAGvW,aAAa,CAACsW,IAAI,CAAC;QAClC,OAAOC,MAAM;MACjB;IACJ,CAAC;EACL;EACAxB,sBAAsBA,CAACpH,IAAI,EAAE,CAAC;EAC9BsH,wBAAwBA,CAACvL,KAAK,EAAExF,QAAQ,EAAEsI,WAAW,EAAE;IACnD,IAAI,CAACgK,oBAAoB,CAAC,CAAC,CAAC;MACxBhK,WAAW,EAAEA,WAAW;MACxBwH,SAAS,EAAEtK,KAAK;MAChBxF,QAAQ,EAAEA;IACd,CAAC,CAAC;EACN;EACAkQ,eAAeA,CAAC1M,OAAO,EAAE9B,IAAI,EAAE8D,KAAK,EAAE;IAClChC,OAAO,CAACa,QAAQ,CAAC,CAACvH,UAAU,EAAE,IAAI,CAACuP,UAAU,CAAC,CAAC,CAAC,CAACuD,IAAI,CAAC,GAAG,CAAC,CAAC,CAAClO,IAAI,CAAC,IAAI,CAAC0G,YAAY,CAAC,CAAC,EAAE1G,IAAI,CAAC,CAACA,IAAI,CAAC,IAAI,CAAC4H,aAAa,CAAC,CAAC,EAAE9D,KAAK,CAAC;EACjI;EACA0E,uBAAuBA,CAAA,EAAG;IACtB,IAAI,CAACqI,iBAAiB,GAAG,IAAI,CAAClI,qBAAqB,CAAC,gBAAgB,EAAE;MAClE7G,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC,CAAC;MACvBgP,iBAAiB,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC;MAC3CC,QAAQ,EAAE;IACd,CAAC,CAAC;IACF,OAAO,IAAI,CAACF,iBAAiB;EACjC;EACAD,oBAAoBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAACC,iBAAiB,IAAI,IAAI,CAACrI,uBAAuB,CAAC,CAAC;EACnE;EACAgH,oBAAoBA,CAACzH,IAAI,EAAE;IACvB,MAAM/H,IAAI,GAAG+H,IAAI,CAACzJ,QAAQ;IAC1B,MAAM0S,gBAAgB,GAAGjJ,IAAI,CAACiJ,gBAAgB,IAAI,IAAI,CAAC7S,MAAM,CAAC,sBAAsB,CAAC;IACrF,MAAMgE,QAAQ,GAAGnC,IAAI,IAAIA,IAAI,CAACgR,gBAAgB,CAAC;IAC/C,OAAO7O,QAAQ,IAAI4F,IAAI,CAACiH,mBAAmB;EAC/C;EACAY,qBAAqBA,CAAC5Q,YAAY,EAAEiS,UAAU,EAAE;IAC5C,MAAM;MACF3S,QAAQ,EAAEA,QAAQ;MAClBwQ,SAAS,EAAEA,SAAS;MACpBhL,KAAK,EAAEA;IACX,CAAC,GAAGmN,UAAU;IACd,OAAOjS,YAAY,CAACkS,MAAM,CAAC;MACvBC,KAAK,EAAE7S,QAAQ;MACfwQ,SAAS,EAAEA,SAAS;MACpBhL,KAAK,EAAEA,KAAK;MACZsN,UAAU,EAAE,IAAI,CAACC,uBAAuB,CAACrS,YAAY,EAAEiS,UAAU;IACrE,CAAC,CAAC;EACN;EACAI,uBAAuBA,CAACrS,YAAY,EAAEiS,UAAU,EAAE;IAC9C,OAAO,MAAM,CAAC,CAAC;EACnB;EACAK,sBAAsBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACnH,cAAc,CAAC,CAAC;EAChC;EACA5B,mBAAmBA,CAACgJ,SAAS,EAAE;IAC3B,MAAMxS,KAAK,GAAGwS,SAAS,IAAI,IAAI,CAACpT,MAAM,CAAC,OAAO,CAAC;IAC/C,MAAMoB,UAAU,GAAG,IAAI,CAACpB,MAAM,CAAC,YAAY,CAAC;IAC5C,MAAMqT,UAAU,GAAG,CAACjS,UAAU,IAAIR,KAAK,IAAIA,KAAK,CAACV,MAAM,IAAI,IAAI,CAACsB,eAAe,CAAC8R,SAAS,CAAC,CAAC;IAC3F,IAAID,UAAU,IAAI,IAAI,CAACE,QAAQ,EAAE;MAC7B,IAAI,CAACA,QAAQ,CAACrP,MAAM,CAAC,CAAC;MACtB,IAAI,CAACqP,QAAQ,GAAG,IAAI;MACpB,IAAI,CAACtL,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IACjC;IACA,IAAI,CAACoL,UAAU,EAAE;MACb,IAAI,CAACE,QAAQ,GAAG,IAAI,CAACA,QAAQ,IAAI1X,CAAC,CAAC,OAAO,CAAC,CAAC2I,QAAQ,CAAC,kBAAkB,CAAC;MACxE,IAAI,CAAC+O,QAAQ,CAACxB,QAAQ,CAAC,IAAI,CAACoB,sBAAsB,CAAC,CAAC,CAAC;MACrD,IAAI,IAAI,CAACnT,MAAM,CAAC,kBAAkB,CAAC,EAAE;QACjC,IAAI,CAACuT,QAAQ,CAACpQ,IAAI,CAAC/B,UAAU,CAAC;MAClC,CAAC,MAAM;QACH,IAAI,CAACmS,QAAQ,CAACjQ,IAAI,CAAClC,UAAU,CAAC;MAClC;IACJ;IACA,IAAI,CAACoC,QAAQ,CAAC,CAAC,CAACgQ,WAAW,CAAC/V,gBAAgB,EAAE,CAAC4V,UAAU,CAAC;EAC9D;EACAvF,mBAAmBA,CAAC2F,OAAO,EAAEC,iBAAiB,EAAEC,UAAU,EAAEC,YAAY,EAAE;IACtE,IAAI,CAACC,iBAAiB,CAACJ,OAAO,CAAC7T,MAAM,EAAE8T,iBAAiB,EAAEvX,MAAM,CAACwX,UAAU,EAAE;MACzEpT,KAAK,EAAEkT;IACX,CAAC,CAAC,EAAEG,YAAY,CAAC;EACrB;EACAC,iBAAiBA,CAACC,SAAS,EAAEJ,iBAAiB,EAAEC,UAAU,EAAEC,YAAY,EAAE;IACtE,MAAMG,MAAM,GAAG,IAAI,CAACvJ,qBAAqB,CAACkJ,iBAAiB,EAAEvX,MAAM,CAAC;MAChE6X,oBAAoB,EAAE;IAC1B,CAAC,EAAEJ,YAAY,CAAC,CAAC;IACjB,OAAO,IAAI,CAACK,qBAAqB,CAACH,SAAS,EAAEC,MAAM,EAAEJ,UAAU,CAAC;EACpE;EACArT,0BAA0BA,CAACwT,SAAS,EAAEI,OAAO,EAAEP,UAAU,EAAEC,YAAY,EAAE;IACrE,MAAMG,MAAM,GAAG,IAAI,CAACI,aAAa,CAACD,OAAO,EAAE/X,MAAM,CAAC;MAC9C6X,oBAAoB,EAAE;IAC1B,CAAC,EAAEJ,YAAY,CAAC,CAAC;IACjB,OAAO,IAAI,CAACK,qBAAqB,CAACH,SAAS,EAAEC,MAAM,EAAEJ,UAAU,CAAC;EACpE;EACAM,qBAAqBA,CAACH,SAAS,EAAEC,MAAM,EAAEJ,UAAU,EAAE;IACjD,MAAM1T,YAAY,GAAG,IAAI,CAACmU,mBAAmB,CAACvY,CAAC,CAACiY,SAAS,CAAC,CAAC;IAC3D,MAAMlK,IAAI,GAAGzN,MAAM,CAAC,CAAC,CAAC,EAAEwX,UAAU,CAAC;IACnC,OAAOI,MAAM,CAAC5X,MAAM,CAACwX,UAAU,EAAE,IAAI,CAACU,iBAAiB,CAACpU,YAAY,CAAC,EAAE2J,IAAI,CAAC,CAAC;EACjF;EACAyK,iBAAiBA,CAACpU,YAAY,EAAE;IAC5B,OAAO;MACHwI,WAAW,EAAE5L,gBAAgB,CAACoD,YAAY,CAAC;MAC3CgQ,SAAS,EAAE,IAAI,CAACxJ,aAAa,CAAC,CAAC,CAACd,KAAK,CAAC1F,YAAY,CAAC;MACnDE,QAAQ,EAAE,IAAI,CAACC,YAAY,CAACH,YAAY;IAC5C,CAAC;EACL;EACAmU,mBAAmBA,CAAC5Q,QAAQ,EAAE;IAC1B,OAAO3H,CAAC,CAAC2H,QAAQ,CAAC,CAAC0K,OAAO,CAAC,IAAI,CAACvB,aAAa,CAAC,CAAC,CAAC;EACpD;EACAvM,YAAYA,CAACqI,WAAW,EAAE;IACtB,OAAO5M,CAAC,CAAC4M,WAAW,CAAC,CAAC5G,IAAI,CAAC,IAAI,CAAC0G,YAAY,CAAC,CAAC,CAAC;EACnD;EACA+L,oBAAoBA,CAACC,SAAS,EAAE3T,KAAK,EAAE4T,aAAa,EAAE;IAClD,IAAInM,MAAM,GAAG,CAAC;IACd,IAAIzH,KAAK,EAAE;MACPxE,IAAI,CAACwE,KAAK,EAAG,CAAC6T,CAAC,EAAEzR,IAAI,KAAK;QACtB,IAAI,OAAO,KAAKuR,SAAS,EAAE;UACvBlM,MAAM,IAAI/L,aAAa,CAAC0G,IAAI,EAAEwR,aAAa,IAAI,KAAK,CAAC;QACzD,CAAC,MAAM,IAAI,QAAQ,KAAKD,SAAS,EAAE;UAC/BlM,MAAM,IAAIhM,cAAc,CAAC2G,IAAI,EAAEwR,aAAa,IAAI,KAAK,CAAC;QAC1D;MACJ,CAAE,CAAC;IACP;IACA,OAAOnM,MAAM;EACjB;EACAL,gBAAgBA,CAAA,EAAG;IACf,IAAI,CAAC,IAAI,CAAC0M,cAAc,EAAE;MACtB,IAAI,CAACA,cAAc,GAAG,MAAM,IAAI9Y,IAAI,CAAD,CAAC,EAAE;IAC1C;IACA,OAAO,IAAI,CAAC8Y,cAAc;EAC9B;EACAlM,YAAYA,CAAA,EAAG;IACX,OAAO,IAAI,CAAC/B,aAAa,CAAC,CAAC;EAC/B;EACAkO,cAAcA,CAAA,EAAG;IACb,OAAO,IAAI,CAAC3I,cAAc,CAAC,CAAC;EAChC;AACJ;AACA3N,gBAAgB,CAACuW,OAAO,CAACjY,eAAe,CAAC;AACzC0B,gBAAgB,CAAC4K,SAAS,GAAGlM,oBAAoB;AACjD,eAAesB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}