{"ast":null,"code":"/*!\n * devextreme-react\n * Version: 24.2.7\n * Build date: Mon Apr 28 2025\n *\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\nimport { useContext, useRef, useLayoutEffect } from 'react';\nimport { mergeNameParts } from './configuration/utils';\nimport { createConfigBuilder } from './configuration/config-node';\nimport { NestedOptionContext } from './contexts';\nexport function useOptionScanning(optionElement, getHasTemplate, parentUpdateToken, parentType) {\n  const parentContext = useContext(NestedOptionContext);\n  const {\n    parentFullName\n  } = parentContext;\n  const updateToken = Symbol('update token');\n  const configBuilder = createConfigBuilder(optionElement, parentFullName);\n  const childComponentCounter = useRef(0);\n  const context = {\n    parentExpectedChildren: optionElement.descriptor.expectedChildren,\n    parentFullName: mergeNameParts(parentFullName, optionElement.descriptor.name),\n    parentType,\n    treeUpdateToken: updateToken,\n    getOptionComponentKey: () => {\n      childComponentCounter.current += 1;\n      return childComponentCounter.current;\n    },\n    onNamedTemplateReady: (template, childUpdateToken) => {\n      if (childUpdateToken !== updateToken) {\n        return;\n      }\n      if (template) {\n        configBuilder.addTemplate(template);\n      }\n    },\n    onChildOptionsReady: (childConfigNode, childDescriptor, childUpdateToken, childComponentKey) => {\n      if (childUpdateToken !== updateToken) {\n        return;\n      }\n      const {\n        isCollection,\n        name\n      } = childDescriptor;\n      if (isCollection) {\n        configBuilder.addCollectionNode(name, childConfigNode, childComponentKey);\n        return;\n      }\n      configBuilder.addChildNode(name, childConfigNode);\n    }\n  };\n  useLayoutEffect(() => {\n    configBuilder.updateAnonymousTemplates(getHasTemplate());\n  }, [parentUpdateToken]);\n  return [configBuilder.node, context];\n}","map":{"version":3,"names":["useContext","useRef","useLayoutEffect","mergeNameParts","createConfigBuilder","NestedOptionContext","useOptionScanning","optionElement","getHasTemplate","parentUpdateToken","parentType","parentContext","parentFullName","updateToken","Symbol","configBuilder","childComponentCounter","context","parentExpectedChildren","descriptor","expectedChildren","name","treeUpdateToken","getOptionComponentKey","current","onNamedTemplateReady","template","childUpdateToken","addTemplate","onChildOptionsReady","childConfigNode","childDescriptor","childComponentKey","isCollection","addCollectionNode","addChildNode","updateAnonymousTemplates","node"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme-react/esm/core/use-option-scanning.js"],"sourcesContent":["/*!\n * devextreme-react\n * Version: 24.2.7\n * Build date: Mon Apr 28 2025\n *\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\nimport { useContext, useRef, useLayoutEffect, } from 'react';\nimport { mergeNameParts } from './configuration/utils';\nimport { createConfigBuilder } from './configuration/config-node';\nimport { NestedOptionContext } from './contexts';\nexport function useOptionScanning(optionElement, getHasTemplate, parentUpdateToken, parentType) {\n    const parentContext = useContext(NestedOptionContext);\n    const { parentFullName, } = parentContext;\n    const updateToken = Symbol('update token');\n    const configBuilder = createConfigBuilder(optionElement, parentFullName);\n    const childComponentCounter = useRef(0);\n    const context = {\n        parentExpectedChildren: optionElement.descriptor.expectedChildren,\n        parentFullName: mergeNameParts(parentFullName, optionElement.descriptor.name),\n        parentType,\n        treeUpdateToken: updateToken,\n        getOptionComponentKey: () => {\n            childComponentCounter.current += 1;\n            return childComponentCounter.current;\n        },\n        onNamedTemplateReady: (template, childUpdateToken) => {\n            if (childUpdateToken !== updateToken) {\n                return;\n            }\n            if (template) {\n                configBuilder.addTemplate(template);\n            }\n        },\n        onChildOptionsReady: (childConfigNode, childDescriptor, childUpdateToken, childComponentKey) => {\n            if (childUpdateToken !== updateToken) {\n                return;\n            }\n            const { isCollection, name } = childDescriptor;\n            if (isCollection) {\n                configBuilder.addCollectionNode(name, childConfigNode, childComponentKey);\n                return;\n            }\n            configBuilder.addChildNode(name, childConfigNode);\n        },\n    };\n    useLayoutEffect(() => {\n        configBuilder.updateAnonymousTemplates(getHasTemplate());\n    }, [parentUpdateToken]);\n    return [configBuilder.node, context];\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,UAAU,EAAEC,MAAM,EAAEC,eAAe,QAAS,OAAO;AAC5D,SAASC,cAAc,QAAQ,uBAAuB;AACtD,SAASC,mBAAmB,QAAQ,6BAA6B;AACjE,SAASC,mBAAmB,QAAQ,YAAY;AAChD,OAAO,SAASC,iBAAiBA,CAACC,aAAa,EAAEC,cAAc,EAAEC,iBAAiB,EAAEC,UAAU,EAAE;EAC5F,MAAMC,aAAa,GAAGX,UAAU,CAACK,mBAAmB,CAAC;EACrD,MAAM;IAAEO;EAAgB,CAAC,GAAGD,aAAa;EACzC,MAAME,WAAW,GAAGC,MAAM,CAAC,cAAc,CAAC;EAC1C,MAAMC,aAAa,GAAGX,mBAAmB,CAACG,aAAa,EAAEK,cAAc,CAAC;EACxE,MAAMI,qBAAqB,GAAGf,MAAM,CAAC,CAAC,CAAC;EACvC,MAAMgB,OAAO,GAAG;IACZC,sBAAsB,EAAEX,aAAa,CAACY,UAAU,CAACC,gBAAgB;IACjER,cAAc,EAAET,cAAc,CAACS,cAAc,EAAEL,aAAa,CAACY,UAAU,CAACE,IAAI,CAAC;IAC7EX,UAAU;IACVY,eAAe,EAAET,WAAW;IAC5BU,qBAAqB,EAAEA,CAAA,KAAM;MACzBP,qBAAqB,CAACQ,OAAO,IAAI,CAAC;MAClC,OAAOR,qBAAqB,CAACQ,OAAO;IACxC,CAAC;IACDC,oBAAoB,EAAEA,CAACC,QAAQ,EAAEC,gBAAgB,KAAK;MAClD,IAAIA,gBAAgB,KAAKd,WAAW,EAAE;QAClC;MACJ;MACA,IAAIa,QAAQ,EAAE;QACVX,aAAa,CAACa,WAAW,CAACF,QAAQ,CAAC;MACvC;IACJ,CAAC;IACDG,mBAAmB,EAAEA,CAACC,eAAe,EAAEC,eAAe,EAAEJ,gBAAgB,EAAEK,iBAAiB,KAAK;MAC5F,IAAIL,gBAAgB,KAAKd,WAAW,EAAE;QAClC;MACJ;MACA,MAAM;QAAEoB,YAAY;QAAEZ;MAAK,CAAC,GAAGU,eAAe;MAC9C,IAAIE,YAAY,EAAE;QACdlB,aAAa,CAACmB,iBAAiB,CAACb,IAAI,EAAES,eAAe,EAAEE,iBAAiB,CAAC;QACzE;MACJ;MACAjB,aAAa,CAACoB,YAAY,CAACd,IAAI,EAAES,eAAe,CAAC;IACrD;EACJ,CAAC;EACD5B,eAAe,CAAC,MAAM;IAClBa,aAAa,CAACqB,wBAAwB,CAAC5B,cAAc,CAAC,CAAC,CAAC;EAC5D,CAAC,EAAE,CAACC,iBAAiB,CAAC,CAAC;EACvB,OAAO,CAACM,aAAa,CAACsB,IAAI,EAAEpB,OAAO,CAAC;AACxC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}