{"ast":null,"code":"/*!\n * devextreme-react\n * Version: 24.2.7\n * Build date: Mon Apr 28 2025\n *\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\nimport * as React from 'react';\nimport * as events from 'devextreme/events';\nimport { useCallback, useLayoutEffect, useEffect, useState, useRef, useMemo, memo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { DX_REMOVE_EVENT } from './component-base';\nimport { RemovalLockerContext } from './contexts';\nconst createHiddenNode = (containerNodeName, ref, defaultElement) => {\n  const style = {\n    display: 'none'\n  };\n  switch (containerNodeName) {\n    case 'TABLE':\n      return React.createElement(\"tbody\", {\n        style: style,\n        ref: ref\n      });\n    case 'TBODY':\n      return React.createElement(\"tr\", {\n        style: style,\n        ref: ref\n      });\n    default:\n      return React.createElement(defaultElement, {\n        style,\n        ref\n      });\n  }\n};\nconst TemplateWrapperComponent = ({\n  templateFactory,\n  data,\n  index,\n  container,\n  onRemoved,\n  onRendered\n}) => {\n  const [removalListenerRequired, setRemovalListenerRequired] = useState(false);\n  const isRemovalLocked = useRef(false);\n  const removalLocker = useMemo(() => ({\n    lock() {\n      isRemovalLocked.current = true;\n    },\n    unlock() {\n      isRemovalLocked.current = false;\n    }\n  }), []);\n  const element = useRef();\n  const hiddenNodeElement = useRef();\n  const removalListenerElement = useRef();\n  const onTemplateRemoved = useCallback((_, args) => {\n    if (args?.isUnmounting || isRemovalLocked.current) {\n      return;\n    }\n    if (element.current) {\n      events.off(element.current, DX_REMOVE_EVENT, onTemplateRemoved);\n    }\n    if (removalListenerElement.current) {\n      events.off(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);\n    }\n    onRemoved();\n  }, [onRemoved]);\n  useLayoutEffect(() => {\n    const el = element.current;\n    if (el && el.nodeType === Node.ELEMENT_NODE) {\n      events.off(el, DX_REMOVE_EVENT, onTemplateRemoved);\n      events.on(el, DX_REMOVE_EVENT, onTemplateRemoved);\n    } else if (!removalListenerRequired) {\n      setRemovalListenerRequired(true);\n    } else if (removalListenerElement.current) {\n      events.off(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);\n      events.on(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);\n    }\n    return () => {\n      const safeAppend = child => {\n        if (child?.current && container && !container.contains(child.current)) {\n          container.appendChild(child.current);\n        }\n      };\n      safeAppend(element);\n      safeAppend(hiddenNodeElement);\n      safeAppend(removalListenerElement);\n      if (el) {\n        events.off(el, DX_REMOVE_EVENT, onTemplateRemoved);\n      }\n    };\n  }, [onTemplateRemoved, removalListenerRequired, container]);\n  useEffect(() => {\n    onRendered();\n  }, [onRendered]);\n  const hiddenNode = createHiddenNode(container?.nodeName, node => {\n    hiddenNodeElement.current = node;\n    element.current = node?.previousSibling;\n  }, 'div');\n  const removalListener = removalListenerRequired ? createHiddenNode(container?.nodeName, node => {\n    removalListenerElement.current = node;\n  }, 'span') : undefined;\n  return createPortal(React.createElement(React.Fragment, null, React.createElement(RemovalLockerContext.Provider, {\n    value: removalLocker\n  }, templateFactory({\n    data,\n    index,\n    onRendered\n  }), hiddenNode, removalListener)), container);\n};\nexport const TemplateWrapper = memo(TemplateWrapperComponent);","map":{"version":3,"names":["React","events","useCallback","useLayoutEffect","useEffect","useState","useRef","useMemo","memo","createPortal","DX_REMOVE_EVENT","RemovalLockerContext","createHiddenNode","containerNodeName","ref","defaultElement","style","display","createElement","TemplateWrapperComponent","templateFactory","data","index","container","onRemoved","onRendered","removalListenerRequired","setRemovalListenerRequired","isRemovalLocked","removalLocker","lock","current","unlock","element","hiddenNodeElement","removalListenerElement","onTemplateRemoved","_","args","isUnmounting","off","el","nodeType","Node","ELEMENT_NODE","on","safeAppend","child","contains","appendChild","hiddenNode","nodeName","node","previousSibling","removalListener","undefined","Fragment","Provider","value","TemplateWrapper"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme-react/esm/core/template-wrapper.js"],"sourcesContent":["/*!\n * devextreme-react\n * Version: 24.2.7\n * Build date: Mon Apr 28 2025\n *\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\nimport * as React from 'react';\nimport * as events from 'devextreme/events';\nimport { useCallback, useLayoutEffect, useEffect, useState, useRef, useMemo, memo, } from 'react';\nimport { createPortal } from 'react-dom';\nimport { DX_REMOVE_EVENT } from './component-base';\nimport { RemovalLockerContext } from './contexts';\nconst createHiddenNode = (containerNodeName, ref, defaultElement) => {\n    const style = { display: 'none' };\n    switch (containerNodeName) {\n        case 'TABLE':\n            return React.createElement(\"tbody\", { style: style, ref: ref });\n        case 'TBODY':\n            return React.createElement(\"tr\", { style: style, ref: ref });\n        default:\n            return React.createElement(defaultElement, { style, ref });\n    }\n};\nconst TemplateWrapperComponent = ({ templateFactory, data, index, container, onRemoved, onRendered, }) => {\n    const [removalListenerRequired, setRemovalListenerRequired] = useState(false);\n    const isRemovalLocked = useRef(false);\n    const removalLocker = useMemo(() => ({\n        lock() { isRemovalLocked.current = true; },\n        unlock() { isRemovalLocked.current = false; },\n    }), []);\n    const element = useRef();\n    const hiddenNodeElement = useRef();\n    const removalListenerElement = useRef();\n    const onTemplateRemoved = useCallback((_, args) => {\n        if (args?.isUnmounting || isRemovalLocked.current) {\n            return;\n        }\n        if (element.current) {\n            events.off(element.current, DX_REMOVE_EVENT, onTemplateRemoved);\n        }\n        if (removalListenerElement.current) {\n            events.off(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);\n        }\n        onRemoved();\n    }, [onRemoved]);\n    useLayoutEffect(() => {\n        const el = element.current;\n        if (el && el.nodeType === Node.ELEMENT_NODE) {\n            events.off(el, DX_REMOVE_EVENT, onTemplateRemoved);\n            events.on(el, DX_REMOVE_EVENT, onTemplateRemoved);\n        }\n        else if (!removalListenerRequired) {\n            setRemovalListenerRequired(true);\n        }\n        else if (removalListenerElement.current) {\n            events.off(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);\n            events.on(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);\n        }\n        return () => {\n            const safeAppend = (child) => {\n                if (child?.current && container && !container.contains(child.current)) {\n                    container.appendChild(child.current);\n                }\n            };\n            safeAppend(element);\n            safeAppend(hiddenNodeElement);\n            safeAppend(removalListenerElement);\n            if (el) {\n                events.off(el, DX_REMOVE_EVENT, onTemplateRemoved);\n            }\n        };\n    }, [onTemplateRemoved, removalListenerRequired, container]);\n    useEffect(() => {\n        onRendered();\n    }, [onRendered]);\n    const hiddenNode = createHiddenNode(container?.nodeName, (node) => {\n        hiddenNodeElement.current = node;\n        element.current = node?.previousSibling;\n    }, 'div');\n    const removalListener = removalListenerRequired\n        ? createHiddenNode(container?.nodeName, (node) => { removalListenerElement.current = node; }, 'span')\n        : undefined;\n    return createPortal(React.createElement(React.Fragment, null,\n        React.createElement(RemovalLockerContext.Provider, { value: removalLocker },\n            templateFactory({ data, index, onRendered }),\n            hiddenNode,\n            removalListener)), container);\n};\nexport const TemplateWrapper = memo(TemplateWrapperComponent);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}