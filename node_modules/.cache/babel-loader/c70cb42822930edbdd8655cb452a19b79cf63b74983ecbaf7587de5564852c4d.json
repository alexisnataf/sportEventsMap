{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/events/core/m_emitter.feedback.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Emitter from \"../../../common/core/events/core/emitter\";\nimport registerEmitter from \"../../../common/core/events/core/emitter_registrator\";\nimport pointerEvents from \"../../../common/core/events/pointer\";\nimport { isMouseEvent } from \"../../../common/core/events/utils/index\";\nimport Class from \"../../../core/class\";\nimport { ensureDefined, noop } from \"../../../core/utils/common\";\nimport { contains } from \"../../../core/utils/dom\";\nimport devices from \"../../core/m_devices\";\nconst ACTIVE_EVENT_NAME = \"dxactive\";\nconst INACTIVE_EVENT_NAME = \"dxinactive\";\nconst ACTIVE_TIMEOUT = 30;\nconst INACTIVE_TIMEOUT = 400;\nconst FeedbackEvent = Class.inherit({\n  ctor(timeout, fire) {\n    this._timeout = timeout;\n    this._fire = fire;\n  },\n  start() {\n    const that = this;\n    this._schedule(() => {\n      that.force();\n    });\n  },\n  _schedule(fn) {\n    this.stop();\n    this._timer = setTimeout(fn, this._timeout);\n  },\n  stop() {\n    clearTimeout(this._timer);\n  },\n  force() {\n    if (this._fired) {\n      return;\n    }\n    this.stop();\n    this._fire();\n    this._fired = true;\n  },\n  fired() {\n    return this._fired;\n  }\n});\nlet activeFeedback;\nconst FeedbackEmitter = Emitter.inherit({\n  ctor() {\n    this.callBase.apply(this, arguments);\n    this._active = new FeedbackEvent(0, noop);\n    this._inactive = new FeedbackEvent(0, noop);\n  },\n  configure(data, eventName) {\n    switch (eventName) {\n      case \"dxactive\":\n        data.activeTimeout = data.timeout;\n        break;\n      case \"dxinactive\":\n        data.inactiveTimeout = data.timeout;\n    }\n    this.callBase(data);\n  },\n  start(e) {\n    if (activeFeedback) {\n      const activeChildExists = contains(this.getElement().get(0), activeFeedback.getElement().get(0));\n      const childJustActivated = !activeFeedback._active.fired();\n      if (activeChildExists && childJustActivated) {\n        this._cancel();\n        return;\n      }\n      activeFeedback._inactive.force();\n    }\n    activeFeedback = this;\n    this._initEvents(e);\n    this._active.start();\n  },\n  _initEvents(e) {\n    const that = this;\n    const eventTarget = this._getEmitterTarget(e);\n    const mouseEvent = isMouseEvent(e);\n    const isSimulator = devices.isSimulator();\n    const deferFeedback = isSimulator || !mouseEvent;\n    const activeTimeout = ensureDefined(this.activeTimeout, 30);\n    const inactiveTimeout = ensureDefined(this.inactiveTimeout, 400);\n    this._active = new FeedbackEvent(deferFeedback ? activeTimeout : 0, () => {\n      that._fireEvent(\"dxactive\", e, {\n        target: eventTarget\n      });\n    });\n    this._inactive = new FeedbackEvent(deferFeedback ? inactiveTimeout : 0, () => {\n      that._fireEvent(\"dxinactive\", e, {\n        target: eventTarget\n      });\n      activeFeedback = null;\n    });\n  },\n  cancel(e) {\n    this.end(e);\n  },\n  end(e) {\n    const skipTimers = e.type !== pointerEvents.up;\n    if (skipTimers) {\n      this._active.stop();\n    } else {\n      this._active.force();\n    }\n    this._inactive.start();\n    if (skipTimers) {\n      this._inactive.force();\n    }\n  },\n  dispose() {\n    this._active.stop();\n    this._inactive.stop();\n    if (activeFeedback === this) {\n      activeFeedback = null;\n    }\n    this.callBase();\n  },\n  lockInactive() {\n    this._active.force();\n    this._inactive.stop();\n    activeFeedback = null;\n    this._cancel();\n    return this._inactive.force.bind(this._inactive);\n  }\n});\nFeedbackEmitter.lock = function (deferred) {\n  const lockInactive = activeFeedback ? activeFeedback.lockInactive() : noop;\n  deferred.done(lockInactive);\n};\nregisterEmitter({\n  emitter: FeedbackEmitter,\n  events: [\"dxactive\", \"dxinactive\"]\n});\nexport const {\n  lock: lock\n} = FeedbackEmitter;\nexport { ACTIVE_EVENT_NAME as active, INACTIVE_EVENT_NAME as inactive };","map":{"version":3,"names":["Emitter","registerEmitter","pointerEvents","isMouseEvent","Class","ensureDefined","noop","contains","devices","ACTIVE_EVENT_NAME","INACTIVE_EVENT_NAME","ACTIVE_TIMEOUT","INACTIVE_TIMEOUT","FeedbackEvent","inherit","ctor","timeout","fire","_timeout","_fire","start","that","_schedule","force","fn","stop","_timer","setTimeout","clearTimeout","_fired","fired","activeFeedback","FeedbackEmitter","callBase","apply","arguments","_active","_inactive","configure","data","eventName","activeTimeout","inactiveTimeout","e","activeChildExists","getElement","get","childJustActivated","_cancel","_initEvents","eventTarget","_getEmitterTarget","mouseEvent","isSimulator","deferFeedback","_fireEvent","target","cancel","end","skipTimers","type","up","dispose","lockInactive","bind","lock","deferred","done","emitter","events","active","inactive"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme/esm/__internal/events/core/m_emitter.feedback.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/events/core/m_emitter.feedback.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Emitter from \"../../../common/core/events/core/emitter\";\r\nimport registerEmitter from \"../../../common/core/events/core/emitter_registrator\";\r\nimport pointerEvents from \"../../../common/core/events/pointer\";\r\nimport {\r\n    isMouseEvent\r\n} from \"../../../common/core/events/utils/index\";\r\nimport Class from \"../../../core/class\";\r\nimport {\r\n    ensureDefined,\r\n    noop\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    contains\r\n} from \"../../../core/utils/dom\";\r\nimport devices from \"../../core/m_devices\";\r\nconst ACTIVE_EVENT_NAME = \"dxactive\";\r\nconst INACTIVE_EVENT_NAME = \"dxinactive\";\r\nconst ACTIVE_TIMEOUT = 30;\r\nconst INACTIVE_TIMEOUT = 400;\r\nconst FeedbackEvent = Class.inherit({\r\n    ctor(timeout, fire) {\r\n        this._timeout = timeout;\r\n        this._fire = fire\r\n    },\r\n    start() {\r\n        const that = this;\r\n        this._schedule((() => {\r\n            that.force()\r\n        }))\r\n    },\r\n    _schedule(fn) {\r\n        this.stop();\r\n        this._timer = setTimeout(fn, this._timeout)\r\n    },\r\n    stop() {\r\n        clearTimeout(this._timer)\r\n    },\r\n    force() {\r\n        if (this._fired) {\r\n            return\r\n        }\r\n        this.stop();\r\n        this._fire();\r\n        this._fired = true\r\n    },\r\n    fired() {\r\n        return this._fired\r\n    }\r\n});\r\nlet activeFeedback;\r\nconst FeedbackEmitter = Emitter.inherit({\r\n    ctor() {\r\n        this.callBase.apply(this, arguments);\r\n        this._active = new FeedbackEvent(0, noop);\r\n        this._inactive = new FeedbackEvent(0, noop)\r\n    },\r\n    configure(data, eventName) {\r\n        switch (eventName) {\r\n            case \"dxactive\":\r\n                data.activeTimeout = data.timeout;\r\n                break;\r\n            case \"dxinactive\":\r\n                data.inactiveTimeout = data.timeout\r\n        }\r\n        this.callBase(data)\r\n    },\r\n    start(e) {\r\n        if (activeFeedback) {\r\n            const activeChildExists = contains(this.getElement().get(0), activeFeedback.getElement().get(0));\r\n            const childJustActivated = !activeFeedback._active.fired();\r\n            if (activeChildExists && childJustActivated) {\r\n                this._cancel();\r\n                return\r\n            }\r\n            activeFeedback._inactive.force()\r\n        }\r\n        activeFeedback = this;\r\n        this._initEvents(e);\r\n        this._active.start()\r\n    },\r\n    _initEvents(e) {\r\n        const that = this;\r\n        const eventTarget = this._getEmitterTarget(e);\r\n        const mouseEvent = isMouseEvent(e);\r\n        const isSimulator = devices.isSimulator();\r\n        const deferFeedback = isSimulator || !mouseEvent;\r\n        const activeTimeout = ensureDefined(this.activeTimeout, 30);\r\n        const inactiveTimeout = ensureDefined(this.inactiveTimeout, 400);\r\n        this._active = new FeedbackEvent(deferFeedback ? activeTimeout : 0, (() => {\r\n            that._fireEvent(\"dxactive\", e, {\r\n                target: eventTarget\r\n            })\r\n        }));\r\n        this._inactive = new FeedbackEvent(deferFeedback ? inactiveTimeout : 0, (() => {\r\n            that._fireEvent(\"dxinactive\", e, {\r\n                target: eventTarget\r\n            });\r\n            activeFeedback = null\r\n        }))\r\n    },\r\n    cancel(e) {\r\n        this.end(e)\r\n    },\r\n    end(e) {\r\n        const skipTimers = e.type !== pointerEvents.up;\r\n        if (skipTimers) {\r\n            this._active.stop()\r\n        } else {\r\n            this._active.force()\r\n        }\r\n        this._inactive.start();\r\n        if (skipTimers) {\r\n            this._inactive.force()\r\n        }\r\n    },\r\n    dispose() {\r\n        this._active.stop();\r\n        this._inactive.stop();\r\n        if (activeFeedback === this) {\r\n            activeFeedback = null\r\n        }\r\n        this.callBase()\r\n    },\r\n    lockInactive() {\r\n        this._active.force();\r\n        this._inactive.stop();\r\n        activeFeedback = null;\r\n        this._cancel();\r\n        return this._inactive.force.bind(this._inactive)\r\n    }\r\n});\r\nFeedbackEmitter.lock = function(deferred) {\r\n    const lockInactive = activeFeedback ? activeFeedback.lockInactive() : noop;\r\n    deferred.done(lockInactive)\r\n};\r\nregisterEmitter({\r\n    emitter: FeedbackEmitter,\r\n    events: [\"dxactive\", \"dxinactive\"]\r\n});\r\nexport const {\r\n    lock: lock\r\n} = FeedbackEmitter;\r\nexport {\r\n    ACTIVE_EVENT_NAME as active, INACTIVE_EVENT_NAME as inactive\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}