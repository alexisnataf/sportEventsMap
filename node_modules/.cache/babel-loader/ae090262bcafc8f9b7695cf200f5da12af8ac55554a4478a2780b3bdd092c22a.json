{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/ui/overlay/m_overlay.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { fx } from \"../../../common/core/animation\";\nimport { hideCallback as hideTopOverlayCallback } from \"../../../common/core/environment/hide_callback\";\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\nimport { move as dragEventMove } from \"../../../common/core/events/drag\";\nimport pointerEvents from \"../../../common/core/events/pointer\";\nimport { keyboard } from \"../../../common/core/events/short\";\nimport { addNamespace, isCommandKeyPressed, normalizeKeyName } from \"../../../common/core/events/utils/index\";\nimport { triggerHidingEvent, triggerResizeEvent, triggerShownEvent } from \"../../../common/core/events/visibility_change\";\nimport registerComponent from \"../../../core/component_registrator\";\nimport devices from \"../../../core/devices\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport { getPublicElement } from \"../../../core/element\";\nimport errors from \"../../../core/errors\";\nimport $ from \"../../../core/renderer\";\nimport { EmptyTemplate } from \"../../../core/templates/empty_template\";\nimport browser from \"../../../core/utils/browser\";\nimport { noop } from \"../../../core/utils/common\";\nimport { Deferred } from \"../../../core/utils/deferred\";\nimport { extend } from \"../../../core/utils/extend\";\nimport { each } from \"../../../core/utils/iterator\";\nimport readyCallbacks from \"../../../core/utils/ready_callbacks\";\nimport { getOuterHeight, getOuterWidth } from \"../../../core/utils/size\";\nimport { isFunction, isObject, isPromise, isWindow } from \"../../../core/utils/type\";\nimport { changeCallback } from \"../../../core/utils/view_port\";\nimport { tabbable } from \"../../../ui/widget/selectors\";\nimport uiErrors from \"../../../ui/widget/ui.errors\";\nimport domUtils from \"../../core/utils/m_dom\";\nimport Widget from \"../../core/widget/widget\";\nimport windowUtils from \"../../core/utils/m_window\";\nimport { OVERLAY_POSITION_ALIASES, OverlayPositionController } from \"./m_overlay_position_controller\";\nimport * as zIndexPool from \"./m_z_index\";\nconst ready = readyCallbacks.add;\nconst window = windowUtils.getWindow();\nconst viewPortChanged = changeCallback;\nconst OVERLAY_CLASS = \"dx-overlay\";\nconst OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\nconst OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\nconst OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\nconst INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\nconst INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\nconst ANONYMOUS_TEMPLATE_NAME = \"content\";\nconst RTL_DIRECTION_CLASS = \"dx-rtl\";\nconst OVERLAY_STACK = [];\nconst PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\nconst TAB_KEY = \"tab\";\nready(() => {\n  eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, e => {\n    for (let i = OVERLAY_STACK.length - 1; i >= 0; i--) {\n      if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\n        return;\n      }\n    }\n  });\n});\nclass Overlay extends Widget {\n  _supportedKeys() {\n    return _extends({}, super._supportedKeys(), {\n      escape() {\n        this.hide();\n      }\n    });\n  }\n  _getDefaultOptions() {\n    return _extends({}, super._getDefaultOptions(), {\n      activeStateEnabled: false,\n      visible: false,\n      deferRendering: true,\n      shading: true,\n      shadingColor: \"\",\n      wrapperAttr: {},\n      position: extend({}, OVERLAY_POSITION_ALIASES.center),\n      width: \"80vw\",\n      minWidth: null,\n      maxWidth: null,\n      height: \"80vh\",\n      minHeight: null,\n      maxHeight: null,\n      animation: {\n        show: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            scale: .55\n          }\n        },\n        hide: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            opacity: 1,\n            scale: 1\n          },\n          to: {\n            opacity: 0,\n            scale: .55\n          }\n        }\n      },\n      closeOnOutsideClick: false,\n      hideOnOutsideClick: false,\n      _ignorePreventScrollEventsDeprecation: false,\n      onShowing: null,\n      onShown: null,\n      onHiding: null,\n      onHidden: null,\n      contentTemplate: \"content\",\n      innerOverlay: false,\n      restorePosition: true,\n      hideTopOverlayHandler: () => {\n        this.hide();\n      },\n      hideOnParentScroll: false,\n      preventScrollEvents: true,\n      onPositioned: null,\n      propagateOutsideClick: false,\n      ignoreChildEvents: true,\n      _checkParentVisibility: true,\n      _fixWrapperPosition: false,\n      _loopFocus: false\n    });\n  }\n  _defaultOptionsRules() {\n    return super._defaultOptionsRules().concat([{\n      device: () => !windowUtils.hasWindow(),\n      options: {\n        width: null,\n        height: null,\n        animation: null,\n        _checkParentVisibility: false\n      }\n    }]);\n  }\n  _setOptionsByReference() {\n    super._setOptionsByReference();\n    extend(this._optionsByReference, {\n      animation: true\n    });\n  }\n  $wrapper() {\n    return this._$wrapper;\n  }\n  _eventBindingTarget() {\n    return this._$content;\n  }\n  _setDeprecatedOptions() {\n    super._setDeprecatedOptions();\n    extend(this._deprecatedOptions, {\n      closeOnOutsideClick: {\n        since: \"22.1\",\n        alias: \"hideOnOutsideClick\"\n      }\n    });\n  }\n  ctor(element, options) {\n    super.ctor(element, options);\n    if (options) {\n      if (\"preventScrollEvents\" in options && !options._ignorePreventScrollEventsDeprecation) {\n        this._logDeprecatedPreventScrollEventsInfo();\n      }\n    }\n  }\n  _logDeprecatedPreventScrollEventsInfo() {\n    this._logDeprecatedOptionWarning(\"preventScrollEvents\", {\n      since: \"23.1\",\n      message: \"If you enable this option, end-users may experience scrolling issues.\"\n    });\n  }\n  _init() {\n    super._init();\n    this._initActions();\n    this._initHideOnOutsideClickHandler();\n    this._initTabTerminatorHandler();\n    this._customWrapperClass = null;\n    this._$wrapper = $(\"<div>\").addClass(\"dx-overlay-wrapper\");\n    this._$content = $(\"<div>\").addClass(\"dx-overlay-content\");\n    this._initInnerOverlayClass();\n    const $element = this.$element();\n    $element.addClass(\"dx-overlay\");\n    this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\n    this._toggleViewPortSubscription(true);\n    const {\n      hideTopOverlayHandler: hideTopOverlayHandler\n    } = this.option();\n    this._initHideTopOverlayHandler(hideTopOverlayHandler);\n    this._parentsScrollSubscriptionInfo = {\n      handler: e => {\n        this._hideOnParentsScrollHandler(e);\n      }\n    };\n    this.warnPositionAsFunction();\n  }\n  warnPositionAsFunction() {\n    if (isFunction(this.option(\"position\"))) {\n      errors.log(\"W0018\");\n    }\n  }\n  _initInnerOverlayClass() {\n    const {\n      innerOverlay: innerOverlay\n    } = this.option();\n    this._$content.toggleClass(\"dx-inner-overlay\", innerOverlay);\n  }\n  _initHideTopOverlayHandler(handler) {\n    this._hideTopOverlayHandler = handler;\n  }\n  _getActionsList() {\n    return [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onVisualPositionChanged\"];\n  }\n  _initActions() {\n    this._actions = {};\n    const actions = this._getActionsList();\n    each(actions, (_, action) => {\n      this._actions[action] = this._createActionByOption(action, {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }) || noop;\n    });\n  }\n  _initHideOnOutsideClickHandler() {\n    var _this = this;\n    this._proxiedDocumentDownHandler = function () {\n      return _this._documentDownHandler(...arguments);\n    };\n  }\n  _initMarkup() {\n    super._initMarkup();\n    this._renderWrapperAttributes();\n    this._initPositionController();\n  }\n  _documentDownHandler(e) {\n    if (this._showAnimationProcessing) {\n      this._stopAnimation();\n    }\n    const isAttachedTarget = $(window.document).is(e.target) || domUtils.contains(window.document, e.target);\n    const isInnerOverlay = $(e.target).closest(\".dx-inner-overlay\").length;\n    const outsideClick = isAttachedTarget && !isInnerOverlay && !(this._$content.is(e.target) || domUtils.contains(this._$content.get(0), e.target));\n    if (outsideClick && this._shouldHideOnOutsideClick(e)) {\n      this._outsideClickHandler(e);\n    }\n    const {\n      propagateOutsideClick: propagateOutsideClick\n    } = this.option();\n    return propagateOutsideClick;\n  }\n  _shouldHideOnOutsideClick(e) {\n    const {\n      hideOnOutsideClick: hideOnOutsideClick\n    } = this.option();\n    if (isFunction(hideOnOutsideClick)) {\n      return hideOnOutsideClick(e);\n    }\n    return hideOnOutsideClick;\n  }\n  _outsideClickHandler(e) {\n    if (this.option(\"shading\")) {\n      e.preventDefault();\n    }\n    this.hide();\n  }\n  _getAnonymousTemplateName() {\n    return \"content\";\n  }\n  _initTemplates() {\n    this._templateManager.addDefaultTemplates({\n      content: new EmptyTemplate()\n    });\n    super._initTemplates();\n  }\n  _isTopOverlay() {\n    const overlayStack = this._overlayStack();\n    for (let i = overlayStack.length - 1; i >= 0; i--) {\n      const tabbableElements = overlayStack[i]._findTabbableBounds();\n      if (tabbableElements.first || tabbableElements.last) {\n        return overlayStack[i] === this;\n      }\n    }\n    return false;\n  }\n  _overlayStack() {\n    return OVERLAY_STACK;\n  }\n  _zIndexInitValue() {\n    return Overlay.baseZIndex();\n  }\n  _toggleViewPortSubscription(toggle) {\n    var _this2 = this;\n    viewPortChanged.remove(this._viewPortChangeHandle);\n    if (toggle) {\n      this._viewPortChangeHandle = function () {\n        _this2._viewPortChangeHandler(...arguments);\n      };\n      viewPortChanged.add(this._viewPortChangeHandle);\n    }\n  }\n  _viewPortChangeHandler() {\n    this._positionController.updateContainer(this.option(\"container\"));\n    this._refresh();\n  }\n  _renderWrapperAttributes() {\n    const {\n      wrapperAttr: wrapperAttr\n    } = this.option();\n    const attributes = extend({}, wrapperAttr);\n    const classNames = attributes.class;\n    delete attributes.class;\n    this.$wrapper().attr(attributes).removeClass(this._customWrapperClass).addClass(classNames);\n    this._customWrapperClass = classNames;\n  }\n  _renderVisibilityAnimate(visible) {\n    this._stopAnimation();\n    return visible ? this._show() : this._hide();\n  }\n  _getAnimationConfig() {\n    return this._getOptionValue(\"animation\", this);\n  }\n  _toggleBodyScroll(enabled) {}\n  _animateShowing() {\n    var _this3 = this;\n    const animation = this._getAnimationConfig() ?? {};\n    const showAnimation = this._normalizeAnimation(animation.show, \"to\");\n    const startShowAnimation = (null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.start) ?? noop;\n    const completeShowAnimation = (null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.complete) ?? noop;\n    this._animate(showAnimation, function () {\n      if (_this3._isAnimationPaused) {\n        return;\n      }\n      if (_this3.option(\"focusStateEnabled\")) {\n        eventsEngine.trigger(_this3._focusTarget(), \"focus\");\n      }\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      completeShowAnimation.call(_this3, ...args);\n      _this3._showAnimationProcessing = false;\n      _this3._isHidden = false;\n      _this3._actions.onShown();\n      _this3._toggleSafariScrolling();\n      _this3._showingDeferred.resolve();\n    }, function () {\n      if (_this3._isAnimationPaused) {\n        return;\n      }\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      startShowAnimation.call(_this3, ...args);\n      _this3._showAnimationProcessing = true;\n    });\n  }\n  _processShowingHidingCancel(cancelArg, applyFunction, cancelFunction) {\n    if (isPromise(cancelArg)) {\n      cancelArg.then(shouldCancel => {\n        if (shouldCancel) {\n          cancelFunction();\n        } else {\n          applyFunction();\n        }\n      }).catch(() => applyFunction());\n    } else {\n      cancelArg ? cancelFunction() : applyFunction();\n    }\n  }\n  _show() {\n    this._showingDeferred = Deferred();\n    this._parentHidden = this._isParentHidden();\n    this._showingDeferred.done(() => {\n      delete this._parentHidden;\n    });\n    if (this._parentHidden) {\n      this._isHidden = true;\n      return this._showingDeferred.resolve();\n    }\n    if (this._currentVisible) {\n      return Deferred().resolve().promise();\n    }\n    this._currentVisible = true;\n    if (this._isHidingActionCanceled) {\n      delete this._isHidingActionCanceled;\n      this._showingDeferred.reject();\n    } else {\n      const show = () => {\n        this._stopAnimation();\n        const {\n          enableBodyScroll: enableBodyScroll\n        } = this.option();\n        this._toggleBodyScroll(enableBodyScroll);\n        this._toggleVisibility(true);\n        this._$content.css(\"visibility\", \"hidden\");\n        this._$content.toggleClass(\"dx-state-invisible\", false);\n        this._updateZIndexStackPosition(true);\n        this._positionController.openingHandled();\n        this._renderContent();\n        const showingArgs = {\n          cancel: false\n        };\n        this._actions.onShowing(showingArgs);\n        this._processShowingHidingCancel(showingArgs.cancel, () => {\n          this._$content.css(\"visibility\", \"\");\n          this._renderVisibility(true);\n          this._animateShowing();\n        }, () => {\n          this._toggleVisibility(false);\n          this._$content.css(\"visibility\", \"\");\n          this._$content.toggleClass(\"dx-state-invisible\", true);\n          this._isShowingActionCanceled = true;\n          this._moveFromContainer();\n          this._toggleBodyScroll(true);\n          this.option(\"visible\", false);\n          this._showingDeferred.resolve();\n        });\n      };\n      if (this.option(\"templatesRenderAsynchronously\")) {\n        this._stopShowTimer();\n        this._asyncShowTimeout = setTimeout(show);\n      } else {\n        show();\n      }\n    }\n    return this._showingDeferred.promise();\n  }\n  _normalizeAnimation(showHideConfig, direction) {\n    if (showHideConfig) {\n      showHideConfig = extend({\n        type: \"slide\",\n        skipElementInitialStyles: true\n      }, showHideConfig);\n      if (isObject(showHideConfig[direction])) {\n        extend(showHideConfig[direction], {\n          position: this._positionController.position\n        });\n      }\n    }\n    return showHideConfig;\n  }\n  _animateHiding() {\n    var _this4 = this;\n    const animation = this._getAnimationConfig() ?? {};\n    const hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\n    const startHideAnimation = (null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.start) ?? noop;\n    const completeHideAnimation = (null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.complete) ?? noop;\n    this._animate(hideAnimation, function () {\n      var _this4$_actions;\n      _this4._$content.css(\"pointerEvents\", \"\");\n      _this4._renderVisibility(false);\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      completeHideAnimation.call(_this4, ...args);\n      _this4._hideAnimationProcessing = false;\n      null === (_this4$_actions = _this4._actions) || void 0 === _this4$_actions || _this4$_actions.onHidden();\n      _this4._hidingDeferred.resolve();\n    }, function () {\n      _this4._$content.css(\"pointerEvents\", \"none\");\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      startHideAnimation.call(_this4, ...args);\n      _this4._hideAnimationProcessing = true;\n    });\n  }\n  _hide() {\n    if (!this._currentVisible) {\n      return Deferred().resolve().promise();\n    }\n    this._currentVisible = false;\n    this._hidingDeferred = Deferred();\n    const hidingArgs = {\n      cancel: false\n    };\n    if (this._isShowingActionCanceled) {\n      delete this._isShowingActionCanceled;\n      this._hidingDeferred.reject();\n    } else {\n      this._actions.onHiding(hidingArgs);\n      this._toggleSafariScrolling();\n      this._toggleBodyScroll(true);\n      const cancelHide = () => {\n        this._isHidingActionCanceled = true;\n        const {\n          enableBodyScroll: enableBodyScroll\n        } = this.option();\n        this._toggleBodyScroll(enableBodyScroll);\n        this.option(\"visible\", true);\n        this._hidingDeferred.resolve();\n      };\n      const applyHide = () => {\n        this._forceFocusLost();\n        this._toggleShading(false);\n        this._toggleSubscriptions(false);\n        this._stopShowTimer();\n        this._animateHiding();\n      };\n      this._processShowingHidingCancel(hidingArgs.cancel, applyHide, cancelHide);\n    }\n    return this._hidingDeferred.promise();\n  }\n  _forceFocusLost() {\n    const activeElement = domAdapter.getActiveElement();\n    const shouldResetActiveElement = !!this._$content.find(activeElement).length;\n    if (shouldResetActiveElement) {\n      domUtils.resetActiveElement();\n    }\n  }\n  _animate(animation, completeCallback, startCallback) {\n    if (animation) {\n      startCallback = startCallback || animation.start || noop;\n      fx.animate(this._$content, extend({}, animation, {\n        start: startCallback,\n        complete: completeCallback\n      }));\n    } else {\n      completeCallback();\n    }\n  }\n  _stopAnimation() {\n    fx.stop(this._$content, true);\n  }\n  _renderVisibility(visible) {\n    if (visible && this._isParentHidden()) {\n      return;\n    }\n    this._currentVisible = visible;\n    this._stopAnimation();\n    if (!visible) {\n      triggerHidingEvent(this._$content);\n    }\n    if (visible) {\n      this._checkContainerExists();\n      this._moveToContainer();\n      this._renderGeometry();\n      triggerShownEvent(this._$content);\n      triggerResizeEvent(this._$content);\n    } else {\n      this._toggleVisibility(visible);\n      this._$content.toggleClass(\"dx-state-invisible\", !visible);\n      this._updateZIndexStackPosition(visible);\n      this._moveFromContainer();\n    }\n    this._toggleShading(visible);\n    this._toggleSubscriptions(visible);\n  }\n  _updateZIndexStackPosition(pushToStack) {\n    const overlayStack = this._overlayStack();\n    const index = overlayStack.indexOf(this);\n    if (pushToStack) {\n      if (-1 === index) {\n        this._zIndex = zIndexPool.create(this._zIndexInitValue());\n        overlayStack.push(this);\n      }\n      this._$wrapper.css(\"zIndex\", this._zIndex);\n      this._$content.css(\"zIndex\", this._zIndex);\n    } else if (-1 !== index) {\n      overlayStack.splice(index, 1);\n      zIndexPool.remove(this._zIndex);\n    }\n  }\n  _toggleShading(visible) {\n    const {\n      shading: shading,\n      shadingColor: shadingColor\n    } = this.option();\n    this._$wrapper.toggleClass(\"dx-overlay-shader\", visible && shading);\n    this._$wrapper.css(\"backgroundColor\", shading ? shadingColor : \"\");\n    this._toggleTabTerminator(visible && shading);\n  }\n  _initTabTerminatorHandler() {\n    var _this5 = this;\n    this._proxiedTabTerminatorHandler = function () {\n      _this5._tabKeyHandler(...arguments);\n    };\n  }\n  _toggleTabTerminator(enabled) {\n    const {\n      _loopFocus: _loopFocus\n    } = this.option();\n    const eventName = addNamespace(\"keydown\", this.NAME);\n    if (_loopFocus || enabled) {\n      eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    } else {\n      eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    }\n  }\n  _findTabbableBounds() {\n    const $elements = this._$wrapper.find(\"*\");\n    const elementsCount = $elements.length - 1;\n    let first = null;\n    let last = null;\n    for (let i = 0; i <= elementsCount; i += 1) {\n      if (!first && $elements.eq(i).is(tabbable)) {\n        first = $elements.eq(i);\n      }\n      if (!last && $elements.eq(elementsCount - i).is(tabbable)) {\n        last = $elements.eq(elementsCount - i);\n      }\n      if (first && last) {\n        break;\n      }\n    }\n    return {\n      first: first,\n      last: last\n    };\n  }\n  _tabKeyHandler(e) {\n    if (\"tab\" !== normalizeKeyName(e) || !this._isTopOverlay()) {\n      return;\n    }\n    const wrapper = this._$wrapper.get(0);\n    const activeElement = domAdapter.getActiveElement(wrapper);\n    const {\n      first: $firstTabbable,\n      last: $lastTabbable\n    } = this._findTabbableBounds();\n    const isTabOnLast = !e.shiftKey && activeElement === (null === $lastTabbable || void 0 === $lastTabbable ? void 0 : $lastTabbable.get(0));\n    const isShiftTabOnFirst = e.shiftKey && activeElement === (null === $firstTabbable || void 0 === $firstTabbable ? void 0 : $firstTabbable.get(0));\n    const isOutsideTarget = !domUtils.contains(wrapper, activeElement);\n    const shouldPreventDefault = isTabOnLast || isShiftTabOnFirst || isOutsideTarget;\n    if (shouldPreventDefault) {\n      e.preventDefault();\n      const $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\n      eventsEngine.trigger($focusElement, \"focusin\");\n      eventsEngine.trigger($focusElement, \"focus\");\n    }\n  }\n  _toggleSubscriptions(enabled) {\n    if (windowUtils.hasWindow()) {\n      this._toggleHideTopOverlayCallback(enabled);\n      this._toggleHideOnParentsScrollSubscription(enabled);\n    }\n  }\n  _toggleHideTopOverlayCallback(subscribe) {\n    if (!this._hideTopOverlayHandler) {\n      return;\n    }\n    if (subscribe) {\n      hideTopOverlayCallback.add(this._hideTopOverlayHandler);\n    } else {\n      hideTopOverlayCallback.remove(this._hideTopOverlayHandler);\n    }\n  }\n  _toggleHideOnParentsScrollSubscription(needSubscribe) {\n    const scrollEvent = addNamespace(\"scroll\", this.NAME);\n    const {\n      prevTargets: prevTargets,\n      handler: handler\n    } = this._parentsScrollSubscriptionInfo ?? {};\n    eventsEngine.off(prevTargets, scrollEvent, handler);\n    const hideOnScroll = this.option(\"hideOnParentScroll\");\n    if (needSubscribe && hideOnScroll) {\n      let $parents = this._getHideOnParentScrollTarget().parents();\n      if (\"desktop\" === devices.real().deviceType) {\n        $parents = $parents.add(window);\n      }\n      eventsEngine.on($parents, scrollEvent, handler);\n      this._parentsScrollSubscriptionInfo.prevTargets = $parents;\n    }\n  }\n  _hideOnParentsScrollHandler(e) {\n    let hideHandled = false;\n    const hideOnScroll = this.option(\"hideOnParentScroll\");\n    if (isFunction(hideOnScroll)) {\n      hideHandled = hideOnScroll(e);\n    }\n    if (!hideHandled && !this._showAnimationProcessing) {\n      this.hide();\n    }\n  }\n  _getHideOnParentScrollTarget() {\n    const {\n      _hideOnParentScrollTarget: _hideOnParentScrollTarget\n    } = this.option();\n    const $hideOnParentScrollTarget = $(_hideOnParentScrollTarget);\n    if ($hideOnParentScrollTarget.length) {\n      return $hideOnParentScrollTarget;\n    }\n    return this._$wrapper;\n  }\n  _render() {\n    super._render();\n    this._appendContentToElement();\n    this._renderVisibilityAnimate(this.option(\"visible\"));\n  }\n  _appendContentToElement() {\n    if (!this._$content.parent().is(this.$element())) {\n      this._$content.appendTo(this.$element());\n    }\n  }\n  _renderContent() {\n    const shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\n    const isParentHidden = this.option(\"visible\") && this._isParentHidden();\n    if (isParentHidden) {\n      this._isHidden = true;\n      return;\n    }\n    if (this._contentAlreadyRendered || shouldDeferRendering) {\n      return;\n    }\n    this._contentAlreadyRendered = true;\n    this._appendContentToElement();\n    super._renderContent();\n  }\n  _isParentHidden() {\n    if (!this.option(\"_checkParentVisibility\")) {\n      return false;\n    }\n    if (void 0 !== this._parentHidden) {\n      return this._parentHidden;\n    }\n    const $parent = this.$element().parent();\n    if ($parent.is(\":visible\")) {\n      return false;\n    }\n    let isHidden = false;\n    $parent.add($parent.parents()).each((index, element) => {\n      const $element = $(element);\n      if (\"none\" === $element.css(\"display\")) {\n        isHidden = true;\n        return false;\n      }\n    });\n    return isHidden || !domAdapter.getBody().contains($parent.get(0));\n  }\n  _renderContentImpl() {\n    const whenContentRendered = Deferred();\n    const contentTemplateOption = this.option(\"contentTemplate\");\n    const contentTemplate = this._getTemplate(contentTemplateOption);\n    const transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\n    null === contentTemplate || void 0 === contentTemplate || contentTemplate.render({\n      container: getPublicElement(this.$content()),\n      noModel: true,\n      transclude: transclude,\n      onRendered: () => {\n        whenContentRendered.resolve();\n        if (this.option(\"templatesRenderAsynchronously\")) {\n          this._dimensionChanged();\n        }\n      }\n    });\n    const {\n      preventScrollEvents: preventScrollEvents\n    } = this.option();\n    this._toggleWrapperScrollEventsSubscription(preventScrollEvents);\n    whenContentRendered.done(() => {\n      if (this.option(\"visible\")) {\n        this._moveToContainer();\n      }\n    });\n    return whenContentRendered.promise();\n  }\n  _getPositionControllerConfig() {\n    const {\n      container: container,\n      visualContainer: visualContainer,\n      _fixWrapperPosition: _fixWrapperPosition,\n      restorePosition: restorePosition,\n      _skipContentPositioning: _skipContentPositioning\n    } = this.option();\n    return {\n      container: container,\n      visualContainer: visualContainer,\n      $root: this.$element(),\n      $content: this._$content,\n      $wrapper: this._$wrapper,\n      onPositioned: this._actions.onPositioned,\n      onVisualPositionChanged: this._actions.onVisualPositionChanged,\n      restorePosition: restorePosition,\n      _fixWrapperPosition: _fixWrapperPosition,\n      _skipContentPositioning: _skipContentPositioning\n    };\n  }\n  _initPositionController() {\n    this._positionController = new OverlayPositionController(this._getPositionControllerConfig());\n  }\n  _toggleWrapperScrollEventsSubscription(enabled) {\n    const eventName = addNamespace(dragEventMove, this.NAME);\n    eventsEngine.off(this._$wrapper, eventName);\n    if (enabled) {\n      eventsEngine.on(this._$wrapper, eventName, {\n        validate: () => true,\n        getDirection: () => \"both\",\n        _toggleGestureCover(toggle) {\n          if (!toggle) {\n            this._toggleGestureCoverImpl(toggle);\n          }\n        },\n        _clearSelection: noop,\n        isNative: true\n      }, e => {\n        const {\n          originalEvent: originalEvent\n        } = e.originalEvent;\n        const {\n          type: type\n        } = originalEvent || {};\n        const isWheel = \"wheel\" === type;\n        const isMouseMove = \"mousemove\" === type;\n        const isScrollByWheel = isWheel && !isCommandKeyPressed(e);\n        e._cancelPreventDefault = true;\n        if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\n          e.preventDefault();\n        }\n      });\n    }\n  }\n  _moveFromContainer() {\n    this._$content.appendTo(this.$element());\n    this._$wrapper.detach();\n  }\n  _checkContainerExists() {\n    const $wrapperContainer = this._positionController.$container;\n    if (void 0 === $wrapperContainer) {\n      return;\n    }\n    const containerExists = $wrapperContainer.length > 0;\n    if (!containerExists) {\n      uiErrors.log(\"W1021\", this.NAME);\n    }\n  }\n  _moveToContainer() {\n    const $wrapperContainer = this._positionController.$container;\n    this._$wrapper.appendTo($wrapperContainer);\n    this._$content.appendTo(this._$wrapper);\n  }\n  _renderGeometry(options) {\n    const {\n      visible: visible\n    } = this.option();\n    if (visible && windowUtils.hasWindow()) {\n      this._stopAnimation();\n      this._renderGeometryImpl();\n    }\n  }\n  _renderGeometryImpl() {\n    this._positionController.updatePosition(this._getOptionValue(\"position\"));\n    this._renderWrapper();\n    this._renderDimensions();\n    this._renderPosition();\n  }\n  _renderPosition(state) {\n    this._positionController.positionContent();\n  }\n  _isAllWindowCovered() {\n    const {\n      shading: shading\n    } = this.option();\n    return isWindow(this._positionController.$visualContainer.get(0)) && shading;\n  }\n  _toggleSafariScrolling() {\n    const visible = this.option(\"visible\");\n    const $body = $(domAdapter.getBody());\n    const isIosSafari = \"ios\" === devices.real().platform && browser.safari;\n    const isAllWindowCovered = this._isAllWindowCovered();\n    const isScrollingPrevented = $body.hasClass(\"dx-prevent-safari-scrolling\");\n    const shouldPreventScrolling = !isScrollingPrevented && visible && isAllWindowCovered;\n    const shouldEnableScrolling = isScrollingPrevented && (!visible || !isAllWindowCovered || this._disposed);\n    if (isIosSafari) {\n      if (shouldEnableScrolling) {\n        $body.removeClass(\"dx-prevent-safari-scrolling\");\n        window.scrollTo(0, this._cachedBodyScrollTop);\n        this._cachedBodyScrollTop = void 0;\n      } else if (shouldPreventScrolling) {\n        this._cachedBodyScrollTop = window.pageYOffset;\n        $body.addClass(\"dx-prevent-safari-scrolling\");\n      }\n    }\n  }\n  _renderWrapper() {\n    this._positionController.styleWrapperPosition();\n    this._renderWrapperDimensions();\n    this._positionController.positionWrapper();\n  }\n  _renderWrapperDimensions() {\n    const {\n      $visualContainer: $visualContainer\n    } = this._positionController;\n    const documentElement = domAdapter.getDocumentElement();\n    const isVisualContainerWindow = isWindow($visualContainer.get(0));\n    const wrapperWidth = isVisualContainerWindow ? documentElement.clientWidth : getOuterWidth($visualContainer);\n    const wrapperHeight = isVisualContainerWindow ? window.innerHeight : getOuterHeight($visualContainer);\n    this._$wrapper.css({\n      width: wrapperWidth,\n      height: wrapperHeight\n    });\n  }\n  _renderDimensions() {\n    const content = this._$content.get(0);\n    this._$content.css({\n      minWidth: this._getOptionValue(\"minWidth\", content),\n      maxWidth: this._getOptionValue(\"maxWidth\", content),\n      minHeight: this._getOptionValue(\"minHeight\", content),\n      maxHeight: this._getOptionValue(\"maxHeight\", content),\n      width: this._getOptionValue(\"width\", content),\n      height: this._getOptionValue(\"height\", content)\n    });\n  }\n  _focusTarget() {\n    return this._$content;\n  }\n  _attachKeyboardEvents() {\n    this._keyboardListenerId = keyboard.on(this._$content, null, opts => this._keyboardHandler(opts));\n  }\n  _keyboardHandler(options) {\n    const e = options.originalEvent;\n    const $target = $(e.target);\n    if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\n      super._keyboardHandler(...arguments);\n    }\n  }\n  _isVisible() {\n    const {\n      visible: visible\n    } = this.option();\n    return visible;\n  }\n  _visibilityChanged(visible) {\n    if (visible) {\n      if (this.option(\"visible\")) {\n        this._renderVisibilityAnimate(visible);\n      }\n    } else {\n      this._renderVisibilityAnimate(visible);\n    }\n  }\n  _dimensionChanged() {\n    this._renderGeometry();\n  }\n  _clean() {\n    const {\n      isRenovated: isRenovated\n    } = this.option();\n    if (!this._contentAlreadyRendered && !isRenovated) {\n      this.$content().empty();\n    }\n    this._renderVisibility(false);\n    this._stopShowTimer();\n    this._cleanFocusState();\n  }\n  _stopShowTimer() {\n    if (this._asyncShowTimeout) {\n      clearTimeout(this._asyncShowTimeout);\n    }\n    this._asyncShowTimeout = null;\n  }\n  _dispose() {\n    fx.stop(this._$content, false);\n    this._toggleViewPortSubscription(false);\n    this._toggleSubscriptions(false);\n    this._updateZIndexStackPosition(false);\n    this._toggleTabTerminator(false);\n    this._actions = null;\n    this._parentsScrollSubscriptionInfo = null;\n    super._dispose();\n    this._toggleSafariScrolling();\n    this.option(\"visible\") && zIndexPool.remove(this._zIndex);\n    this._$wrapper.remove();\n    this._$content.remove();\n  }\n  _toggleRTLDirection(rtl) {\n    this._$content.toggleClass(\"dx-rtl\", rtl);\n  }\n  _optionChanged(args) {\n    const {\n      value: value,\n      name: name\n    } = args;\n    if (this._getActionsList().includes(name)) {\n      this._initActions();\n      return;\n    }\n    switch (name) {\n      case \"animation\":\n      case \"closeOnOutsideClick\":\n      case \"hideOnOutsideClick\":\n      case \"propagateOutsideClick\":\n        break;\n      case \"_loopFocus\":\n      case \"shading\":\n        {\n          const {\n            visible: visible\n          } = this.option();\n          this._toggleShading(visible);\n          this._toggleSafariScrolling();\n          break;\n        }\n      case \"shadingColor\":\n        {\n          const {\n            visible: visible\n          } = this.option();\n          this._toggleShading(visible);\n          break;\n        }\n      case \"width\":\n      case \"height\":\n      case \"minWidth\":\n      case \"maxWidth\":\n      case \"minHeight\":\n      case \"maxHeight\":\n        this._renderGeometry();\n        break;\n      case \"position\":\n        this._positionController.updatePosition(this.option(\"position\"));\n        this._positionController.restorePositionOnNextRender(true);\n        this._renderGeometry();\n        this._toggleSafariScrolling();\n        break;\n      case \"visible\":\n        this._renderVisibilityAnimate(value).done(() => {\n          var _this$_animateDeferre;\n          return null === (_this$_animateDeferre = this._animateDeferred) || void 0 === _this$_animateDeferre ? void 0 : _this$_animateDeferre.resolveWith(this);\n        }).fail(() => {\n          var _this$_animateDeferre2;\n          return null === (_this$_animateDeferre2 = this._animateDeferred) || void 0 === _this$_animateDeferre2 ? void 0 : _this$_animateDeferre2.reject();\n        });\n        break;\n      case \"container\":\n        this._positionController.updateContainer(value);\n        this._invalidate();\n        this._toggleSafariScrolling();\n        break;\n      case \"visualContainer\":\n        this._positionController.updateVisualContainer(value);\n        this._renderWrapper();\n        this._toggleSafariScrolling();\n        break;\n      case \"innerOverlay\":\n        this._initInnerOverlayClass();\n        break;\n      case \"deferRendering\":\n      case \"contentTemplate\":\n        this._contentAlreadyRendered = false;\n        this._clean();\n        this._invalidate();\n        break;\n      case \"hideTopOverlayHandler\":\n        this._toggleHideTopOverlayCallback(false);\n        this._initHideTopOverlayHandler(value);\n        this._toggleHideTopOverlayCallback(this.option(\"visible\"));\n        break;\n      case \"hideOnParentScroll\":\n      case \"_hideOnParentScrollTarget\":\n        {\n          const {\n            visible: visible\n          } = this.option();\n          this._toggleHideOnParentsScrollSubscription(visible);\n          break;\n        }\n      case \"rtlEnabled\":\n        this._contentAlreadyRendered = false;\n        super._optionChanged(args);\n        break;\n      case \"_fixWrapperPosition\":\n        this._positionController.fixWrapperPosition = value;\n        break;\n      case \"wrapperAttr\":\n        this._renderWrapperAttributes();\n        break;\n      case \"restorePosition\":\n        this._positionController.restorePosition = value;\n        break;\n      case \"preventScrollEvents\":\n        this._logDeprecatedPreventScrollEventsInfo();\n        this._toggleWrapperScrollEventsSubscription(value);\n        break;\n      default:\n        super._optionChanged(args);\n    }\n  }\n  toggle(showing) {\n    showing = void 0 === showing ? !this.option(\"visible\") : showing;\n    const result = Deferred();\n    if (showing === this.option(\"visible\")) {\n      return result.resolveWith(this, [showing]).promise();\n    }\n    const animateDeferred = Deferred();\n    this._animateDeferred = animateDeferred;\n    this.option(\"visible\", showing);\n    animateDeferred.promise().done(() => {\n      delete this._animateDeferred;\n      result.resolveWith(this, [this.option(\"visible\")]);\n    }).fail(() => {\n      delete this._animateDeferred;\n      result.reject();\n    });\n    return result.promise();\n  }\n  $content() {\n    return this._$content;\n  }\n  show() {\n    return this.toggle(true);\n  }\n  hide() {\n    return this.toggle(false);\n  }\n  content() {\n    return getPublicElement(this._$content);\n  }\n  repaint() {\n    if (this._contentAlreadyRendered) {\n      this._positionController.restorePositionOnNextRender(true);\n      this._renderGeometry({\n        forceStopAnimation: true\n      });\n      triggerResizeEvent(this._$content);\n    } else {\n      super.repaint();\n    }\n  }\n}\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\nregisterComponent(\"dxOverlay\", Overlay);\nexport default Overlay;","map":{"version":3,"names":["_extends","fx","hideCallback","hideTopOverlayCallback","eventsEngine","move","dragEventMove","pointerEvents","keyboard","addNamespace","isCommandKeyPressed","normalizeKeyName","triggerHidingEvent","triggerResizeEvent","triggerShownEvent","registerComponent","devices","domAdapter","getPublicElement","errors","$","EmptyTemplate","browser","noop","Deferred","extend","each","readyCallbacks","getOuterHeight","getOuterWidth","isFunction","isObject","isPromise","isWindow","changeCallback","tabbable","uiErrors","domUtils","Widget","windowUtils","OVERLAY_POSITION_ALIASES","OverlayPositionController","zIndexPool","ready","add","window","getWindow","viewPortChanged","OVERLAY_CLASS","OVERLAY_WRAPPER_CLASS","OVERLAY_CONTENT_CLASS","OVERLAY_SHADER_CLASS","INNER_OVERLAY_CLASS","INVISIBLE_STATE_CLASS","ANONYMOUS_TEMPLATE_NAME","RTL_DIRECTION_CLASS","OVERLAY_STACK","PREVENT_SAFARI_SCROLLING_CLASS","TAB_KEY","subscribeGlobal","getDocument","down","e","i","length","_proxiedDocumentDownHandler","Overlay","_supportedKeys","escape","hide","_getDefaultOptions","activeStateEnabled","visible","deferRendering","shading","shadingColor","wrapperAttr","position","center","width","minWidth","maxWidth","height","minHeight","maxHeight","animation","show","type","duration","from","scale","opacity","to","closeOnOutsideClick","hideOnOutsideClick","_ignorePreventScrollEventsDeprecation","onShowing","onShown","onHiding","onHidden","contentTemplate","innerOverlay","restorePosition","hideTopOverlayHandler","hideOnParentScroll","preventScrollEvents","onPositioned","propagateOutsideClick","ignoreChildEvents","_checkParentVisibility","_fixWrapperPosition","_loopFocus","_defaultOptionsRules","concat","device","hasWindow","options","_setOptionsByReference","_optionsByReference","$wrapper","_$wrapper","_eventBindingTarget","_$content","_setDeprecatedOptions","_deprecatedOptions","since","alias","ctor","element","_logDeprecatedPreventScrollEventsInfo","_logDeprecatedOptionWarning","message","_init","_initActions","_initHideOnOutsideClickHandler","_initTabTerminatorHandler","_customWrapperClass","addClass","_initInnerOverlayClass","$element","attr","_toggleViewPortSubscription","option","_initHideTopOverlayHandler","_parentsScrollSubscriptionInfo","handler","_hideOnParentsScrollHandler","warnPositionAsFunction","log","toggleClass","_hideTopOverlayHandler","_getActionsList","_actions","actions","_","action","_createActionByOption","excludeValidators","_this","_documentDownHandler","arguments","_initMarkup","_renderWrapperAttributes","_initPositionController","_showAnimationProcessing","_stopAnimation","isAttachedTarget","document","is","target","contains","isInnerOverlay","closest","outsideClick","get","_shouldHideOnOutsideClick","_outsideClickHandler","preventDefault","_getAnonymousTemplateName","_initTemplates","_templateManager","addDefaultTemplates","content","_isTopOverlay","overlayStack","_overlayStack","tabbableElements","_findTabbableBounds","first","last","_zIndexInitValue","baseZIndex","toggle","_this2","remove","_viewPortChangeHandle","_viewPortChangeHandler","_positionController","updateContainer","_refresh","attributes","classNames","class","removeClass","_renderVisibilityAnimate","_show","_hide","_getAnimationConfig","_getOptionValue","_toggleBodyScroll","enabled","_animateShowing","_this3","showAnimation","_normalizeAnimation","startShowAnimation","start","completeShowAnimation","complete","_animate","_isAnimationPaused","trigger","_focusTarget","_len","args","Array","_key","call","_isHidden","_toggleSafariScrolling","_showingDeferred","resolve","_len2","_key2","_processShowingHidingCancel","cancelArg","applyFunction","cancelFunction","then","shouldCancel","catch","_parentHidden","_isParentHidden","done","_currentVisible","promise","_isHidingActionCanceled","reject","enableBodyScroll","_toggleVisibility","css","_updateZIndexStackPosition","openingHandled","_renderContent","showingArgs","cancel","_renderVisibility","_isShowingActionCanceled","_moveFromContainer","_stopShowTimer","_asyncShowTimeout","setTimeout","showHideConfig","direction","skipElementInitialStyles","_animateHiding","_this4","hideAnimation","startHideAnimation","completeHideAnimation","_this4$_actions","_len3","_key3","_hideAnimationProcessing","_hidingDeferred","_len4","_key4","hidingArgs","cancelHide","applyHide","_forceFocusLost","_toggleShading","_toggleSubscriptions","activeElement","getActiveElement","shouldResetActiveElement","find","resetActiveElement","completeCallback","startCallback","animate","stop","_checkContainerExists","_moveToContainer","_renderGeometry","pushToStack","index","indexOf","_zIndex","create","push","splice","_toggleTabTerminator","_this5","_proxiedTabTerminatorHandler","_tabKeyHandler","eventName","NAME","on","off","$elements","elementsCount","eq","wrapper","$firstTabbable","$lastTabbable","isTabOnLast","shiftKey","isShiftTabOnFirst","isOutsideTarget","shouldPreventDefault","$focusElement","_toggleHideTopOverlayCallback","_toggleHideOnParentsScrollSubscription","subscribe","needSubscribe","scrollEvent","prevTargets","hideOnScroll","$parents","_getHideOnParentScrollTarget","parents","real","deviceType","hideHandled","_hideOnParentScrollTarget","$hideOnParentScrollTarget","_render","_appendContentToElement","parent","appendTo","shouldDeferRendering","isParentHidden","_contentAlreadyRendered","$parent","isHidden","getBody","_renderContentImpl","whenContentRendered","contentTemplateOption","_getTemplate","transclude","anonymousTemplateName","render","container","$content","noModel","onRendered","_dimensionChanged","_toggleWrapperScrollEventsSubscription","_getPositionControllerConfig","visualContainer","_skipContentPositioning","$root","onVisualPositionChanged","validate","getDirection","_toggleGestureCover","_toggleGestureCoverImpl","_clearSelection","isNative","originalEvent","isWheel","isMouseMove","isScrollByWheel","_cancelPreventDefault","cancelable","detach","$wrapperContainer","$container","containerExists","_renderGeometryImpl","updatePosition","_renderWrapper","_renderDimensions","_renderPosition","state","positionContent","_isAllWindowCovered","$visualContainer","$body","isIosSafari","platform","safari","isAllWindowCovered","isScrollingPrevented","hasClass","shouldPreventScrolling","shouldEnableScrolling","_disposed","scrollTo","_cachedBodyScrollTop","pageYOffset","styleWrapperPosition","_renderWrapperDimensions","positionWrapper","documentElement","getDocumentElement","isVisualContainerWindow","wrapperWidth","clientWidth","wrapperHeight","innerHeight","_attachKeyboardEvents","_keyboardListenerId","opts","_keyboardHandler","$target","_isVisible","_visibilityChanged","_clean","isRenovated","empty","_cleanFocusState","clearTimeout","_dispose","_toggleRTLDirection","rtl","_optionChanged","value","name","includes","restorePositionOnNextRender","_this$_animateDeferre","_animateDeferred","resolveWith","fail","_this$_animateDeferre2","_invalidate","updateVisualContainer","fixWrapperPosition","showing","result","animateDeferred","repaint","forceStopAnimation","zIndex","base"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme/esm/__internal/ui/overlay/m_overlay.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/ui/overlay/m_overlay.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    fx\r\n} from \"../../../common/core/animation\";\r\nimport {\r\n    hideCallback as hideTopOverlayCallback\r\n} from \"../../../common/core/environment/hide_callback\";\r\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\r\nimport {\r\n    move as dragEventMove\r\n} from \"../../../common/core/events/drag\";\r\nimport pointerEvents from \"../../../common/core/events/pointer\";\r\nimport {\r\n    keyboard\r\n} from \"../../../common/core/events/short\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed,\r\n    normalizeKeyName\r\n} from \"../../../common/core/events/utils/index\";\r\nimport {\r\n    triggerHidingEvent,\r\n    triggerResizeEvent,\r\n    triggerShownEvent\r\n} from \"../../../common/core/events/visibility_change\";\r\nimport registerComponent from \"../../../core/component_registrator\";\r\nimport devices from \"../../../core/devices\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport errors from \"../../../core/errors\";\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    EmptyTemplate\r\n} from \"../../../core/templates/empty_template\";\r\nimport browser from \"../../../core/utils/browser\";\r\nimport {\r\n    noop\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    Deferred\r\n} from \"../../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../../core/utils/iterator\";\r\nimport readyCallbacks from \"../../../core/utils/ready_callbacks\";\r\nimport {\r\n    getOuterHeight,\r\n    getOuterWidth\r\n} from \"../../../core/utils/size\";\r\nimport {\r\n    isFunction,\r\n    isObject,\r\n    isPromise,\r\n    isWindow\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    changeCallback\r\n} from \"../../../core/utils/view_port\";\r\nimport {\r\n    tabbable\r\n} from \"../../../ui/widget/selectors\";\r\nimport uiErrors from \"../../../ui/widget/ui.errors\";\r\nimport domUtils from \"../../core/utils/m_dom\";\r\nimport Widget from \"../../core/widget/widget\";\r\nimport windowUtils from \"../../core/utils/m_window\";\r\nimport {\r\n    OVERLAY_POSITION_ALIASES,\r\n    OverlayPositionController\r\n} from \"./m_overlay_position_controller\";\r\nimport * as zIndexPool from \"./m_z_index\";\r\nconst ready = readyCallbacks.add;\r\nconst window = windowUtils.getWindow();\r\nconst viewPortChanged = changeCallback;\r\nconst OVERLAY_CLASS = \"dx-overlay\";\r\nconst OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\r\nconst OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\r\nconst OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\r\nconst INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\r\nconst INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\r\nconst ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nconst RTL_DIRECTION_CLASS = \"dx-rtl\";\r\nconst OVERLAY_STACK = [];\r\nconst PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\r\nconst TAB_KEY = \"tab\";\r\nready((() => {\r\n    eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, (e => {\r\n        for (let i = OVERLAY_STACK.length - 1; i >= 0; i--) {\r\n            if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\r\n                return\r\n            }\r\n        }\r\n    }))\r\n}));\r\nclass Overlay extends Widget {\r\n    _supportedKeys() {\r\n        return _extends({}, super._supportedKeys(), {\r\n            escape() {\r\n                this.hide()\r\n            }\r\n        })\r\n    }\r\n    _getDefaultOptions() {\r\n        return _extends({}, super._getDefaultOptions(), {\r\n            activeStateEnabled: false,\r\n            visible: false,\r\n            deferRendering: true,\r\n            shading: true,\r\n            shadingColor: \"\",\r\n            wrapperAttr: {},\r\n            position: extend({}, OVERLAY_POSITION_ALIASES.center),\r\n            width: \"80vw\",\r\n            minWidth: null,\r\n            maxWidth: null,\r\n            height: \"80vh\",\r\n            minHeight: null,\r\n            maxHeight: null,\r\n            animation: {\r\n                show: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        scale: .55\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        opacity: 1,\r\n                        scale: 1\r\n                    },\r\n                    to: {\r\n                        opacity: 0,\r\n                        scale: .55\r\n                    }\r\n                }\r\n            },\r\n            closeOnOutsideClick: false,\r\n            hideOnOutsideClick: false,\r\n            _ignorePreventScrollEventsDeprecation: false,\r\n            onShowing: null,\r\n            onShown: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            contentTemplate: \"content\",\r\n            innerOverlay: false,\r\n            restorePosition: true,\r\n            hideTopOverlayHandler: () => {\r\n                this.hide()\r\n            },\r\n            hideOnParentScroll: false,\r\n            preventScrollEvents: true,\r\n            onPositioned: null,\r\n            propagateOutsideClick: false,\r\n            ignoreChildEvents: true,\r\n            _checkParentVisibility: true,\r\n            _fixWrapperPosition: false,\r\n            _loopFocus: false\r\n        })\r\n    }\r\n    _defaultOptionsRules() {\r\n        return super._defaultOptionsRules().concat([{\r\n            device: () => !windowUtils.hasWindow(),\r\n            options: {\r\n                width: null,\r\n                height: null,\r\n                animation: null,\r\n                _checkParentVisibility: false\r\n            }\r\n        }])\r\n    }\r\n    _setOptionsByReference() {\r\n        super._setOptionsByReference();\r\n        extend(this._optionsByReference, {\r\n            animation: true\r\n        })\r\n    }\r\n    $wrapper() {\r\n        return this._$wrapper\r\n    }\r\n    _eventBindingTarget() {\r\n        return this._$content\r\n    }\r\n    _setDeprecatedOptions() {\r\n        super._setDeprecatedOptions();\r\n        extend(this._deprecatedOptions, {\r\n            closeOnOutsideClick: {\r\n                since: \"22.1\",\r\n                alias: \"hideOnOutsideClick\"\r\n            }\r\n        })\r\n    }\r\n    ctor(element, options) {\r\n        super.ctor(element, options);\r\n        if (options) {\r\n            if (\"preventScrollEvents\" in options && !options._ignorePreventScrollEventsDeprecation) {\r\n                this._logDeprecatedPreventScrollEventsInfo()\r\n            }\r\n        }\r\n    }\r\n    _logDeprecatedPreventScrollEventsInfo() {\r\n        this._logDeprecatedOptionWarning(\"preventScrollEvents\", {\r\n            since: \"23.1\",\r\n            message: \"If you enable this option, end-users may experience scrolling issues.\"\r\n        })\r\n    }\r\n    _init() {\r\n        super._init();\r\n        this._initActions();\r\n        this._initHideOnOutsideClickHandler();\r\n        this._initTabTerminatorHandler();\r\n        this._customWrapperClass = null;\r\n        this._$wrapper = $(\"<div>\").addClass(\"dx-overlay-wrapper\");\r\n        this._$content = $(\"<div>\").addClass(\"dx-overlay-content\");\r\n        this._initInnerOverlayClass();\r\n        const $element = this.$element();\r\n        $element.addClass(\"dx-overlay\");\r\n        this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\r\n        this._toggleViewPortSubscription(true);\r\n        const {\r\n            hideTopOverlayHandler: hideTopOverlayHandler\r\n        } = this.option();\r\n        this._initHideTopOverlayHandler(hideTopOverlayHandler);\r\n        this._parentsScrollSubscriptionInfo = {\r\n            handler: e => {\r\n                this._hideOnParentsScrollHandler(e)\r\n            }\r\n        };\r\n        this.warnPositionAsFunction()\r\n    }\r\n    warnPositionAsFunction() {\r\n        if (isFunction(this.option(\"position\"))) {\r\n            errors.log(\"W0018\")\r\n        }\r\n    }\r\n    _initInnerOverlayClass() {\r\n        const {\r\n            innerOverlay: innerOverlay\r\n        } = this.option();\r\n        this._$content.toggleClass(\"dx-inner-overlay\", innerOverlay)\r\n    }\r\n    _initHideTopOverlayHandler(handler) {\r\n        this._hideTopOverlayHandler = handler\r\n    }\r\n    _getActionsList() {\r\n        return [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onVisualPositionChanged\"]\r\n    }\r\n    _initActions() {\r\n        this._actions = {};\r\n        const actions = this._getActionsList();\r\n        each(actions, ((_, action) => {\r\n            this._actions[action] = this._createActionByOption(action, {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }) || noop\r\n        }))\r\n    }\r\n    _initHideOnOutsideClickHandler() {\r\n        var _this = this;\r\n        this._proxiedDocumentDownHandler = function() {\r\n            return _this._documentDownHandler(...arguments)\r\n        }\r\n    }\r\n    _initMarkup() {\r\n        super._initMarkup();\r\n        this._renderWrapperAttributes();\r\n        this._initPositionController()\r\n    }\r\n    _documentDownHandler(e) {\r\n        if (this._showAnimationProcessing) {\r\n            this._stopAnimation()\r\n        }\r\n        const isAttachedTarget = $(window.document).is(e.target) || domUtils.contains(window.document, e.target);\r\n        const isInnerOverlay = $(e.target).closest(\".dx-inner-overlay\").length;\r\n        const outsideClick = isAttachedTarget && !isInnerOverlay && !(this._$content.is(e.target) || domUtils.contains(this._$content.get(0), e.target));\r\n        if (outsideClick && this._shouldHideOnOutsideClick(e)) {\r\n            this._outsideClickHandler(e)\r\n        }\r\n        const {\r\n            propagateOutsideClick: propagateOutsideClick\r\n        } = this.option();\r\n        return propagateOutsideClick\r\n    }\r\n    _shouldHideOnOutsideClick(e) {\r\n        const {\r\n            hideOnOutsideClick: hideOnOutsideClick\r\n        } = this.option();\r\n        if (isFunction(hideOnOutsideClick)) {\r\n            return hideOnOutsideClick(e)\r\n        }\r\n        return hideOnOutsideClick\r\n    }\r\n    _outsideClickHandler(e) {\r\n        if (this.option(\"shading\")) {\r\n            e.preventDefault()\r\n        }\r\n        this.hide()\r\n    }\r\n    _getAnonymousTemplateName() {\r\n        return \"content\"\r\n    }\r\n    _initTemplates() {\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new EmptyTemplate\r\n        });\r\n        super._initTemplates()\r\n    }\r\n    _isTopOverlay() {\r\n        const overlayStack = this._overlayStack();\r\n        for (let i = overlayStack.length - 1; i >= 0; i--) {\r\n            const tabbableElements = overlayStack[i]._findTabbableBounds();\r\n            if (tabbableElements.first || tabbableElements.last) {\r\n                return overlayStack[i] === this\r\n            }\r\n        }\r\n        return false\r\n    }\r\n    _overlayStack() {\r\n        return OVERLAY_STACK\r\n    }\r\n    _zIndexInitValue() {\r\n        return Overlay.baseZIndex()\r\n    }\r\n    _toggleViewPortSubscription(toggle) {\r\n        var _this2 = this;\r\n        viewPortChanged.remove(this._viewPortChangeHandle);\r\n        if (toggle) {\r\n            this._viewPortChangeHandle = function() {\r\n                _this2._viewPortChangeHandler(...arguments)\r\n            };\r\n            viewPortChanged.add(this._viewPortChangeHandle)\r\n        }\r\n    }\r\n    _viewPortChangeHandler() {\r\n        this._positionController.updateContainer(this.option(\"container\"));\r\n        this._refresh()\r\n    }\r\n    _renderWrapperAttributes() {\r\n        const {\r\n            wrapperAttr: wrapperAttr\r\n        } = this.option();\r\n        const attributes = extend({}, wrapperAttr);\r\n        const classNames = attributes.class;\r\n        delete attributes.class;\r\n        this.$wrapper().attr(attributes).removeClass(this._customWrapperClass).addClass(classNames);\r\n        this._customWrapperClass = classNames\r\n    }\r\n    _renderVisibilityAnimate(visible) {\r\n        this._stopAnimation();\r\n        return visible ? this._show() : this._hide()\r\n    }\r\n    _getAnimationConfig() {\r\n        return this._getOptionValue(\"animation\", this)\r\n    }\r\n    _toggleBodyScroll(enabled) {}\r\n    _animateShowing() {\r\n        var _this3 = this;\r\n        const animation = this._getAnimationConfig() ?? {};\r\n        const showAnimation = this._normalizeAnimation(animation.show, \"to\");\r\n        const startShowAnimation = (null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.start) ?? noop;\r\n        const completeShowAnimation = (null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.complete) ?? noop;\r\n        this._animate(showAnimation, (function() {\r\n            if (_this3._isAnimationPaused) {\r\n                return\r\n            }\r\n            if (_this3.option(\"focusStateEnabled\")) {\r\n                eventsEngine.trigger(_this3._focusTarget(), \"focus\")\r\n            }\r\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n                args[_key] = arguments[_key]\r\n            }\r\n            completeShowAnimation.call(_this3, ...args);\r\n            _this3._showAnimationProcessing = false;\r\n            _this3._isHidden = false;\r\n            _this3._actions.onShown();\r\n            _this3._toggleSafariScrolling();\r\n            _this3._showingDeferred.resolve()\r\n        }), (function() {\r\n            if (_this3._isAnimationPaused) {\r\n                return\r\n            }\r\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n                args[_key2] = arguments[_key2]\r\n            }\r\n            startShowAnimation.call(_this3, ...args);\r\n            _this3._showAnimationProcessing = true\r\n        }))\r\n    }\r\n    _processShowingHidingCancel(cancelArg, applyFunction, cancelFunction) {\r\n        if (isPromise(cancelArg)) {\r\n            cancelArg.then((shouldCancel => {\r\n                if (shouldCancel) {\r\n                    cancelFunction()\r\n                } else {\r\n                    applyFunction()\r\n                }\r\n            })).catch((() => applyFunction()))\r\n        } else {\r\n            cancelArg ? cancelFunction() : applyFunction()\r\n        }\r\n    }\r\n    _show() {\r\n        this._showingDeferred = Deferred();\r\n        this._parentHidden = this._isParentHidden();\r\n        this._showingDeferred.done((() => {\r\n            delete this._parentHidden\r\n        }));\r\n        if (this._parentHidden) {\r\n            this._isHidden = true;\r\n            return this._showingDeferred.resolve()\r\n        }\r\n        if (this._currentVisible) {\r\n            return Deferred().resolve().promise()\r\n        }\r\n        this._currentVisible = true;\r\n        if (this._isHidingActionCanceled) {\r\n            delete this._isHidingActionCanceled;\r\n            this._showingDeferred.reject()\r\n        } else {\r\n            const show = () => {\r\n                this._stopAnimation();\r\n                const {\r\n                    enableBodyScroll: enableBodyScroll\r\n                } = this.option();\r\n                this._toggleBodyScroll(enableBodyScroll);\r\n                this._toggleVisibility(true);\r\n                this._$content.css(\"visibility\", \"hidden\");\r\n                this._$content.toggleClass(\"dx-state-invisible\", false);\r\n                this._updateZIndexStackPosition(true);\r\n                this._positionController.openingHandled();\r\n                this._renderContent();\r\n                const showingArgs = {\r\n                    cancel: false\r\n                };\r\n                this._actions.onShowing(showingArgs);\r\n                this._processShowingHidingCancel(showingArgs.cancel, (() => {\r\n                    this._$content.css(\"visibility\", \"\");\r\n                    this._renderVisibility(true);\r\n                    this._animateShowing()\r\n                }), (() => {\r\n                    this._toggleVisibility(false);\r\n                    this._$content.css(\"visibility\", \"\");\r\n                    this._$content.toggleClass(\"dx-state-invisible\", true);\r\n                    this._isShowingActionCanceled = true;\r\n                    this._moveFromContainer();\r\n                    this._toggleBodyScroll(true);\r\n                    this.option(\"visible\", false);\r\n                    this._showingDeferred.resolve()\r\n                }))\r\n            };\r\n            if (this.option(\"templatesRenderAsynchronously\")) {\r\n                this._stopShowTimer();\r\n                this._asyncShowTimeout = setTimeout(show)\r\n            } else {\r\n                show()\r\n            }\r\n        }\r\n        return this._showingDeferred.promise()\r\n    }\r\n    _normalizeAnimation(showHideConfig, direction) {\r\n        if (showHideConfig) {\r\n            showHideConfig = extend({\r\n                type: \"slide\",\r\n                skipElementInitialStyles: true\r\n            }, showHideConfig);\r\n            if (isObject(showHideConfig[direction])) {\r\n                extend(showHideConfig[direction], {\r\n                    position: this._positionController.position\r\n                })\r\n            }\r\n        }\r\n        return showHideConfig\r\n    }\r\n    _animateHiding() {\r\n        var _this4 = this;\r\n        const animation = this._getAnimationConfig() ?? {};\r\n        const hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\r\n        const startHideAnimation = (null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.start) ?? noop;\r\n        const completeHideAnimation = (null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.complete) ?? noop;\r\n        this._animate(hideAnimation, (function() {\r\n            var _this4$_actions;\r\n            _this4._$content.css(\"pointerEvents\", \"\");\r\n            _this4._renderVisibility(false);\r\n            for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\r\n                args[_key3] = arguments[_key3]\r\n            }\r\n            completeHideAnimation.call(_this4, ...args);\r\n            _this4._hideAnimationProcessing = false;\r\n            null === (_this4$_actions = _this4._actions) || void 0 === _this4$_actions || _this4$_actions.onHidden();\r\n            _this4._hidingDeferred.resolve()\r\n        }), (function() {\r\n            _this4._$content.css(\"pointerEvents\", \"none\");\r\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\r\n                args[_key4] = arguments[_key4]\r\n            }\r\n            startHideAnimation.call(_this4, ...args);\r\n            _this4._hideAnimationProcessing = true\r\n        }))\r\n    }\r\n    _hide() {\r\n        if (!this._currentVisible) {\r\n            return Deferred().resolve().promise()\r\n        }\r\n        this._currentVisible = false;\r\n        this._hidingDeferred = Deferred();\r\n        const hidingArgs = {\r\n            cancel: false\r\n        };\r\n        if (this._isShowingActionCanceled) {\r\n            delete this._isShowingActionCanceled;\r\n            this._hidingDeferred.reject()\r\n        } else {\r\n            this._actions.onHiding(hidingArgs);\r\n            this._toggleSafariScrolling();\r\n            this._toggleBodyScroll(true);\r\n            const cancelHide = () => {\r\n                this._isHidingActionCanceled = true;\r\n                const {\r\n                    enableBodyScroll: enableBodyScroll\r\n                } = this.option();\r\n                this._toggleBodyScroll(enableBodyScroll);\r\n                this.option(\"visible\", true);\r\n                this._hidingDeferred.resolve()\r\n            };\r\n            const applyHide = () => {\r\n                this._forceFocusLost();\r\n                this._toggleShading(false);\r\n                this._toggleSubscriptions(false);\r\n                this._stopShowTimer();\r\n                this._animateHiding()\r\n            };\r\n            this._processShowingHidingCancel(hidingArgs.cancel, applyHide, cancelHide)\r\n        }\r\n        return this._hidingDeferred.promise()\r\n    }\r\n    _forceFocusLost() {\r\n        const activeElement = domAdapter.getActiveElement();\r\n        const shouldResetActiveElement = !!this._$content.find(activeElement).length;\r\n        if (shouldResetActiveElement) {\r\n            domUtils.resetActiveElement()\r\n        }\r\n    }\r\n    _animate(animation, completeCallback, startCallback) {\r\n        if (animation) {\r\n            startCallback = startCallback || animation.start || noop;\r\n            fx.animate(this._$content, extend({}, animation, {\r\n                start: startCallback,\r\n                complete: completeCallback\r\n            }))\r\n        } else {\r\n            completeCallback()\r\n        }\r\n    }\r\n    _stopAnimation() {\r\n        fx.stop(this._$content, true)\r\n    }\r\n    _renderVisibility(visible) {\r\n        if (visible && this._isParentHidden()) {\r\n            return\r\n        }\r\n        this._currentVisible = visible;\r\n        this._stopAnimation();\r\n        if (!visible) {\r\n            triggerHidingEvent(this._$content)\r\n        }\r\n        if (visible) {\r\n            this._checkContainerExists();\r\n            this._moveToContainer();\r\n            this._renderGeometry();\r\n            triggerShownEvent(this._$content);\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            this._toggleVisibility(visible);\r\n            this._$content.toggleClass(\"dx-state-invisible\", !visible);\r\n            this._updateZIndexStackPosition(visible);\r\n            this._moveFromContainer()\r\n        }\r\n        this._toggleShading(visible);\r\n        this._toggleSubscriptions(visible)\r\n    }\r\n    _updateZIndexStackPosition(pushToStack) {\r\n        const overlayStack = this._overlayStack();\r\n        const index = overlayStack.indexOf(this);\r\n        if (pushToStack) {\r\n            if (-1 === index) {\r\n                this._zIndex = zIndexPool.create(this._zIndexInitValue());\r\n                overlayStack.push(this)\r\n            }\r\n            this._$wrapper.css(\"zIndex\", this._zIndex);\r\n            this._$content.css(\"zIndex\", this._zIndex)\r\n        } else if (-1 !== index) {\r\n            overlayStack.splice(index, 1);\r\n            zIndexPool.remove(this._zIndex)\r\n        }\r\n    }\r\n    _toggleShading(visible) {\r\n        const {\r\n            shading: shading,\r\n            shadingColor: shadingColor\r\n        } = this.option();\r\n        this._$wrapper.toggleClass(\"dx-overlay-shader\", visible && shading);\r\n        this._$wrapper.css(\"backgroundColor\", shading ? shadingColor : \"\");\r\n        this._toggleTabTerminator(visible && shading)\r\n    }\r\n    _initTabTerminatorHandler() {\r\n        var _this5 = this;\r\n        this._proxiedTabTerminatorHandler = function() {\r\n            _this5._tabKeyHandler(...arguments)\r\n        }\r\n    }\r\n    _toggleTabTerminator(enabled) {\r\n        const {\r\n            _loopFocus: _loopFocus\r\n        } = this.option();\r\n        const eventName = addNamespace(\"keydown\", this.NAME);\r\n        if (_loopFocus || enabled) {\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        } else {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        }\r\n    }\r\n    _findTabbableBounds() {\r\n        const $elements = this._$wrapper.find(\"*\");\r\n        const elementsCount = $elements.length - 1;\r\n        let first = null;\r\n        let last = null;\r\n        for (let i = 0; i <= elementsCount; i += 1) {\r\n            if (!first && $elements.eq(i).is(tabbable)) {\r\n                first = $elements.eq(i)\r\n            }\r\n            if (!last && $elements.eq(elementsCount - i).is(tabbable)) {\r\n                last = $elements.eq(elementsCount - i)\r\n            }\r\n            if (first && last) {\r\n                break\r\n            }\r\n        }\r\n        return {\r\n            first: first,\r\n            last: last\r\n        }\r\n    }\r\n    _tabKeyHandler(e) {\r\n        if (\"tab\" !== normalizeKeyName(e) || !this._isTopOverlay()) {\r\n            return\r\n        }\r\n        const wrapper = this._$wrapper.get(0);\r\n        const activeElement = domAdapter.getActiveElement(wrapper);\r\n        const {\r\n            first: $firstTabbable,\r\n            last: $lastTabbable\r\n        } = this._findTabbableBounds();\r\n        const isTabOnLast = !e.shiftKey && activeElement === (null === $lastTabbable || void 0 === $lastTabbable ? void 0 : $lastTabbable.get(0));\r\n        const isShiftTabOnFirst = e.shiftKey && activeElement === (null === $firstTabbable || void 0 === $firstTabbable ? void 0 : $firstTabbable.get(0));\r\n        const isOutsideTarget = !domUtils.contains(wrapper, activeElement);\r\n        const shouldPreventDefault = isTabOnLast || isShiftTabOnFirst || isOutsideTarget;\r\n        if (shouldPreventDefault) {\r\n            e.preventDefault();\r\n            const $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\r\n            eventsEngine.trigger($focusElement, \"focusin\");\r\n            eventsEngine.trigger($focusElement, \"focus\")\r\n        }\r\n    }\r\n    _toggleSubscriptions(enabled) {\r\n        if (windowUtils.hasWindow()) {\r\n            this._toggleHideTopOverlayCallback(enabled);\r\n            this._toggleHideOnParentsScrollSubscription(enabled)\r\n        }\r\n    }\r\n    _toggleHideTopOverlayCallback(subscribe) {\r\n        if (!this._hideTopOverlayHandler) {\r\n            return\r\n        }\r\n        if (subscribe) {\r\n            hideTopOverlayCallback.add(this._hideTopOverlayHandler)\r\n        } else {\r\n            hideTopOverlayCallback.remove(this._hideTopOverlayHandler)\r\n        }\r\n    }\r\n    _toggleHideOnParentsScrollSubscription(needSubscribe) {\r\n        const scrollEvent = addNamespace(\"scroll\", this.NAME);\r\n        const {\r\n            prevTargets: prevTargets,\r\n            handler: handler\r\n        } = this._parentsScrollSubscriptionInfo ?? {};\r\n        eventsEngine.off(prevTargets, scrollEvent, handler);\r\n        const hideOnScroll = this.option(\"hideOnParentScroll\");\r\n        if (needSubscribe && hideOnScroll) {\r\n            let $parents = this._getHideOnParentScrollTarget().parents();\r\n            if (\"desktop\" === devices.real().deviceType) {\r\n                $parents = $parents.add(window)\r\n            }\r\n            eventsEngine.on($parents, scrollEvent, handler);\r\n            this._parentsScrollSubscriptionInfo.prevTargets = $parents\r\n        }\r\n    }\r\n    _hideOnParentsScrollHandler(e) {\r\n        let hideHandled = false;\r\n        const hideOnScroll = this.option(\"hideOnParentScroll\");\r\n        if (isFunction(hideOnScroll)) {\r\n            hideHandled = hideOnScroll(e)\r\n        }\r\n        if (!hideHandled && !this._showAnimationProcessing) {\r\n            this.hide()\r\n        }\r\n    }\r\n    _getHideOnParentScrollTarget() {\r\n        const {\r\n            _hideOnParentScrollTarget: _hideOnParentScrollTarget\r\n        } = this.option();\r\n        const $hideOnParentScrollTarget = $(_hideOnParentScrollTarget);\r\n        if ($hideOnParentScrollTarget.length) {\r\n            return $hideOnParentScrollTarget\r\n        }\r\n        return this._$wrapper\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._appendContentToElement();\r\n        this._renderVisibilityAnimate(this.option(\"visible\"))\r\n    }\r\n    _appendContentToElement() {\r\n        if (!this._$content.parent().is(this.$element())) {\r\n            this._$content.appendTo(this.$element())\r\n        }\r\n    }\r\n    _renderContent() {\r\n        const shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\r\n        const isParentHidden = this.option(\"visible\") && this._isParentHidden();\r\n        if (isParentHidden) {\r\n            this._isHidden = true;\r\n            return\r\n        }\r\n        if (this._contentAlreadyRendered || shouldDeferRendering) {\r\n            return\r\n        }\r\n        this._contentAlreadyRendered = true;\r\n        this._appendContentToElement();\r\n        super._renderContent()\r\n    }\r\n    _isParentHidden() {\r\n        if (!this.option(\"_checkParentVisibility\")) {\r\n            return false\r\n        }\r\n        if (void 0 !== this._parentHidden) {\r\n            return this._parentHidden\r\n        }\r\n        const $parent = this.$element().parent();\r\n        if ($parent.is(\":visible\")) {\r\n            return false\r\n        }\r\n        let isHidden = false;\r\n        $parent.add($parent.parents()).each(((index, element) => {\r\n            const $element = $(element);\r\n            if (\"none\" === $element.css(\"display\")) {\r\n                isHidden = true;\r\n                return false\r\n            }\r\n        }));\r\n        return isHidden || !domAdapter.getBody().contains($parent.get(0))\r\n    }\r\n    _renderContentImpl() {\r\n        const whenContentRendered = Deferred();\r\n        const contentTemplateOption = this.option(\"contentTemplate\");\r\n        const contentTemplate = this._getTemplate(contentTemplateOption);\r\n        const transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\r\n        null === contentTemplate || void 0 === contentTemplate || contentTemplate.render({\r\n            container: getPublicElement(this.$content()),\r\n            noModel: true,\r\n            transclude: transclude,\r\n            onRendered: () => {\r\n                whenContentRendered.resolve();\r\n                if (this.option(\"templatesRenderAsynchronously\")) {\r\n                    this._dimensionChanged()\r\n                }\r\n            }\r\n        });\r\n        const {\r\n            preventScrollEvents: preventScrollEvents\r\n        } = this.option();\r\n        this._toggleWrapperScrollEventsSubscription(preventScrollEvents);\r\n        whenContentRendered.done((() => {\r\n            if (this.option(\"visible\")) {\r\n                this._moveToContainer()\r\n            }\r\n        }));\r\n        return whenContentRendered.promise()\r\n    }\r\n    _getPositionControllerConfig() {\r\n        const {\r\n            container: container,\r\n            visualContainer: visualContainer,\r\n            _fixWrapperPosition: _fixWrapperPosition,\r\n            restorePosition: restorePosition,\r\n            _skipContentPositioning: _skipContentPositioning\r\n        } = this.option();\r\n        return {\r\n            container: container,\r\n            visualContainer: visualContainer,\r\n            $root: this.$element(),\r\n            $content: this._$content,\r\n            $wrapper: this._$wrapper,\r\n            onPositioned: this._actions.onPositioned,\r\n            onVisualPositionChanged: this._actions.onVisualPositionChanged,\r\n            restorePosition: restorePosition,\r\n            _fixWrapperPosition: _fixWrapperPosition,\r\n            _skipContentPositioning: _skipContentPositioning\r\n        }\r\n    }\r\n    _initPositionController() {\r\n        this._positionController = new OverlayPositionController(this._getPositionControllerConfig())\r\n    }\r\n    _toggleWrapperScrollEventsSubscription(enabled) {\r\n        const eventName = addNamespace(dragEventMove, this.NAME);\r\n        eventsEngine.off(this._$wrapper, eventName);\r\n        if (enabled) {\r\n            eventsEngine.on(this._$wrapper, eventName, {\r\n                validate: () => true,\r\n                getDirection: () => \"both\",\r\n                _toggleGestureCover(toggle) {\r\n                    if (!toggle) {\r\n                        this._toggleGestureCoverImpl(toggle)\r\n                    }\r\n                },\r\n                _clearSelection: noop,\r\n                isNative: true\r\n            }, (e => {\r\n                const {\r\n                    originalEvent: originalEvent\r\n                } = e.originalEvent;\r\n                const {\r\n                    type: type\r\n                } = originalEvent || {};\r\n                const isWheel = \"wheel\" === type;\r\n                const isMouseMove = \"mousemove\" === type;\r\n                const isScrollByWheel = isWheel && !isCommandKeyPressed(e);\r\n                e._cancelPreventDefault = true;\r\n                if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\r\n                    e.preventDefault()\r\n                }\r\n            }))\r\n        }\r\n    }\r\n    _moveFromContainer() {\r\n        this._$content.appendTo(this.$element());\r\n        this._$wrapper.detach()\r\n    }\r\n    _checkContainerExists() {\r\n        const $wrapperContainer = this._positionController.$container;\r\n        if (void 0 === $wrapperContainer) {\r\n            return\r\n        }\r\n        const containerExists = $wrapperContainer.length > 0;\r\n        if (!containerExists) {\r\n            uiErrors.log(\"W1021\", this.NAME)\r\n        }\r\n    }\r\n    _moveToContainer() {\r\n        const $wrapperContainer = this._positionController.$container;\r\n        this._$wrapper.appendTo($wrapperContainer);\r\n        this._$content.appendTo(this._$wrapper)\r\n    }\r\n    _renderGeometry(options) {\r\n        const {\r\n            visible: visible\r\n        } = this.option();\r\n        if (visible && windowUtils.hasWindow()) {\r\n            this._stopAnimation();\r\n            this._renderGeometryImpl()\r\n        }\r\n    }\r\n    _renderGeometryImpl() {\r\n        this._positionController.updatePosition(this._getOptionValue(\"position\"));\r\n        this._renderWrapper();\r\n        this._renderDimensions();\r\n        this._renderPosition()\r\n    }\r\n    _renderPosition(state) {\r\n        this._positionController.positionContent()\r\n    }\r\n    _isAllWindowCovered() {\r\n        const {\r\n            shading: shading\r\n        } = this.option();\r\n        return isWindow(this._positionController.$visualContainer.get(0)) && shading\r\n    }\r\n    _toggleSafariScrolling() {\r\n        const visible = this.option(\"visible\");\r\n        const $body = $(domAdapter.getBody());\r\n        const isIosSafari = \"ios\" === devices.real().platform && browser.safari;\r\n        const isAllWindowCovered = this._isAllWindowCovered();\r\n        const isScrollingPrevented = $body.hasClass(\"dx-prevent-safari-scrolling\");\r\n        const shouldPreventScrolling = !isScrollingPrevented && visible && isAllWindowCovered;\r\n        const shouldEnableScrolling = isScrollingPrevented && (!visible || !isAllWindowCovered || this._disposed);\r\n        if (isIosSafari) {\r\n            if (shouldEnableScrolling) {\r\n                $body.removeClass(\"dx-prevent-safari-scrolling\");\r\n                window.scrollTo(0, this._cachedBodyScrollTop);\r\n                this._cachedBodyScrollTop = void 0\r\n            } else if (shouldPreventScrolling) {\r\n                this._cachedBodyScrollTop = window.pageYOffset;\r\n                $body.addClass(\"dx-prevent-safari-scrolling\")\r\n            }\r\n        }\r\n    }\r\n    _renderWrapper() {\r\n        this._positionController.styleWrapperPosition();\r\n        this._renderWrapperDimensions();\r\n        this._positionController.positionWrapper()\r\n    }\r\n    _renderWrapperDimensions() {\r\n        const {\r\n            $visualContainer: $visualContainer\r\n        } = this._positionController;\r\n        const documentElement = domAdapter.getDocumentElement();\r\n        const isVisualContainerWindow = isWindow($visualContainer.get(0));\r\n        const wrapperWidth = isVisualContainerWindow ? documentElement.clientWidth : getOuterWidth($visualContainer);\r\n        const wrapperHeight = isVisualContainerWindow ? window.innerHeight : getOuterHeight($visualContainer);\r\n        this._$wrapper.css({\r\n            width: wrapperWidth,\r\n            height: wrapperHeight\r\n        })\r\n    }\r\n    _renderDimensions() {\r\n        const content = this._$content.get(0);\r\n        this._$content.css({\r\n            minWidth: this._getOptionValue(\"minWidth\", content),\r\n            maxWidth: this._getOptionValue(\"maxWidth\", content),\r\n            minHeight: this._getOptionValue(\"minHeight\", content),\r\n            maxHeight: this._getOptionValue(\"maxHeight\", content),\r\n            width: this._getOptionValue(\"width\", content),\r\n            height: this._getOptionValue(\"height\", content)\r\n        })\r\n    }\r\n    _focusTarget() {\r\n        return this._$content\r\n    }\r\n    _attachKeyboardEvents() {\r\n        this._keyboardListenerId = keyboard.on(this._$content, null, (opts => this._keyboardHandler(opts)))\r\n    }\r\n    _keyboardHandler(options) {\r\n        const e = options.originalEvent;\r\n        const $target = $(e.target);\r\n        if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\r\n            super._keyboardHandler(...arguments)\r\n        }\r\n    }\r\n    _isVisible() {\r\n        const {\r\n            visible: visible\r\n        } = this.option();\r\n        return visible\r\n    }\r\n    _visibilityChanged(visible) {\r\n        if (visible) {\r\n            if (this.option(\"visible\")) {\r\n                this._renderVisibilityAnimate(visible)\r\n            }\r\n        } else {\r\n            this._renderVisibilityAnimate(visible)\r\n        }\r\n    }\r\n    _dimensionChanged() {\r\n        this._renderGeometry()\r\n    }\r\n    _clean() {\r\n        const {\r\n            isRenovated: isRenovated\r\n        } = this.option();\r\n        if (!this._contentAlreadyRendered && !isRenovated) {\r\n            this.$content().empty()\r\n        }\r\n        this._renderVisibility(false);\r\n        this._stopShowTimer();\r\n        this._cleanFocusState()\r\n    }\r\n    _stopShowTimer() {\r\n        if (this._asyncShowTimeout) {\r\n            clearTimeout(this._asyncShowTimeout)\r\n        }\r\n        this._asyncShowTimeout = null\r\n    }\r\n    _dispose() {\r\n        fx.stop(this._$content, false);\r\n        this._toggleViewPortSubscription(false);\r\n        this._toggleSubscriptions(false);\r\n        this._updateZIndexStackPosition(false);\r\n        this._toggleTabTerminator(false);\r\n        this._actions = null;\r\n        this._parentsScrollSubscriptionInfo = null;\r\n        super._dispose();\r\n        this._toggleSafariScrolling();\r\n        this.option(\"visible\") && zIndexPool.remove(this._zIndex);\r\n        this._$wrapper.remove();\r\n        this._$content.remove()\r\n    }\r\n    _toggleRTLDirection(rtl) {\r\n        this._$content.toggleClass(\"dx-rtl\", rtl)\r\n    }\r\n    _optionChanged(args) {\r\n        const {\r\n            value: value,\r\n            name: name\r\n        } = args;\r\n        if (this._getActionsList().includes(name)) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (name) {\r\n            case \"animation\":\r\n            case \"closeOnOutsideClick\":\r\n            case \"hideOnOutsideClick\":\r\n            case \"propagateOutsideClick\":\r\n                break;\r\n            case \"_loopFocus\":\r\n            case \"shading\": {\r\n                const {\r\n                    visible: visible\r\n                } = this.option();\r\n                this._toggleShading(visible);\r\n                this._toggleSafariScrolling();\r\n                break\r\n            }\r\n            case \"shadingColor\": {\r\n                const {\r\n                    visible: visible\r\n                } = this.option();\r\n                this._toggleShading(visible);\r\n                break\r\n            }\r\n            case \"width\":\r\n            case \"height\":\r\n            case \"minWidth\":\r\n            case \"maxWidth\":\r\n            case \"minHeight\":\r\n            case \"maxHeight\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"position\":\r\n                this._positionController.updatePosition(this.option(\"position\"));\r\n                this._positionController.restorePositionOnNextRender(true);\r\n                this._renderGeometry();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"visible\":\r\n                this._renderVisibilityAnimate(value).done((() => {\r\n                    var _this$_animateDeferre;\r\n                    return null === (_this$_animateDeferre = this._animateDeferred) || void 0 === _this$_animateDeferre ? void 0 : _this$_animateDeferre.resolveWith(this)\r\n                })).fail((() => {\r\n                    var _this$_animateDeferre2;\r\n                    return null === (_this$_animateDeferre2 = this._animateDeferred) || void 0 === _this$_animateDeferre2 ? void 0 : _this$_animateDeferre2.reject()\r\n                }));\r\n                break;\r\n            case \"container\":\r\n                this._positionController.updateContainer(value);\r\n                this._invalidate();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"visualContainer\":\r\n                this._positionController.updateVisualContainer(value);\r\n                this._renderWrapper();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"innerOverlay\":\r\n                this._initInnerOverlayClass();\r\n                break;\r\n            case \"deferRendering\":\r\n            case \"contentTemplate\":\r\n                this._contentAlreadyRendered = false;\r\n                this._clean();\r\n                this._invalidate();\r\n                break;\r\n            case \"hideTopOverlayHandler\":\r\n                this._toggleHideTopOverlayCallback(false);\r\n                this._initHideTopOverlayHandler(value);\r\n                this._toggleHideTopOverlayCallback(this.option(\"visible\"));\r\n                break;\r\n            case \"hideOnParentScroll\":\r\n            case \"_hideOnParentScrollTarget\": {\r\n                const {\r\n                    visible: visible\r\n                } = this.option();\r\n                this._toggleHideOnParentsScrollSubscription(visible);\r\n                break\r\n            }\r\n            case \"rtlEnabled\":\r\n                this._contentAlreadyRendered = false;\r\n                super._optionChanged(args);\r\n                break;\r\n            case \"_fixWrapperPosition\":\r\n                this._positionController.fixWrapperPosition = value;\r\n                break;\r\n            case \"wrapperAttr\":\r\n                this._renderWrapperAttributes();\r\n                break;\r\n            case \"restorePosition\":\r\n                this._positionController.restorePosition = value;\r\n                break;\r\n            case \"preventScrollEvents\":\r\n                this._logDeprecatedPreventScrollEventsInfo();\r\n                this._toggleWrapperScrollEventsSubscription(value);\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    toggle(showing) {\r\n        showing = void 0 === showing ? !this.option(\"visible\") : showing;\r\n        const result = Deferred();\r\n        if (showing === this.option(\"visible\")) {\r\n            return result.resolveWith(this, [showing]).promise()\r\n        }\r\n        const animateDeferred = Deferred();\r\n        this._animateDeferred = animateDeferred;\r\n        this.option(\"visible\", showing);\r\n        animateDeferred.promise().done((() => {\r\n            delete this._animateDeferred;\r\n            result.resolveWith(this, [this.option(\"visible\")])\r\n        })).fail((() => {\r\n            delete this._animateDeferred;\r\n            result.reject()\r\n        }));\r\n        return result.promise()\r\n    }\r\n    $content() {\r\n        return this._$content\r\n    }\r\n    show() {\r\n        return this.toggle(true)\r\n    }\r\n    hide() {\r\n        return this.toggle(false)\r\n    }\r\n    content() {\r\n        return getPublicElement(this._$content)\r\n    }\r\n    repaint() {\r\n        if (this._contentAlreadyRendered) {\r\n            this._positionController.restorePositionOnNextRender(true);\r\n            this._renderGeometry({\r\n                forceStopAnimation: true\r\n            });\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            super.repaint()\r\n        }\r\n    }\r\n}\r\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\r\nregisterComponent(\"dxOverlay\", Overlay);\r\nexport default Overlay;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}