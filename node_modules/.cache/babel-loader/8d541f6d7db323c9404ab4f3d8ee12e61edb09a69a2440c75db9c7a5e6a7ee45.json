{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/core/utils/m_ajax.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport httpRequest from \"../../../core/http_request\";\nimport { evalCrossDomainScript, evalScript, getJsonpCallbackName as getJsonpOptions, getMethod, getRequestHeaders, getRequestOptions, isCrossDomain } from \"../../../core/utils/ajax_utils\";\nimport { Deferred } from \"../../../core/utils/deferred\";\nimport injector from \"../../../core/utils/dependency_injector\";\nimport { isDefined } from \"../../../core/utils/type\";\nimport { getWindow } from \"../../../core/utils/window\";\nconst window = getWindow();\nconst SUCCESS = \"success\";\nconst ERROR = \"error\";\nconst TIMEOUT = \"timeout\";\nconst NO_CONTENT = \"nocontent\";\nconst PARSER_ERROR = \"parsererror\";\nconst isStatusSuccess = function (status) {\n  return status >= 200 && status < 300;\n};\nconst hasContent = function (status) {\n  return 204 !== status;\n};\nconst getDataFromResponse = function (xhr) {\n  return xhr.responseType && \"text\" !== xhr.responseType || \"string\" !== typeof xhr.responseText ? xhr.response : xhr.responseText;\n};\nconst postProcess = function (deferred, xhr, dataType) {\n  const data = getDataFromResponse(xhr);\n  switch (dataType) {\n    case \"jsonp\":\n      evalScript(data);\n      break;\n    case \"script\":\n      evalScript(data);\n      deferred.resolve(data, SUCCESS, xhr);\n      break;\n    case \"json\":\n      try {\n        deferred.resolve(JSON.parse(data), SUCCESS, xhr);\n      } catch (e) {\n        deferred.reject(xhr, PARSER_ERROR, e);\n      }\n      break;\n    default:\n      deferred.resolve(data, SUCCESS, xhr);\n  }\n};\nconst setHttpTimeout = function (timeout, xhr) {\n  return timeout && setTimeout(function () {\n    xhr.customStatus = TIMEOUT;\n    xhr.abort();\n  }, timeout);\n};\nconst sendRequest = function (options) {\n  const xhr = httpRequest.getXhr();\n  const d = new Deferred();\n  const result = d.promise();\n  const async = isDefined(options.async) ? options.async : true;\n  const {\n    dataType: dataType\n  } = options;\n  const timeout = options.timeout || 0;\n  let timeoutId;\n  options.crossDomain = isCrossDomain(options.url);\n  const needScriptEvaluation = \"jsonp\" === dataType || \"script\" === dataType;\n  if (void 0 === options.cache) {\n    options.cache = !needScriptEvaluation;\n  }\n  const callbackName = getJsonpOptions(options);\n  const headers = getRequestHeaders(options);\n  const requestOptions = getRequestOptions(options, headers);\n  const {\n    url: url\n  } = requestOptions;\n  const {\n    parameters: parameters\n  } = requestOptions;\n  if (callbackName) {\n    window[callbackName] = function (data) {\n      d.resolve(data, SUCCESS, xhr);\n    };\n  }\n  if (options.crossDomain && needScriptEvaluation) {\n    const reject = function () {\n      d.reject(xhr, ERROR);\n    };\n    const resolve = function () {\n      if (\"jsonp\" === dataType) {\n        return;\n      }\n      d.resolve(null, SUCCESS, xhr);\n    };\n    evalCrossDomainScript(url).then(resolve, reject);\n    return result;\n  }\n  if (options.crossDomain && !(\"withCredentials\" in xhr)) {\n    d.reject(xhr, ERROR);\n    return result;\n  }\n  xhr.open(getMethod(options), url, async, options.username, options.password);\n  if (async) {\n    xhr.timeout = timeout;\n    timeoutId = setHttpTimeout(timeout, xhr);\n  }\n  xhr.onreadystatechange = function (e) {\n    if (4 === xhr.readyState) {\n      clearTimeout(timeoutId);\n      if (isStatusSuccess(xhr.status)) {\n        if (hasContent(xhr.status)) {\n          postProcess(d, xhr, dataType);\n        } else {\n          d.resolve(null, NO_CONTENT, xhr);\n        }\n      } else {\n        d.reject(xhr, xhr.customStatus || ERROR);\n      }\n    }\n  };\n  if (options.upload) {\n    xhr.upload.onprogress = options.upload.onprogress;\n    xhr.upload.onloadstart = options.upload.onloadstart;\n    xhr.upload.onabort = options.upload.onabort;\n  }\n  if (options.xhrFields) {\n    for (const field in options.xhrFields) {\n      xhr[field] = options.xhrFields[field];\n    }\n  }\n  if (\"arraybuffer\" === options.responseType) {\n    xhr.responseType = options.responseType;\n  }\n  for (const name in headers) {\n    if (Object.prototype.hasOwnProperty.call(headers, name) && isDefined(headers[name])) {\n      xhr.setRequestHeader(name, headers[name]);\n    }\n  }\n  if (options.beforeSend) {\n    options.beforeSend(xhr);\n  }\n  xhr.send(parameters);\n  result.abort = function () {\n    xhr.abort();\n  };\n  return result;\n};\nconst Ajax = injector({\n  sendRequest: sendRequest\n});\nexport { Ajax };","map":{"version":3,"names":["httpRequest","evalCrossDomainScript","evalScript","getJsonpCallbackName","getJsonpOptions","getMethod","getRequestHeaders","getRequestOptions","isCrossDomain","Deferred","injector","isDefined","getWindow","window","SUCCESS","ERROR","TIMEOUT","NO_CONTENT","PARSER_ERROR","isStatusSuccess","status","hasContent","getDataFromResponse","xhr","responseType","responseText","response","postProcess","deferred","dataType","data","resolve","JSON","parse","e","reject","setHttpTimeout","timeout","setTimeout","customStatus","abort","sendRequest","options","getXhr","d","result","promise","async","timeoutId","crossDomain","url","needScriptEvaluation","cache","callbackName","headers","requestOptions","parameters","then","open","username","password","onreadystatechange","readyState","clearTimeout","upload","onprogress","onloadstart","onabort","xhrFields","field","name","Object","prototype","hasOwnProperty","call","setRequestHeader","beforeSend","send","Ajax"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme/esm/__internal/core/utils/m_ajax.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/core/utils/m_ajax.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport httpRequest from \"../../../core/http_request\";\r\nimport {\r\n    evalCrossDomainScript,\r\n    evalScript,\r\n    getJsonpCallbackName as getJsonpOptions,\r\n    getMethod,\r\n    getRequestHeaders,\r\n    getRequestOptions,\r\n    isCrossDomain\r\n} from \"../../../core/utils/ajax_utils\";\r\nimport {\r\n    Deferred\r\n} from \"../../../core/utils/deferred\";\r\nimport injector from \"../../../core/utils/dependency_injector\";\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    getWindow\r\n} from \"../../../core/utils/window\";\r\nconst window = getWindow();\r\nconst SUCCESS = \"success\";\r\nconst ERROR = \"error\";\r\nconst TIMEOUT = \"timeout\";\r\nconst NO_CONTENT = \"nocontent\";\r\nconst PARSER_ERROR = \"parsererror\";\r\nconst isStatusSuccess = function(status) {\r\n    return status >= 200 && status < 300\r\n};\r\nconst hasContent = function(status) {\r\n    return 204 !== status\r\n};\r\nconst getDataFromResponse = function(xhr) {\r\n    return xhr.responseType && \"text\" !== xhr.responseType || \"string\" !== typeof xhr.responseText ? xhr.response : xhr.responseText\r\n};\r\nconst postProcess = function(deferred, xhr, dataType) {\r\n    const data = getDataFromResponse(xhr);\r\n    switch (dataType) {\r\n        case \"jsonp\":\r\n            evalScript(data);\r\n            break;\r\n        case \"script\":\r\n            evalScript(data);\r\n            deferred.resolve(data, SUCCESS, xhr);\r\n            break;\r\n        case \"json\":\r\n            try {\r\n                deferred.resolve(JSON.parse(data), SUCCESS, xhr)\r\n            } catch (e) {\r\n                deferred.reject(xhr, PARSER_ERROR, e)\r\n            }\r\n            break;\r\n        default:\r\n            deferred.resolve(data, SUCCESS, xhr)\r\n    }\r\n};\r\nconst setHttpTimeout = function(timeout, xhr) {\r\n    return timeout && setTimeout((function() {\r\n        xhr.customStatus = TIMEOUT;\r\n        xhr.abort()\r\n    }), timeout)\r\n};\r\nconst sendRequest = function(options) {\r\n    const xhr = httpRequest.getXhr();\r\n    const d = new Deferred;\r\n    const result = d.promise();\r\n    const async = isDefined(options.async) ? options.async : true;\r\n    const {\r\n        dataType: dataType\r\n    } = options;\r\n    const timeout = options.timeout || 0;\r\n    let timeoutId;\r\n    options.crossDomain = isCrossDomain(options.url);\r\n    const needScriptEvaluation = \"jsonp\" === dataType || \"script\" === dataType;\r\n    if (void 0 === options.cache) {\r\n        options.cache = !needScriptEvaluation\r\n    }\r\n    const callbackName = getJsonpOptions(options);\r\n    const headers = getRequestHeaders(options);\r\n    const requestOptions = getRequestOptions(options, headers);\r\n    const {\r\n        url: url\r\n    } = requestOptions;\r\n    const {\r\n        parameters: parameters\r\n    } = requestOptions;\r\n    if (callbackName) {\r\n        window[callbackName] = function(data) {\r\n            d.resolve(data, SUCCESS, xhr)\r\n        }\r\n    }\r\n    if (options.crossDomain && needScriptEvaluation) {\r\n        const reject = function() {\r\n            d.reject(xhr, ERROR)\r\n        };\r\n        const resolve = function() {\r\n            if (\"jsonp\" === dataType) {\r\n                return\r\n            }\r\n            d.resolve(null, SUCCESS, xhr)\r\n        };\r\n        evalCrossDomainScript(url).then(resolve, reject);\r\n        return result\r\n    }\r\n    if (options.crossDomain && !(\"withCredentials\" in xhr)) {\r\n        d.reject(xhr, ERROR);\r\n        return result\r\n    }\r\n    xhr.open(getMethod(options), url, async, options.username, options.password);\r\n    if (async) {\r\n        xhr.timeout = timeout;\r\n        timeoutId = setHttpTimeout(timeout, xhr)\r\n    }\r\n    xhr.onreadystatechange = function(e) {\r\n        if (4 === xhr.readyState) {\r\n            clearTimeout(timeoutId);\r\n            if (isStatusSuccess(xhr.status)) {\r\n                if (hasContent(xhr.status)) {\r\n                    postProcess(d, xhr, dataType)\r\n                } else {\r\n                    d.resolve(null, NO_CONTENT, xhr)\r\n                }\r\n            } else {\r\n                d.reject(xhr, xhr.customStatus || ERROR)\r\n            }\r\n        }\r\n    };\r\n    if (options.upload) {\r\n        xhr.upload.onprogress = options.upload.onprogress;\r\n        xhr.upload.onloadstart = options.upload.onloadstart;\r\n        xhr.upload.onabort = options.upload.onabort\r\n    }\r\n    if (options.xhrFields) {\r\n        for (const field in options.xhrFields) {\r\n            xhr[field] = options.xhrFields[field]\r\n        }\r\n    }\r\n    if (\"arraybuffer\" === options.responseType) {\r\n        xhr.responseType = options.responseType\r\n    }\r\n    for (const name in headers) {\r\n        if (Object.prototype.hasOwnProperty.call(headers, name) && isDefined(headers[name])) {\r\n            xhr.setRequestHeader(name, headers[name])\r\n        }\r\n    }\r\n    if (options.beforeSend) {\r\n        options.beforeSend(xhr)\r\n    }\r\n    xhr.send(parameters);\r\n    result.abort = function() {\r\n        xhr.abort()\r\n    };\r\n    return result\r\n};\r\nconst Ajax = injector({\r\n    sendRequest: sendRequest\r\n});\r\nexport {\r\n    Ajax\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}