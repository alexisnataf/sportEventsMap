{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/data/m_array_utils.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { errors } from \"../../common/data/errors\";\nimport { keysEqual, rejectedPromise, trivialPromise } from \"../../common/data/utils\";\nimport config from \"../../core/config\";\nimport Guid from \"../../core/guid\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport { extend } from \"../../core/utils/extend\";\nimport { deepExtendArraySafe } from \"../../core/utils/object\";\nimport { isDefined, isEmptyObject, isObject, isPlainObject } from \"../../core/utils/type\";\nfunction hasKey(target, keyOrKeys) {\n  let key;\n  const keys = \"string\" === typeof keyOrKeys ? keyOrKeys.split() : keyOrKeys.slice();\n  while (keys.length) {\n    key = keys.shift();\n    if (key in target) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction findItems(keyInfo, items, key, groupCount) {\n  let childItems;\n  let result;\n  if (groupCount) {\n    for (let i = 0; i < items.length; i++) {\n      childItems = items[i].items || items[i].collapsedItems || [];\n      result = findItems(keyInfo, childItems || [], key, groupCount - 1);\n      if (result) {\n        return result;\n      }\n    }\n  } else if (indexByKey(keyInfo, items, key) >= 0) {\n    return items;\n  }\n}\nfunction getItems(keyInfo, items, key, groupCount) {\n  if (groupCount) {\n    return findItems(keyInfo, items, key, groupCount) || [];\n  }\n  return items;\n}\nfunction generateDataByKeyMap(keyInfo, array) {\n  if (keyInfo.key() && (!array._dataByKeyMap || array._dataByKeyMapLength !== array.length)) {\n    const dataByKeyMap = {};\n    const arrayLength = array.length;\n    for (let i = 0; i < arrayLength; i++) {\n      dataByKeyMap[JSON.stringify(keyInfo.keyOf(array[i]))] = array[i];\n    }\n    array._dataByKeyMap = dataByKeyMap;\n    array._dataByKeyMapLength = arrayLength;\n  }\n}\nfunction getCacheValue(array, key) {\n  if (array._dataByKeyMap) {\n    return array._dataByKeyMap[JSON.stringify(key)];\n  }\n}\nfunction getHasKeyCacheValue(array, key) {\n  if (array._dataByKeyMap) {\n    return array._dataByKeyMap[JSON.stringify(key)];\n  }\n  return true;\n}\nfunction setDataByKeyMapValue(array, key, data) {\n  if (array._dataByKeyMap) {\n    array._dataByKeyMap[JSON.stringify(key)] = data;\n    array._dataByKeyMapLength += data ? 1 : -1;\n  }\n}\nfunction cloneInstanceWithChangedPaths(instance, changes, clonedInstances) {\n  clonedInstances = clonedInstances || new WeakMap();\n  const result = instance ? Object.create(Object.getPrototypeOf(instance)) : {};\n  if (instance) {\n    clonedInstances.set(instance, result);\n  }\n  const instanceWithoutPrototype = _extends({}, instance);\n  deepExtendArraySafe(result, instanceWithoutPrototype, true, true, true);\n  for (const name in instanceWithoutPrototype) {\n    const value = instanceWithoutPrototype[name];\n    const change = null === changes || void 0 === changes ? void 0 : changes[name];\n    if (isObject(value) && !isPlainObject(value) && isObject(change) && !clonedInstances.has(value)) {\n      result[name] = cloneInstanceWithChangedPaths(value, change, clonedInstances);\n    }\n  }\n  for (const name in result) {\n    const prop = result[name];\n    if (isObject(prop) && clonedInstances.has(prop)) {\n      result[name] = clonedInstances.get(prop);\n    }\n  }\n  return result;\n}\nfunction createObjectWithChanges(target, changes) {\n  const result = cloneInstanceWithChangedPaths(target, changes);\n  return deepExtendArraySafe(result, changes, true, true, true);\n}\nfunction applyBatch(_ref) {\n  let {\n    keyInfo: keyInfo,\n    data: data,\n    changes: changes,\n    groupCount: groupCount,\n    useInsertIndex: useInsertIndex,\n    immutable: immutable,\n    disableCache: disableCache,\n    logError: logError,\n    skipCopying: skipCopying\n  } = _ref;\n  const resultItems = true === immutable ? [...data] : data;\n  changes.forEach(item => {\n    const items = \"insert\" === item.type ? resultItems : getItems(keyInfo, resultItems, item.key, groupCount);\n    !disableCache && generateDataByKeyMap(keyInfo, items);\n    switch (item.type) {\n      case \"update\":\n        update(keyInfo, items, item.key, item.data, true, immutable, logError);\n        break;\n      case \"insert\":\n        insert(keyInfo, items, item.data, useInsertIndex && isDefined(item.index) ? item.index : -1, true, logError, skipCopying);\n        break;\n      case \"remove\":\n        remove(keyInfo, items, item.key, true, logError);\n    }\n  });\n  return resultItems;\n}\nfunction getErrorResult(isBatch, logError, errorCode) {\n  return !isBatch ? rejectedPromise(errors.Error(errorCode)) : logError && errors.log(errorCode);\n}\nfunction applyChanges(data, changes) {\n  let options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n  const {\n    keyExpr = \"id\",\n    immutable = true\n  } = options;\n  const keyGetter = compileGetter(keyExpr);\n  const keyInfo = {\n    key: () => keyExpr,\n    keyOf: obj => keyGetter(obj)\n  };\n  return applyBatch({\n    keyInfo: keyInfo,\n    data: data,\n    changes: changes,\n    immutable: immutable,\n    disableCache: true,\n    logError: true\n  });\n}\nfunction update(keyInfo, array, key, data, isBatch, immutable, logError) {\n  let target;\n  const keyExpr = keyInfo.key();\n  if (keyExpr) {\n    if (hasKey(data, keyExpr) && !keysEqual(keyExpr, key, keyInfo.keyOf(data))) {\n      return getErrorResult(isBatch, logError, \"E4017\");\n    }\n    target = getCacheValue(array, key);\n    if (!target) {\n      const index = indexByKey(keyInfo, array, key);\n      if (index < 0) {\n        return getErrorResult(isBatch, logError, \"E4009\");\n      }\n      target = array[index];\n      if (true === immutable && isDefined(target)) {\n        const newTarget = createObjectWithChanges(target, data);\n        array[index] = newTarget;\n        return !isBatch && trivialPromise(newTarget, key);\n      }\n    }\n  } else {\n    target = key;\n  }\n  deepExtendArraySafe(target, data, true, false, true, true);\n  if (!isBatch) {\n    if (config().useLegacyStoreResult) {\n      return trivialPromise(key, data);\n    }\n    return trivialPromise(target, key);\n  }\n}\nfunction insert(keyInfo, array, data, index, isBatch, logError, skipCopying) {\n  let keyValue;\n  const keyExpr = keyInfo.key();\n  const obj = isPlainObject(data) && !skipCopying ? extend({}, data) : data;\n  if (keyExpr) {\n    keyValue = keyInfo.keyOf(obj);\n    if (void 0 === keyValue || \"object\" === typeof keyValue && isEmptyObject(keyValue)) {\n      if (Array.isArray(keyExpr)) {\n        throw errors.Error(\"E4007\");\n      }\n      keyValue = obj[keyExpr] = String(new Guid());\n    } else if (void 0 !== array[indexByKey(keyInfo, array, keyValue)]) {\n      return getErrorResult(isBatch, logError, \"E4008\");\n    }\n  } else {\n    keyValue = obj;\n  }\n  if (index >= 0) {\n    array.splice(index, 0, obj);\n  } else {\n    array.push(obj);\n  }\n  setDataByKeyMapValue(array, keyValue, obj);\n  if (!isBatch) {\n    return trivialPromise(config().useLegacyStoreResult ? data : obj, keyValue);\n  }\n}\nfunction remove(keyInfo, array, key, isBatch, logError) {\n  const index = indexByKey(keyInfo, array, key);\n  if (index > -1) {\n    array.splice(index, 1);\n    setDataByKeyMapValue(array, key, null);\n  }\n  if (!isBatch) {\n    return trivialPromise(key);\n  }\n  if (index < 0) {\n    return getErrorResult(isBatch, logError, \"E4009\");\n  }\n}\nfunction indexByKey(keyInfo, array, key) {\n  const keyExpr = keyInfo.key();\n  if (!getHasKeyCacheValue(array, key)) {\n    return -1;\n  }\n  for (let i = 0, arrayLength = array.length; i < arrayLength; i++) {\n    if (keysEqual(keyExpr, keyInfo.keyOf(array[i]), key)) {\n      return i;\n    }\n  }\n  return -1;\n}\nexport { applyBatch, applyChanges, createObjectWithChanges, indexByKey, insert, remove, update };","map":{"version":3,"names":["_extends","errors","keysEqual","rejectedPromise","trivialPromise","config","Guid","compileGetter","extend","deepExtendArraySafe","isDefined","isEmptyObject","isObject","isPlainObject","hasKey","target","keyOrKeys","key","keys","split","slice","length","shift","findItems","keyInfo","items","groupCount","childItems","result","i","collapsedItems","indexByKey","getItems","generateDataByKeyMap","array","_dataByKeyMap","_dataByKeyMapLength","dataByKeyMap","arrayLength","JSON","stringify","keyOf","getCacheValue","getHasKeyCacheValue","setDataByKeyMapValue","data","cloneInstanceWithChangedPaths","instance","changes","clonedInstances","WeakMap","Object","create","getPrototypeOf","set","instanceWithoutPrototype","name","value","change","has","prop","get","createObjectWithChanges","applyBatch","_ref","useInsertIndex","immutable","disableCache","logError","skipCopying","resultItems","forEach","item","type","update","insert","index","remove","getErrorResult","isBatch","errorCode","Error","log","applyChanges","options","arguments","keyExpr","keyGetter","obj","newTarget","useLegacyStoreResult","keyValue","Array","isArray","String","splice","push"],"sources":["/home/nataf/Cours/world-cities-map/client/node_modules/devextreme/esm/__internal/data/m_array_utils.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/data/m_array_utils.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    errors\r\n} from \"../../common/data/errors\";\r\nimport {\r\n    keysEqual,\r\n    rejectedPromise,\r\n    trivialPromise\r\n} from \"../../common/data/utils\";\r\nimport config from \"../../core/config\";\r\nimport Guid from \"../../core/guid\";\r\nimport {\r\n    compileGetter\r\n} from \"../../core/utils/data\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    deepExtendArraySafe\r\n} from \"../../core/utils/object\";\r\nimport {\r\n    isDefined,\r\n    isEmptyObject,\r\n    isObject,\r\n    isPlainObject\r\n} from \"../../core/utils/type\";\r\n\r\nfunction hasKey(target, keyOrKeys) {\r\n    let key;\r\n    const keys = \"string\" === typeof keyOrKeys ? keyOrKeys.split() : keyOrKeys.slice();\r\n    while (keys.length) {\r\n        key = keys.shift();\r\n        if (key in target) {\r\n            return true\r\n        }\r\n    }\r\n    return false\r\n}\r\n\r\nfunction findItems(keyInfo, items, key, groupCount) {\r\n    let childItems;\r\n    let result;\r\n    if (groupCount) {\r\n        for (let i = 0; i < items.length; i++) {\r\n            childItems = items[i].items || items[i].collapsedItems || [];\r\n            result = findItems(keyInfo, childItems || [], key, groupCount - 1);\r\n            if (result) {\r\n                return result\r\n            }\r\n        }\r\n    } else if (indexByKey(keyInfo, items, key) >= 0) {\r\n        return items\r\n    }\r\n}\r\n\r\nfunction getItems(keyInfo, items, key, groupCount) {\r\n    if (groupCount) {\r\n        return findItems(keyInfo, items, key, groupCount) || []\r\n    }\r\n    return items\r\n}\r\n\r\nfunction generateDataByKeyMap(keyInfo, array) {\r\n    if (keyInfo.key() && (!array._dataByKeyMap || array._dataByKeyMapLength !== array.length)) {\r\n        const dataByKeyMap = {};\r\n        const arrayLength = array.length;\r\n        for (let i = 0; i < arrayLength; i++) {\r\n            dataByKeyMap[JSON.stringify(keyInfo.keyOf(array[i]))] = array[i]\r\n        }\r\n        array._dataByKeyMap = dataByKeyMap;\r\n        array._dataByKeyMapLength = arrayLength\r\n    }\r\n}\r\n\r\nfunction getCacheValue(array, key) {\r\n    if (array._dataByKeyMap) {\r\n        return array._dataByKeyMap[JSON.stringify(key)]\r\n    }\r\n}\r\n\r\nfunction getHasKeyCacheValue(array, key) {\r\n    if (array._dataByKeyMap) {\r\n        return array._dataByKeyMap[JSON.stringify(key)]\r\n    }\r\n    return true\r\n}\r\n\r\nfunction setDataByKeyMapValue(array, key, data) {\r\n    if (array._dataByKeyMap) {\r\n        array._dataByKeyMap[JSON.stringify(key)] = data;\r\n        array._dataByKeyMapLength += data ? 1 : -1\r\n    }\r\n}\r\n\r\nfunction cloneInstanceWithChangedPaths(instance, changes, clonedInstances) {\r\n    clonedInstances = clonedInstances || new WeakMap;\r\n    const result = instance ? Object.create(Object.getPrototypeOf(instance)) : {};\r\n    if (instance) {\r\n        clonedInstances.set(instance, result)\r\n    }\r\n    const instanceWithoutPrototype = _extends({}, instance);\r\n    deepExtendArraySafe(result, instanceWithoutPrototype, true, true, true);\r\n    for (const name in instanceWithoutPrototype) {\r\n        const value = instanceWithoutPrototype[name];\r\n        const change = null === changes || void 0 === changes ? void 0 : changes[name];\r\n        if (isObject(value) && !isPlainObject(value) && isObject(change) && !clonedInstances.has(value)) {\r\n            result[name] = cloneInstanceWithChangedPaths(value, change, clonedInstances)\r\n        }\r\n    }\r\n    for (const name in result) {\r\n        const prop = result[name];\r\n        if (isObject(prop) && clonedInstances.has(prop)) {\r\n            result[name] = clonedInstances.get(prop)\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction createObjectWithChanges(target, changes) {\r\n    const result = cloneInstanceWithChangedPaths(target, changes);\r\n    return deepExtendArraySafe(result, changes, true, true, true)\r\n}\r\n\r\nfunction applyBatch(_ref) {\r\n    let {\r\n        keyInfo: keyInfo,\r\n        data: data,\r\n        changes: changes,\r\n        groupCount: groupCount,\r\n        useInsertIndex: useInsertIndex,\r\n        immutable: immutable,\r\n        disableCache: disableCache,\r\n        logError: logError,\r\n        skipCopying: skipCopying\r\n    } = _ref;\r\n    const resultItems = true === immutable ? [...data] : data;\r\n    changes.forEach((item => {\r\n        const items = \"insert\" === item.type ? resultItems : getItems(keyInfo, resultItems, item.key, groupCount);\r\n        !disableCache && generateDataByKeyMap(keyInfo, items);\r\n        switch (item.type) {\r\n            case \"update\":\r\n                update(keyInfo, items, item.key, item.data, true, immutable, logError);\r\n                break;\r\n            case \"insert\":\r\n                insert(keyInfo, items, item.data, useInsertIndex && isDefined(item.index) ? item.index : -1, true, logError, skipCopying);\r\n                break;\r\n            case \"remove\":\r\n                remove(keyInfo, items, item.key, true, logError)\r\n        }\r\n    }));\r\n    return resultItems\r\n}\r\n\r\nfunction getErrorResult(isBatch, logError, errorCode) {\r\n    return !isBatch ? rejectedPromise(errors.Error(errorCode)) : logError && errors.log(errorCode)\r\n}\r\n\r\nfunction applyChanges(data, changes) {\r\n    let options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n    const {\r\n        keyExpr: keyExpr = \"id\",\r\n        immutable: immutable = true\r\n    } = options;\r\n    const keyGetter = compileGetter(keyExpr);\r\n    const keyInfo = {\r\n        key: () => keyExpr,\r\n        keyOf: obj => keyGetter(obj)\r\n    };\r\n    return applyBatch({\r\n        keyInfo: keyInfo,\r\n        data: data,\r\n        changes: changes,\r\n        immutable: immutable,\r\n        disableCache: true,\r\n        logError: true\r\n    })\r\n}\r\n\r\nfunction update(keyInfo, array, key, data, isBatch, immutable, logError) {\r\n    let target;\r\n    const keyExpr = keyInfo.key();\r\n    if (keyExpr) {\r\n        if (hasKey(data, keyExpr) && !keysEqual(keyExpr, key, keyInfo.keyOf(data))) {\r\n            return getErrorResult(isBatch, logError, \"E4017\")\r\n        }\r\n        target = getCacheValue(array, key);\r\n        if (!target) {\r\n            const index = indexByKey(keyInfo, array, key);\r\n            if (index < 0) {\r\n                return getErrorResult(isBatch, logError, \"E4009\")\r\n            }\r\n            target = array[index];\r\n            if (true === immutable && isDefined(target)) {\r\n                const newTarget = createObjectWithChanges(target, data);\r\n                array[index] = newTarget;\r\n                return !isBatch && trivialPromise(newTarget, key)\r\n            }\r\n        }\r\n    } else {\r\n        target = key\r\n    }\r\n    deepExtendArraySafe(target, data, true, false, true, true);\r\n    if (!isBatch) {\r\n        if (config().useLegacyStoreResult) {\r\n            return trivialPromise(key, data)\r\n        }\r\n        return trivialPromise(target, key)\r\n    }\r\n}\r\n\r\nfunction insert(keyInfo, array, data, index, isBatch, logError, skipCopying) {\r\n    let keyValue;\r\n    const keyExpr = keyInfo.key();\r\n    const obj = isPlainObject(data) && !skipCopying ? extend({}, data) : data;\r\n    if (keyExpr) {\r\n        keyValue = keyInfo.keyOf(obj);\r\n        if (void 0 === keyValue || \"object\" === typeof keyValue && isEmptyObject(keyValue)) {\r\n            if (Array.isArray(keyExpr)) {\r\n                throw errors.Error(\"E4007\")\r\n            }\r\n            keyValue = obj[keyExpr] = String(new Guid)\r\n        } else if (void 0 !== array[indexByKey(keyInfo, array, keyValue)]) {\r\n            return getErrorResult(isBatch, logError, \"E4008\")\r\n        }\r\n    } else {\r\n        keyValue = obj\r\n    }\r\n    if (index >= 0) {\r\n        array.splice(index, 0, obj)\r\n    } else {\r\n        array.push(obj)\r\n    }\r\n    setDataByKeyMapValue(array, keyValue, obj);\r\n    if (!isBatch) {\r\n        return trivialPromise(config().useLegacyStoreResult ? data : obj, keyValue)\r\n    }\r\n}\r\n\r\nfunction remove(keyInfo, array, key, isBatch, logError) {\r\n    const index = indexByKey(keyInfo, array, key);\r\n    if (index > -1) {\r\n        array.splice(index, 1);\r\n        setDataByKeyMapValue(array, key, null)\r\n    }\r\n    if (!isBatch) {\r\n        return trivialPromise(key)\r\n    }\r\n    if (index < 0) {\r\n        return getErrorResult(isBatch, logError, \"E4009\")\r\n    }\r\n}\r\n\r\nfunction indexByKey(keyInfo, array, key) {\r\n    const keyExpr = keyInfo.key();\r\n    if (!getHasKeyCacheValue(array, key)) {\r\n        return -1\r\n    }\r\n    for (let i = 0, arrayLength = array.length; i < arrayLength; i++) {\r\n        if (keysEqual(keyExpr, keyInfo.keyOf(array[i]), key)) {\r\n            return i\r\n        }\r\n    }\r\n    return -1\r\n}\r\nexport {\r\n    applyBatch,\r\n    applyChanges,\r\n    createObjectWithChanges,\r\n    indexByKey,\r\n    insert,\r\n    remove,\r\n    update\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}